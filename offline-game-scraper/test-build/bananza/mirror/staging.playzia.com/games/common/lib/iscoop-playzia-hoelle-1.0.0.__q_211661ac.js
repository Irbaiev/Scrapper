var DO;!function(a){!function(b){!function(c){function d(a,b,c){var d=setInterval(function(){a()&&(clearInterval(d),b())},c||250)}function e(b,c,d){var e;return function(){var f=this,g=arguments,h=function(){e=null,d||b.apply(f,g)},i=d&&!e;clearTimeout(e),e=a.Core.Time.juggler.setTimeout(h,c),i&&b.apply(f,g)}}function f(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c;return a}function g(b){function c(){d.off(a.Core.Events.getTouchEvent(),b),d.off(a.Core.Events.getClickEvent(),b),$("#touch_to_skip").remove()}$("#touch_to_skip").remove();var d=$("body").add('<div id="touch_to_skip" style="position: absolute; left: 0; right: 0; width: 100%; height: 100%";></div>');return d.on(a.Core.Events.getTouchEvent(),b),d.on(a.Core.Events.getClickEvent(),b),c}function h(a){for(var b=a.split("."),c=window||this,d=0,e=b.length;d<e;d++)c=c[b[d]];if("function"!=typeof c)throw"[Utils.getReference] Cannot get reference to class : "+a;return c}function i(a){var b=decodeURI((RegExp(a+"=(.+?)(&|$)").exec(location.search)||[,null])[1]);return"null"!=b&&0!=b.length||(b=null),b}function j(){var a={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(b,c,d){"true"==d&&(d=!0),"false"==d&&(d=!1),a[c]=d});return a}c.poll=d,c.debounce=e,c.shuffleArray=f;var k=function(){function b(b){this.wasSkipped=!1,this._tasks=[],this._juggler=b||a.Core.Time.juggler}return b.prototype.add=function(a,b){var c={func:a,canSkip:b};this._tasks.push(c)},b.prototype.start=function(a){this._onComplete=a,this._tasks.length?this.nextTask():this._onComplete&&this._onComplete()},b.prototype.nextTask=function(){this._currentTask=this._tasks.shift();var a=this;this._currentTask.func(function(){a._tasks.length?a.nextTask():(a._currentTask=null,a._onComplete&&a._onComplete())})},b.prototype.skip=function(){this._currentTask&&this._currentTask.canSkip&&this.nextTask()},b.prototype.skipToEnd=function(){this._onComplete()},b}();c.Queue=k,c.touchToSkip=g,c.getReference=h,c.getUrlVar=i,c.getUrlVars=j,c.convertToAmount=function(a){return parseFloat(Math.floor(a).toFixed(2))},c.formatTime=function(a){var c=Math.floor(a/60),d=b.Lang.getPhrase("settings_hour"),e=b.Lang.getPhrase("settings_hours"),f=b.Lang.getPhrase("settings_minute"),g=b.Lang.getPhrase("settings_minutes");if(c){var h=a%(60*c);return h?l(c,d,e)+", "+l(h,f,g):l(c,d,e)}return l(a,f,g)};var l=function(a,b,c){return a>1?a+" "+c:a+" "+b}}(b.Utils||(b.Utils={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){function c(a){var c=new e.Queue;c.add(function(a){b.Events.init(),a()}),c.add(function(a){b.Time.init(),a()}),c.add(function(a){b.Environment.init(),a()}),c.add(function(a){b.SoundManager.globalSounds=new b.SoundManager,a()}),c.start(function(){a()}),d()}function d(){document.addEventListener("contextmenu",function(a){a.preventDefault()}),$(window).blur(function(c){f=(new Date).getTime(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_LOSE_FOCUS,c,f)}),$(window).focus(function(c){var d=(new Date).getTime()-f;b.Events.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,d,c)}),window.onerror=function(c,d,e,f,g){b.Events.coreEvents.emit(a.Core.Events.ON_APP_EXCEPTION,c)},window.onresize=e.debounce(function(c){b.Environment.currentMode=b.Environment.getOrientation(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_RESIZE,c,b.Environment.getOrientation())},100);var c,d=0,g=!1,h=$("body");h.on({touchmove:function(e){g=!0,c=$(this).scrollTop(),b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,e),d=c}}),h.on({touchend:function(c){g&&b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL_END,c),g=!1}}),window.onscroll=e.debounce(function(c){b.Events.coreEvents.emit(a.Core.Events.ON_APP_SCROLL,c)},250)}var e=a.Core.Utils,f=(new Date).getTime();b.init=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(){b.launchVariables=a.Core.Utils.getUrlVars(),b.launchVariables.homeUrl=b.launchVariables.homeUrl||b.defaultSettings.homeUrl,b.launchVariables.platformId=b.launchVariables.platformId||b.defaultSettings.platformId,b.launchVariables.operatorCode=b.launchVariables.operatorCode||b.defaultSettings.operatorCode,b.launchVariables.brandCode=b.launchVariables.brandCode||b.defaultSettings.brandCode,b.launchVariables.gameCode=b.launchVariables.gameCode||b.defaultSettings.gameCode,b.launchVariables.serverUrl=b.launchVariables.serverUrl||b.defaultSettings.serverUrl,b.launchVariables.language=b.launchVariables.language||b.defaultSettings.language,b.launchVariables.language=b.launchVariables.language.toString(),b.launchVariables.currency=b.launchVariables.currency||b.defaultSettings.currency,b.launchVariables.token=b.launchVariables.token||"",b.launchVariables.sessionId=b.launchVariables.sessionId||"",b.launchVariables.playerId=b.launchVariables.playerId||"",b.launchVariables.loginUrl=b.launchVariables.login?decodeURIComponent(b.launchVariables.login):"",void 0==b.launchVariables.displayCurrency&&(b.launchVariables.displayCurrency=!0),b.launchVariables.homeEnabled=!0,b.launchVariables.music="1",b.launchVariables.sfx="1",b.launchVariables.autospinLimits=!b.launchVariables.autospinLimits||b.launchVariables.autospinLimits,b.launchVariables.threeSecRule=!!b.launchVariables.threeSecRule&&b.launchVariables.threeSecRule,b.launchVariables.hasCheatTool="0"==b.launchVariables.mode,screenfull.enabled&&screenfull.onchange(function(){a.Core.Events.coreEvents.emit(b.EVENT_FULL_SCREEN,screenfull.isFullscreen)}),"iOS"==b.getPlatformData().os.family&&(document.addEventListener("gesturestart touchmove",function(a){a=a.originalEvent||a,1!==a.scale&&"SELECT"!==a.target.tagName&&"INPUT"!==a.target.tagName&&(a.preventDefault(),document.body.style.transform="scale(1)")}),document.addEventListener("touchend",function(a){"SELECT"!=a.target.tagName&&"INPUT"!=a.target.tagName&&(a.preventDefault(),$(a.target).trigger("click"))},!1))}function d(){return b.defaultSettings.aspectRatio}function e(){return!b.isDesktop()&&screenfull.enabled}function f(){b.isDeviceMobile()&&screenfull.request()}function g(){return window.platform}function h(){return k()==b.ORIENTATION_LANDSCAPE}function i(){return l()&&k()==b.ORIENTATION_PORTRAIT}function j(a,c){if(c){if(!(a.indexOf(c)>=0))throw"[Environment] Variant type not found : "+b.variant+".  Allowed types for this application are : "+a;b.variant=c}else b.getDeviceType()==b.DEVICE_MOBILE?b.variant=b.DEVICE_MOBILE:b.variant=b.DEVICE_DESKTOP,b.launchVariables.variant=b.variant}function k(){return window.innerWidth>window.innerHeight?a.Core.Environment.ORIENTATION_LANDSCAPE:a.Core.Environment.ORIENTATION_PORTRAIT}function l(){return o()==b.DEVICE_MOBILE}function m(){return!l()}function n(){var a=/iPhone|iPod|Android/i.test(navigator.userAgent),b=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(navigator.userAgent);return a&&!b}function o(){var a=b.launchVariables.variant;return a||(a=n()?b.DEVICE_MOBILE:b.DEVICE_DESKTOP),a}function p(){a.Core.Events.coreEvents.emit(a.Core.Events.ON_APP_EXIT)}function q(a){void 0===a&&(a=100),"iOS"!==g().os.family&&l()&&navigator.vibrate&&navigator.vibrate([a])}b.EVENT_FULL_SCREEN="env_full_screen",b.DEVICE_MOBILE="mobile",b.DEVICE_DESKTOP="desktop",b.ORIENTATION_LANDSCAPE="landscape",b.ORIENTATION_PORTRAIT="portrait",b.variant="default",b.currentMode="",b.updatedHeight=window.innerHeight,b.init=c,b.getAspectRatio=d,b.isFullScreenAvailable=e,b.goFullScreen=f,b.getPlatformData=g,b.isLandscape=h,b.isPortrait=i,b.setVariant=j,b.getOrientation=k,b.isMobile=l,b.isDesktop=m,b.isDeviceMobile=n,b.getDeviceType=o,b.exit=p,b.playVibrate=q}(b.Environment||(b.Environment={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){c.juggler=new h(!0),f=a.Core.Events.createEmitter()}function e(){return"_dotime:"+ ++g}var f,g=0;c.init=d;var h=function(){function a(a){this._objects={},this._isActive=!0,this.timeMultiplier=1,this.currentTime=0,this._autoStart=a,a&&this.start(),this.id="_juggler:"+e(),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(a){}.bind(this))}return a.prototype.start=function(){this._lastTime=TweenLite.ticker.time,this._tickBind=this.update.bind(this),TweenLite.ticker.addEventListener("tick",this._tickBind)},a.prototype.stop=function(){TweenLite.ticker.removeEventListener("tick",this._tickBind)},a.prototype.update=function(){var a=1e3*(TweenLite.ticker.time-this._lastTime);if(this.currentTime+=a,this._isActive){for(var b in this._objects)this._objects[b].onUpdate(a*this.timeMultiplier);this._lastTime=TweenLite.ticker.time}},a.prototype.purge=function(){for(var a in this._objects)this.remove(this._objects[a])},a.prototype.add=function(a){var b=e();a._animateableId=b,this._objects[b]=a},a.prototype.remove=function(a){delete this._objects[a._animateableId]},a.prototype.setInterval=function(a,b){var c=this.delayCall(a,b,-1);return c.start(),c},a.prototype.setTimeout=function(a,b){var c=this.delayCall(a,b);return c.start(),c},a.prototype.clearTimeout=function(a){this.remove(a)},a.prototype.delayCall=function(a,b,c,d){return new i(a,b,this,c,d)},a}();c.Juggler=h;var i=function(){function a(a,b,c,d,e){this.iterations=0,this._isPaused=!1,this._juggler=c,this._originalDelay=b,this._delay=b,this._onTick=a,this._onComplete=e,this._repeatCount=d||1,this.iterations=0}return a.prototype.pause=function(){this._isPaused=!0},a.prototype.resume=function(){this._isPaused=!1},a.prototype.start=function(){this._juggler.add(this)},a.prototype.stop=function(){this._juggler.remove(this)},a.prototype.onUpdate=function(a){this._isPaused||(this._delay-=a,this._delay<=0&&(this._onTick(++this.iterations),0==--this._repeatCount?(this.stop(),this._onComplete&&this._onComplete()):this._delay=this._originalDelay))},a}();c.DelayCall=i}(b.Time||(b.Time={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(){a.coreEvents=new PIXI.utils.EventEmitter}function c(){return"touchend"}function d(){return"mouseover"}function e(){return"mouseout"}function f(){return"mousedown"}function g(){return"mouseout"}function h(){return new PIXI.utils.EventEmitter}a.ON_CREATE="on_create",a.ON_DESTROY="on_destroy",a.ON_SHOWN="on_shown",a.ON_HIDDEN="on_hidden",a.ON_INTERACTION="on_touch",a.ON_TOGGLE_INTERACTION="on_radio_touch",a.ON_APP_EXIT="on_app_exit",a.ON_APP_LOSE_FOCUS="on_app_lose_focus",a.ON_APP_GET_FOCUS="on_app_get_focus",a.ON_APP_EXCEPTION="on_app_exception",a.ON_APP_RESIZE="on_app_resize",a.ON_APP_SCROLL="on_app_scroll_start",a.ON_APP_SCROLL_END="on_app_scroll_end",a.init=b,a.getTouchEvent=c,a.getOverEvent=d,a.getOverOutEvent=e,a.getClickEvent=f,a.getOutEvent=g,a.createEmitter=h}(a.Events||(a.Events={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=function(){function c(){this.loadProgress=0,this._movieClips={},this._hasLoaded=!1,this.preLoadNumber=0,Howler.iOSAutoEnable=!1}return c.prototype.purge=function(){this._PIXILoader.reset()},c.prototype.areAssetsAvailable=function(a){if(c._instances[a]){return c._instances[a].isLoaded()}return!1},c.get=function(a){var b;return c._instances[a]?b=c._instances[a]:(b=new c,c._instances[a]=b),b},c.prototype.isLoaded=function(){return this._hasLoaded},c.prototype.getMovieClip=function(b,d,e,f){var g=null,h=this._movieClips[b];if(!h)for(var i in c._instances)if(h=c._instances[i]._movieClips[b])break;if(h)if(h.type===c.ASSET_TYPE_SPINE_ATLAS)this.getPIXIAsset(h.id)&&this.getPIXIAsset(h.id).spineData&&(g=new PIXI.spine.Spine(this.getPIXIAsset(h.id).spineData),g.state.addAnimation(0,h.movieClips.textures[0],!1,0),g.state.timeScale=0);else{var j=[];h.movieClips.textures.forEach(function(a){j.push(PIXI.Texture.from(a))}),e=e||"PIXI.AnimatedSprite";var k=a.Core.Utils.getReference(e);g=new k(j),g.animationSpeed=h.movieClips.speed||1,d&&(g.anchor.x=.5,g.anchor.y=.5)}return g},c.prototype.playAnimation=function(a,b,c,d){if(void 0===b&&(b=!1),void 0===c&&(c=void 0),void 0===d&&(d=!0),a)if(a instanceof PIXI.AnimatedSprite)a.loop=b,a.gotoAndPlay(d?0:a.totalFrames-1),a.onComplete=function(){c&&c()};else{this.clearState(a);var e=a.state.tracks[0].animation.name;a.state.clearTracks(),a.state.addAnimation(0,e,b,0),a.state.timeScale=1,a.state.onComplete=function(){c&&c()}}else c&&c()},c.prototype.clearState=function(a){a.lastTime=null},c.prototype.getSoundManager=function(){return this._soundManager},c.prototype.getPIXIAsset=function(a){var b=this._PIXILoader.resources[a];if(!b)for(var d in c._instances)if(b=c._instances[d]._PIXILoader.resources[a])break;return b},c.prototype.getPIXIAtlas=function(a){if(this.getPIXIAsset(a))return this.getPIXIAsset(a).textures;throw"[AssetManager] Atlas does not exist in assets (was it filtered by bandwidth?) : "+a},c.prototype.getPIXISprite=function(a,b){if(!b){var c=this.getAtlasFromRef(a);a=c.ref,b=c.atlas}return new PIXI.Sprite(this.getPIXIAtlas(b)[a])},c.prototype.getPIXITexture=function(a,b){var c;if(!b){var d=this.getAtlasFromRef(a);a=d.ref,b=d.atlas}if(b)c=this.getPIXIAtlas(b)[a];else{if(!this.getPIXIAsset(a))throw"[AssetManager] Texture does not exist in assets (was it filtered by bandwidth?) : "+a;c=this.getPIXIAsset(a).texture}return c},c.prototype.load=function(d,e,f){function g(d){function g(a){var c;if("string"==typeof a.path)c=a.path;else if(!(c=a.path[b.Environment.variant]))return null;var d=c.split("|");return d.length>1?d:c}function i(){}function j(){h.loadProgress=l/k,l++,f&&f(l/k)}var k=0,l=0;d.items.forEach(function(a){var d=g(a);if(d){if(a.movieclips)for(var e in a.movieclips)h._movieClips[e]={id:a.id,type:a.type||"sprite",movieClips:a.movieclips[e]};switch(a.type){case c.ASSET_TYPE_IMAGE:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_JSON:h._PIXILoader.add(a.id,g(a)),k++;break;case c.ASSET_TYPE_ATLAS:k+=2,h._PIXILoader.add(a.id,d);break;case c.ASSET_TYPE_MUL_ATLAS:h._PIXILoader.add(d),k+=2*d.length;break;case c.ASSET_TYPE_VIDEO:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_SPINE_ATLAS:h._PIXILoader.add(a.id,d),k+=3;break;case c.ASSET_TYPE_FONT:h._PIXILoader.add(a.id,d),k++;break;case c.ASSET_TYPE_AUDIO:var f=[],l=b.SoundManager.getSupportedFormats();l.indexOf("m4a")>=0?f[0]=d+".m4a?v=1.0.0":l.indexOf("ogg")>=0?f[0]=d+".ogg?v=1.0.0":l.indexOf("mp3")>=0&&(f[0]=d+".mp3?v=1.0.0");var m=a.properties||{};m.src=f,m.onload=j,m.onloaderror=i;var n=void 0;try{n=new Howl(m),n.once("loaderror",j.bind(this))}catch(a){}k++,a.global&&!b.SoundManager.globalSounds.doesSoundExist(a.id)?b.SoundManager.globalSounds.addSound(a,n):h._soundManager.addSound(a,n)}}}),h._PIXILoader.onLoad.add(j),h._PIXILoader.onComplete.add(function(){h._hasLoaded=!0,a.Core.Time.juggler.setTimeout(e,500)}),h._PIXILoader.load()}var h=this;if(this._hasLoaded)return this.preLoadNumber++,this.preLoadNumber++,this.loadProgress=1,f&&f(1),void e();this._PIXILoader=new PIXI.Loader,this._soundManager=new a.Core.SoundManager,this._PIXILoader.pre(function(a,b){c.antiCaching&&(a.url+="?v=1.0.0"),b()}),this.loadProgress=0,f&&f(0),d.indexOf(".json")?$.getJSON(d+"?v=1.0.0",function(a){g(a)}):g(d)},c.prototype.getAtlasFromRef=function(a){if(a.indexOf(":")>0){var b=a.split(":");return{atlas:b[0],ref:b[1]}}return{atlas:null,ref:a}},c.ASSET_TYPE_IMAGE="image",c.ASSET_TYPE_AUDIO="sound",c.ASSET_TYPE_JSON="json",c.ASSET_TYPE_ATLAS="atlas",c.ASSET_TYPE_FONT="font",c.ASSET_TYPE_MUL_ATLAS="multi_atlas",c.ASSET_TYPE_SPINE_ATLAS="spine_atlas",c.ASSET_TYPE_VIDEO="video",c.antiCaching=!0,c._instances={},c}();b.AssetManager=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(b){function c(d,e){$.ajax({dataType:"json",url:"assets/locale/lang/"+d.toLowerCase()+".json?v=1.0.0",success:function(a){b.langCode=d,g=a,e()},error:function(){console.warn("[Lang] Language file not found for:"+d,"Defaulting to en"),c(a.Environment.defaultSettings.language,e)}})}function d(a,c){b.langCode=a,g=c}function e(a,b){if(!g)return a.toLowerCase();"@"==a.substr(0,1)&&(a=a.substring(1,a.length));var c=g[a];if(c||(c=a),b)for(var d in b){var e=new RegExp("{"+d+"}","gi");c=c.replace(e,b[d])}return c}function f(){for(var a in g){var b=".lang\\:"+a;$(b)&&$(b).length&&$(b).html(e(a))}}var g;b.loadDictionary=c,b.setDictionary=d,b.getPhrase=e,b.scanDOM=f}(a.Lang||(a.Lang={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a,b,c){var d=Math.random()*(b-a)+a;return c&&(d=Math.floor(d)),d}function c(a){return a*(Math.PI/180)}function d(a,b){return Math.round(a/b)*b}function e(a,b){return Math.ceil(a/b)*b}function f(a,b){return Math.floor(a/b)*b}function g(a){return Math.acos(a)*v}function h(a){return Math.asin(a)*v}function i(a){return Math.atan(a)*v}function j(a,b){return Math.atan2(a,b)*v}function k(a){return Math.cos(u*a)}function l(a){return Math.sin(u*a)}function m(a){return Math.tan(u*a)}function n(a,b,c,d){return Math.atan2(d-b,c-a)*v}function o(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}function p(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function q(a,b,c){return a<=b?0:a>=c?1:(a-b)/(c-b)}function r(a,b,c){return a+(b-a)*c}function s(a,b){if(a<0)for(;a<0;)a+=b;else if(a>b)for(;a>b;)a-=b;return a}function t(a){return s(a,360)}var u=.0174532925,v=57.2957795;a.getRandomRange=b,a.degToRad=c,a.roundToNearest=d,a.roundUpToNearest=e,a.roundDownToNearest=f,a.Dacos=g,a.Dasin=h,a.Datan=i,a.Datan2=j,a.Dcos=k,a.Dsin=l,a.Dtan=m,a.calcAngle=n,a.calcDistance2=o,a.calcDistance=p,a.getNormalizedByLimits=q,a.lerp=r,a.normalize=s,a.putIn360=t}(a.Maths||(a.Maths={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){var c=function(){function c(){var a=this;this._sounds={},this._atlases={},this._volumeFx=1,this._volumeMusic=1,this._musicRestorePoints={},this._playingSounds={},this._isSoundMuteOnFocusLose=!1,this.getSpriteAtlas=function(b){return a._atlases&&a._atlases[b]?a._atlases[b]:null},b.Events.coreEvents.on(c.EVENT_SET_MUTE,function(a){a?this.mute():this.unMute()}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_LOSE_FOCUS,function(){this._isSoundMuteOnFocusLose=this.isMuted,b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!0,!0)}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_GET_FOCUS,function(){this._isSoundMuteOnFocusLose||b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!1,!0)}.bind(this)),b.Events.coreEvents.on(b.Events.ON_APP_EXCEPTION,function(){b.Events.coreEvents.emit(c.EVENT_SET_MUTE,!0)}.bind(this)),Howler.mobileAudioEnable=!1}return c.prototype.getCurrentMusic=function(){return this._currentMusic},c.prototype.getAtlas=function(){return this._atlases},c.prototype.getCurrentMusicId=function(){return this._currentMusicId},c.prototype.getVolumeFX=function(){return 1==this._volumeFx},c.prototype.getVolumeMusic=function(){return 1==this._volumeMusic},c.prototype.setVolumeMusic=function(a){this._volumeMusic=1==a?1:0,this._currentMusic&&this._currentMusic.volume(this._volumeMusic)},c.prototype.setVolumeFX=function(a){this._volumeFx=1==a?1:0},c.prototype.purge=function(){this._sounds=null},c.prototype.playCue=function(b,d,e,f){if(void 0===f&&(f=1),b&&!c.globalSounds.isMuted&&a.Common.ApplicationBase.allAssetsLoaded){var g,h;"string"==typeof b?h=b:void 0==d?(h=b.shift(),b.push(h)):h=b[d];var i=this.getSpriteAtlas(h);return i?(i.volume(this._volumeFx*f),g=i.play(h),this._playingSounds[h]=g):(g=this.getSound(b),g?(g.volume(this._volumeFx),g.play()):console.warn("[SoundManager] Sound ID doesn't exist : "+h)),g&&(g.loop=e),g}},c.prototype.stopCue=function(a){if(a){var b;"string"==typeof a?b=a:console.warn("[SoundManager] stopCue() invalid cue parameter:",a);var c=this.getSpriteAtlas(b);c&&this._playingSounds[b]&&c.stop(this._playingSounds[b])}},c.prototype.mute=function(){Howler.mute(!0),this.isMuted=!0},c.prototype.unMute=function(){Howler.mute(!1),this.isMuted=!1},c.prototype.addSound=function(a,b){if(this._sounds[a.id])throw"[SoundManager] Duplicate sound id : "+a.id;if(this._sounds[a.id]=b,a.properties.sprite)for(var c in a.properties.sprite)this._atlases[c]=b},c.prototype.doesSoundExist=function(a){return!!this._sounds[a]},c.prototype.getSound=function(a){return this._sounds[a]?this._sounds[a]:null},c.prototype.setMusicRestorePoint=function(a,b){this._musicRestorePoints[a]=b},c.prototype.stopMusic=function(){this._currentMusic&&(this._musicRestorePoints[this._currentMusicId]=this._currentMusic.seek(),this._currentMusic.stop(),this._currentMusic=null)},c.prototype.fadeMusicOut=function(a,b){b=b||500,a=a||0,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),a*this._volumeMusic,b)},c.prototype.fadeMusicIn=function(a,b){b=b||500,a=a||1,this._currentMusic&&this._currentMusic.fade(Math.min(this._volumeMusic,this._currentMusic.volume()),this._volumeMusic*a,b)},c.prototype.startMusic=function(b,c,d,e){if(a.Common.ApplicationBase.allAssetsLoaded){c=c||250,this.stopMusic(),this._currentMusic=this.getSound(b),d&&this._currentMusic.seek(this._musicRestorePoints[b]||0),this._currentMusic.loop(!e),this._currentMusic.volume(0),this.fadeMusicIn(1,c);try{this._currentMusic.play()}catch(a){console.error("Failed to play music:",a)}return this._currentMusic}},c.isFormatSupported=function(a){return c.getSupportedFormats().indexOf(a)>-1},c.getSupportedFormats=function(){var a=["ogg","mp3","m4a"],b=[],c=new Audio;return a.forEach(function(a){("probably"==c.canPlayType("audio/"+a)||"maybe"==c.canPlayType("audio/"+a))&&b.push(a)}),b},c.EVENT_SET_MUTE="sound_manager_mute",c}();b.SoundManager=c}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(a,b){return h[a]||(h[a]=new i("html_pages_container-"+a.toLowerCase(),b)),h[a]}var e,f,g={},h={};c.getPageManager=d;var i=function(){function c(a,c){this._pageData={},c?this._$div=c:($("#game_wrapper").append("<div id='"+a+"'></div>"),this._$div=$("#"+a)),this._eventListener=b.Events.createEmitter(),b.Events.coreEvents.on(b.Events.ON_APP_RESIZE,function(){},this)}return c.prototype.getDiv=function(){return this._$div},c.prototype.setVisible=function(a){a?this._$div.show():this._$div.hide()},c.prototype.loadPages=function(d,e,f){function h(){var l=d.shift();k._pageData[l.id]=l,k._$div.append('<div id="'+l.id+'"></div>');var m=$("#"+l.id),n=l.html;"string"!=typeof n&&(n=b.Environment.variant==b.Environment.DEVICE_MOBILE?l.html.mobile:l.html.desktop),$(m).load(n+"?v=1.0.0",function(){var n=a.Core.Utils.getReference(l.module),o=new n(l.id,m);g[l.id]=o,o.emit(a.Core.Events.ON_CREATE),b.Events.coreEvents.emit(c.EVENT_ON_PAGE_LOADED,o),d.length>0?h():(k._$div.show(),k.processCSS(),f()),$(l.div).hide(),e(++j/i,l.id)})}this._$div.hide();var i=d.length,j=0;e(0);var k=this;h()},c.prototype.getPage=function(a){return g[a]},c.prototype.closeOverlay=function(b){f&&(f.emit(a.Core.Events.ON_HIDDEN,b),f=null)},c.prototype.showOverlay=function(b,c){f&&f.getId()==b||(f&&f.emit(a.Core.Events.ON_HIDDEN),c=c||{},c.isOverlay=!0,f=g[b],f.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.toggleOverlay=function(b,c){f&&f.getId()==b?(this.closeOverlay(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1)):this.showOverlay(b,c)},c.prototype.showPage=function(b,c){e&&e.getId()==b||(e&&e.emit(a.Core.Events.ON_HIDDEN),e=g[b],e.emit(a.Core.Events.ON_SHOWN,c))},c.prototype.processCSS=function(){for(var a in this._pageData){var c=this._pageData[a];if($("head").append('<link id="'+a+'-default" rel="stylesheet" href="'+c.variants_css.default+'?v=1.0.0" type="text/css" />'),b.Environment.variant==b.Environment.DEVICE_MOBILE){var d=c.variants_css.mobile.landscape||c.variants_css.default,e=c.variants_css.mobile.portrait||c.variants_css.default;$("head").append('<link id="'+a+'-landscape" rel="stylesheet" media="all and (orientation:landscape)" href="'+d+'?v=1.0.0">'),$("head").append('<link  id="'+a+'-portrait"rel="stylesheet" media="all and (orientation:portrait)" href="'+e+'?v=1.0.0">')}else{var f=c.variants_css[b.Environment.variant]||c.variants_css.default;$("head").append('<link id="'+a+'" rel="stylesheet" href="'+f+'?v=1.0.0" type="text/css" />')}}},c.EVENT_ON_PAGE_LOADED="page_manager_on_page_loaded",c}();c.PageManager=i}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(c){function d(b,d){var e=c.call(this)||this;return e._$div=d,e.id=b,e._$div.hide(),e._$parent=e._$div.parent(),e._$div.addClass("HTML_page"),e.on(a.Core.Events.ON_HIDDEN,function(){e._$div.hide(),e._data&&e._data.isOverlay&&e._$parent.append(e._$div)}),e.on(a.Core.Events.ON_SHOWN,function(a){e._data=a||{},a&&a.isOverlay?$("body").append(e._$div):e._$parent.append(e._$div),e._$div.show()}),e}return __extends(d,c),d.prototype.getId=function(){return this.id},d.prototype.changeParent=function(a){a?$(a).append(this._$div):$("body").append(this._$div),this._$div.show()},d.prototype.hide=function(){this.emit(b.Events.ON_HIDDEN)},d.prototype.show=function(){this.emit(b.Events.ON_SHOWN)},d}(PIXI.utils.EventEmitter);c.Page=d}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){var c=function(){function b(b,c,d){var e=this;this._onClick=d,this.$_div=$("#"+b),this.$_div.addClass(c),this.$_div.on(a.Core.Events.touchEventType,function(){e.setState(!e.state)})}return b.prototype.setState=function(a){this.state=a,this.$_div.removeClass("switch_on"),this.$_div.removeClass("switch_off"),this.$_div.addClass(a?"switch_on":"switch_off"),this._onClick(this.state)},b}();b.Switch=c}(b.Widgets||(b.Widgets={}))}(b.HTML||(b.HTML={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(){function a(){}return a}();c.StageSetup=d;var e=function(c){function d(){return null!==c&&c.apply(this,arguments)||this}return __extends(d,c),d.prototype.init=function(b){a.Core.Renderer.Stage.instance=this,this.setup=b;var c={width:b.width,height:b.height,view:document.getElementById(b.divId),transparent:b.isTransparent,antialias:!0,resolution:b.resolution||1};this._renderer=PIXI.autoDetectRenderer(c),a.Core.Time.juggler.add(this),this._update=1e3/this.setup.fps},d.prototype.onUpdate=function(a){this._update-=a,this._update<=0&&(this._renderer.render(this),this._update=1e3/this.setup.fps)},d.scaleStage=function(c,d,e,f){a.Core.Renderer.Stage.instance.x=e||0,a.Core.Renderer.Stage.instance.y=f||0,screenfull&&screenfull.isFullscreen||b.Environment.isDesktop()||b.Environment.isLandscape()?(a.Core.Renderer.Stage.instance.scale.x=c,a.Core.Renderer.Stage.instance.scale.y=d):(a.Core.Renderer.Stage.instance.scale.x=c,a.Core.Renderer.Stage.instance.scale.y=d+.04)},d}(PIXI.Container);c.Stage=e}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){!function(d){function e(a){for(var b in a)q[b]=new r(b,a[b])}function f(a){return q[a]}function g(){return p.length?p[p.length-1]:o}function h(a,b,d,e,f,g){var h,i=q[a],j=i.getSceneClass();h="TRANSITION"===i.id?new j(i,b,e,f,g):new j(i,b,e,f),g&&(h.onFinish=g),c.Stage.instance.addChild(h),p.push(h),d&&d.process(h)}function i(b){if(p.length){var c=p.pop(),d=function(){return c.emit(a.Core.Events.ON_DESTROY)};b?b&&b.process(c,null,d):d()}}function j(a,b,d,e,f){var g=q[a],h=g.getSceneClass(),i=new h(g,b,e,f);c.Stage.instance.addChild(i),p.push(i),d||(d=new s(s.FADE_IN)),d.processPopup(i)}function k(b){if(p.length){var c=p.pop(),d=function(){a.Core.Time.juggler.setTimeout(function(){c.emit(a.Core.Events.ON_DESTROY)},c.getLayout().getLayoutParams().closeDelay||1)};b||(b=new s(s.FADE_OUT)),b.processPopup(c,d)}}function l(a){return q[a]}function m(){return o?o.getSceneProfile():null}function n(b,d,e,f,g){if(!q[b])throw"[SceneManager] Scene does not exist : "+b;var h=q[b];if(o&&h.class==o.getSceneProfile().class)e(o,!1);else{o&&o.emit(a.Core.Events.ON_DESTROY);var i=h.getSceneClass();new i(h,d,function(a){c.Stage.instance.addChild(a),1==p.length&&"TRANSITION"==p[0].getSceneProfile().id&&c.Stage.instance.children.reverse(),e(a,!0),g?(o&&(o.cacheAsBitmap=!0),g.process(a,o,function(){o=a})):o=a},f)}}var o,p=[],q={},r=function(){function b(a,b){this.id=a,this.class=b.module,this.layoutId=b.layout_id,this.manifestFilename=b.asset_manifest}return b.prototype.getSceneClass=function(){return a.Core.Utils.getReference(this.class)},b.prototype.getLayout=function(a){return a.getPIXIAsset(this.layoutId).data},b}();d.SceneData=r;var s=function(){function a(a,b,c){this.type=a,this.duration=b||.6,this.ease=c||Linear.easeNone}return a.prototype.process=function(b,c,d){switch(this.type){case a.FADE_IN:b.alpha=0,TweenLite.to(b,this.duration,{alpha:1,ease:this.ease,onComplete:d});break;case a.FADE_OUT:TweenLite.to(b,this.duration,{alpha:0,ease:this.ease,onComplete:d});break;case a.ZOOM_IN:b.scale.set(0,0),TweenLite.to(b.scale,this.duration,{x:1,y:1,ease:this.ease,onComplete:d});break;case a.ZOOM_OUT:TweenLite.to(b.scale,this.duration,{x:0,y:0,ease:this.ease,onComplete:d})}},a.prototype.processPopup=function(c,d){var e=c.position.x,f=c.position.y,g=b.Environment.defaultSettings.width,h=b.Environment.defaultSettings.height;b.Environment.isPortrait()&&(g=b.Environment.defaultSettings.height,h=b.Environment.defaultSettings.width);var i=c.getLayout().getComponent("intro_holder");switch(i||(i=c.getLayout().getComponent("outro_holder")),this.type){case a.FADE_IN:i.alpha=0,TweenLite.to(i,this.duration,{alpha:1,ease:this.ease,onComplete:d});break;case a.FADE_OUT:TweenLite.to(i,this.duration,{alpha:0,ease:this.ease,onComplete:d});break;case a.ZOOM_IN:i.scale.set(0,0),TweenLite.to(i.scale,this.duration,{x:1,y:1,ease:this.ease,onComplete:d});break;case a.ZOOM_OUT:TweenLite.to(i.scale,this.duration,{x:0,y:0,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_RIGHT:i.position.x+=g,TweenLite.to(i.position,this.duration,{x:e,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_LEFT:i.position.x-=g/2,TweenLite.to(i.position,this.duration,{x:e,ease:this.ease,onComplete:d});break;case a.MOVE_OUT_TO_RIGHT:TweenLite.to(i.position,this.duration,{x:1.5*g,ease:this.ease,onComplete:function(){i.position.x=e,d&&d()}});break;case a.MOVE_OUT_TO_LEFT:TweenLite.to(i.position,this.duration,{x:-g/2,ease:this.ease,onComplete:function(){i.position.x=e,d&&d()}});break;case a.MOVE_IN_FROM_TOP:i.position.y-=h/2,TweenLite.to(i.position,this.duration,{y:f,ease:this.ease,onComplete:d});break;case a.MOVE_IN_FROM_BOTTOM:i.position.y+=h/2,TweenLite.to(i.position,this.duration,{y:f,ease:this.ease,onComplete:d});break;case a.MOVE_OUT_TO_TOP:TweenLite.to(i.position,this.duration,{y:-h/2,ease:this.ease,onComplete:function(){i.position.y=f,d&&d()}});break;case a.MOVE_OUT_TO_BOTTOM:TweenLite.to(i.position,this.duration,{y:1.5*h,ease:this.ease,onComplete:function(){i.position.y=f,d&&d()}})}},a.FADE_IN="fade_in",a.FADE_OUT="fade_out",a.ZOOM_IN="zoom_in",a.ZOOM_OUT="zoom_out",a.MOVE_IN_FROM_RIGHT="move_in_from_right",a.MOVE_IN_FROM_LEFT="move_in_from_left",a.MOVE_OUT_TO_RIGHT="move_out_to_right",a.MOVE_OUT_TO_LEFT="move_out_to_left",a.MOVE_IN_FROM_TOP="move_in_from_top",a.MOVE_IN_FROM_BOTTOM="move_in_from_bottom",a.MOVE_OUT_TO_TOP="move_out_to_top",a.MOVE_OUT_TO_BOTTOM="move_out_to_bottom",a}();d.SceneTransition=s,d.init=e,
d.getSceneData=f,d.getCurrentScene=g,d.showSceneAsOverlay=h,d.closeOverlay=i,d.showPopupScene=j,d.closePopupScene=k,d.doesSceneExist=l,d.getCurrentSceneProfile=m,d.showScene=n}(c.SceneManager||(c.SceneManager={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=function(d){function e(e,f,g,h){var i=d.call(this)||this;i._sceneProfile=e,i._data=f,i.interactive=!0,i.interactiveChildren=!0,i._assets=b.AssetManager.get(i._sceneProfile.manifestFilename),i._sounds=i._assets.getSoundManager();var j=new a.Core.Renderer.UI.BoundsFiller(c.Stage.instance.setup.width,c.Stage.instance.setup.height,0,.01);if(j.name="_bounds_",j.x=0,j.y=0,i.addChild(j),!i._sceneProfile.manifestFilename)throw"[Scene] No manifest specified for scene : "+e.class;return i._assets.load(i._sceneProfile.manifestFilename,function(){if(!i._assets.getPIXIAsset(e.layoutId))throw"[Scene] Layout id doesn't exist in assets : "+e.layoutId;i._layout=new c.SceneBuilder(i,i._assets,i._assets.getPIXIAsset(e.layoutId).data),i.emit(a.Core.Events.ON_CREATE),i.onCreate(),g&&g(i)}),i.on(a.Core.Events.ON_DESTROY,i.onDestroy),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,i.onResize,i),i}return __extends(e,d),e.prototype.getLayout=function(){return this._layout},e.prototype.scaleScene=function(b,c,d){void 0===b&&(b=1),void 0===c&&(c=0),void 0===d&&(d=0),this.scale.x=b,this.scale.y=b;var e=this.getBounds();this.x=+((e.width-a.Core.Renderer.Stage.instance.width*b)/2+c),this.y=+((e.height-a.Core.Renderer.Stage.instance.height)/2+d)},e.prototype.scaleSceneTween=function(b,c,d,e,f){void 0===b&&(b=1),void 0===c&&(c=.3),void 0===d&&(d=0),void 0===e&&(e=0),d=d||0,e=e||0;var g=this.getBounds();this.pivot.x=g.width/2,this.pivot.y=g.height/2,this.x=a.Core.Renderer.Stage.instance.width/2+d,this.y=a.Core.Renderer.Stage.instance.height/2+e;var h=this.x+d,i=this.y+e;(new TimelineLite).add([TweenLite.to(this.position,c,{x:h,y:i,ease:Cubic.easeOut}),TweenLite.to(this.scale,c,{x:b,y:b,ease:Cubic.easeOut})]),f&&a.Core.Time.juggler.setTimeout(f,1e3*c)},e.prototype.areAssetsReady=function(){return this._assets.isLoaded()},e.prototype.getAssets=function(){return this._assets},e.prototype.getSceneProfile=function(){return this._sceneProfile},e.prototype.onCreate=function(){},e.prototype.onResize=function(){b.Environment.isMobile()&&this.updateOnOrientationChange()},e.prototype.updateOnOrientationChange=function(){if(this._layout){b.Environment.isFullScreenAvailable()&&b.Environment.goFullScreen();var c;c=b.Environment.isLandscape()?this._layout._layoutData.landscape:this._layout._layoutData.portrait;for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if("stage"===d)a.Core.Renderer.Stage.scaleStage(e.factorX,e.factorY,e.x,e.y);else{var f=this._layout.getComponent(d);f&&(void 0!=e.position&&(f._config.position=e.position),void 0!=e.scale&&(f._config.scale=e.scale),void 0!=e.visible&&(f._config.visible=e.visible),void 0!=e.pivot&&(f._config.pivot=e.pivot),this._layout.changeComponent(f))}}}},e.prototype.onDestroy=function(){this.removeAllListeners(),a.Core.Events.coreEvents.off(a.Core.Events.ON_APP_RESIZE,this.onResize),this._layout.destroy(),this.parent.removeChild(this)},e.prototype.setHTMLBackground=function(a){var b=$("html");b.css("background-image","url('"+a+"')"),b.css("background-size","100% 100%"),b.css("background-repeat","no-repeat"),b.css("background-position","center")},e}(PIXI.Container);c.Scene=d}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(DO){var Core;!function(Core){var Renderer;!function(Renderer){var SceneBuilder=function(){function SceneBuilder(a,b,c){var d=this;this._components={},this.fit=function(a){var b=a._config;if(b.fit){var c=d.getComponent(b.fit);if(c){var e=b.scale||{x:1,y:1};a.scale.set(e.x,e.y);for(var f=a.height;a.width>.8*c.width;)a.scale.x-=.05,a.scale.y-=.05;if(a.position.y=d.getCoords(b.position.y,"y")-.5*(f-a.height),!a.modifiedSetText){var g=d.fit,h=a.setText;a.setText=function(b,c){h(b,c),g(a)}.bind(a),a.modifiedSetText=!0}}}},this._assets=b,this._parentScene=a,this._layoutData=c,this.build(a,c),this.refresh(),Core.Events.coreEvents.on(Core.Events.ON_APP_RESIZE,function(){},this)}return SceneBuilder.prototype.getParentScene=function(){return this._parentScene},SceneBuilder.prototype.getLayoutParams=function(){return this._layoutData.params},SceneBuilder.prototype.getLayoutName=function(){return this._layoutData.name||"Unnamed layout"},SceneBuilder.prototype.getAssets=function(){return this._assets},SceneBuilder.prototype.bringComponentToFront=function(a){var b=this.getComponent(a);this._parentScene.addChild(b)},SceneBuilder.prototype.deleteComponent=function(a){var b=this.getComponent(a);b&&(b.parent.removeChild(b),delete this._components[a])},SceneBuilder.prototype.getComponents=function(){return this._components},SceneBuilder.prototype.getComponent=function(a){return this._components[a]},SceneBuilder.prototype.getComponentPlugin=function(a,b){var c;return this.applyToComponents(function(d){d.name==a.name&&(c=a._plugins[b])}),c},SceneBuilder.prototype.setComponentText=function(a,b){var c=this.getComponent(a);c&&c.setText&&c.setText(b)},SceneBuilder.prototype.applyToComponents=function(a){for(var b in this._components)a(this._components[b])},SceneBuilder.prototype.destroy=function(){var a=this;this.applyToComponents(function(b){b.emit(DO.Core.Events.ON_DESTROY),a.destroyPlugins(b)})},SceneBuilder.prototype.refresh=function(){this.applyToComponents(this.updateComponent.bind(this))},SceneBuilder.prototype.triggerFX=function(a){this.applyToComponents(function(b){var c=b._config;if(c.fx&&c.fx[a]){[].concat(c.fx[a]).forEach(function(a){var c=Core.Utils.getReference(a.split("(")[0]),d=a.match(/\(([^)]+)\)/)[1].split(",");d.unshift(b),c(d[0],d[1],d[2],d[3],d[4],d[5])})}})},SceneBuilder.prototype.destroyPlugins=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.applyToComponents(function(b){b.name==a.name&&(a=b)});var d=a._plugins;if(d)for(var e in d){var f=d[e];f.destroy()}},SceneBuilder.prototype.build=function(container,layoutData){layoutData.bounds||(layoutData.bounds={x:0,y:0,width:container.getBounds().width,height:container.getBounds().height}),layoutData.components.forEach(function(componentData){var assets=this._assets;componentData.construct=componentData.construct||"PIXI.Container()";var component;if(component=0==componentData.construct.indexOf("assets")?eval(componentData.construct):eval("new "+componentData.construct),componentData.components&&this.build(component,componentData),component.name=componentData.id,component._config=componentData,componentData.index?container.addChildAt(component,componentData.index):container.addChild(component),this._components[componentData.id])throw"[SceneBuilder] Duplicate component name in layout: "+componentData.id;this._components[componentData.id]=component,componentData.plugins&&(component._plugins=ComponentPlugin.createPlugins(component,componentData.plugins,this._assets)),component.emit(DO.Core.Events.ON_CREATE,componentData,this);var plugins=component._plugins;if(plugins)for(var pluginId in plugins){var plugin=plugins[pluginId];plugin.init()}}.bind(this))},SceneBuilder.prototype.updateComponent=function(a){this.changeComponent(a,!0)},SceneBuilder.prototype.changeComponent=function(component,isRefresh){void 0===isRefresh&&(isRefresh=!1);var componentData=component._config;if(componentData.position&&this.setPosition(componentData.position,component),componentData.scale&&this.setScale(componentData.scale,component),componentData.pivot=componentData.pivot||"CENTRE",this.setPivot(componentData.pivot,component),componentData.filters){var filterList_1=[];componentData.filters.forEach(function(filterConstuctor){var filter=eval("new "+filterConstuctor);filterList_1.push(filter)}),component.filters=filterList_1}componentData.blend_mode&&(component.blendMode=componentData.blend_mode),null!=componentData.alpha&&(component.alpha=componentData.alpha),isRefresh&&(component.visible=null==componentData.visible||1==componentData.visible),componentData.fit&&this.fit(component)},SceneBuilder.prototype.setInteraction=function(a,b){b.interactive=!0,b.on("touchstart",function(b){a.sound&&this._assets.getSound(a.sound).play(),this._parentScene.emit(DO.Core.Events.ON_INTERACTION,b)}.bind(this))},SceneBuilder.prototype.setPosition=function(a,b){a=a||{x:0,y:0},b.x=this.getCoords(a.x,"x"),b.y=this.getCoords(a.y,"y"),b.x+=this._layoutData.bounds.x||0,b.y+=this._layoutData.bounds.y||0},SceneBuilder.prototype.setPivot=function(a,b){var c=b.getBounds(),d=new PIXI.Point;switch(a){case"CENTRE":d.x=c.width/2,d.y=c.height/2;break;case"TOP_LEFT":d.x=0,d.y=0;break;case"TOP_RIGHT":d.x=c.width,d.y=0;break;case"BOTTOM_RIGHT":d.x=c.width,d.y=c.height;break;case"BOTTOM_LEFT":d.x=0,d.y=c.height;break;case"TOP":d.x=c.width/2,d.y=0;break;case"BOTTOM":d.x=c.width/2,d.y=c.height;break;case"LEFT":d.x=0,d.y=c.height/2;break;case"RIGHT":d.x=c.width,d.y=c.height/2}b.pivot=d},SceneBuilder.prototype.setScale=function(a,b){b.scale=new PIXI.Point(a.x||1,a.y||1)},SceneBuilder.prototype.getCoords=function(a,b){var c;if(isNaN(a)){var d=parseFloat(a.substr(a,a.indexOf("%")));c="x"==b?this._layoutData.bounds.width*(d/100):this._layoutData.bounds.height*(d/100)}else c=a;return c},SceneBuilder}();Renderer.SceneBuilder=SceneBuilder;var ComponentPlugin=function(a){function b(b,c,d){var e=a.call(this)||this;return e._params=c||{},e._parentComponent=b,e._assets=d,e.validate(),e}return __extends(b,a),b.createPlugins=function(a,b,c){var d={};for(var e in b){var f=b[e];if(!f.class)throw"[ComponentPlugin] No 'class' specified for plugin : "+e;var g=Core.Utils.getReference(f.class),h=new g(a,f.params,c);d[e]=h}return d},b.prototype.init=function(){},b.prototype.destroy=function(){},b.prototype.validate=function(){},b}(PIXI.utils.EventEmitter);Renderer.ComponentPlugin=ComponentPlugin}(Renderer=Core.Renderer||(Core.Renderer={}))}(Core=DO.Core||(DO.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(d){var e=a.Core.Events,f=function(a){function b(b,c,d,e,f,g){void 0===b&&(b=0),void 0===c&&(c=.5),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1e4),void 0===g&&(g=1e4);var h=a.call(this)||this;return h.beginFill(b,c),h.drawRect(d,e,f,g),h.interactive=!0,h}return __extends(b,a),b}(PIXI.Graphics);d.OverlayPanel=f;var g=function(a){function b(b,c,d,e,f,g){void 0===b&&(b=0),void 0===c&&(c=.5),void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=1e4),void 0===g&&(g=1e4);var h=a.call(this)||this;return h.beginFill(b,c),h.drawRect(d,e,f,g),h}return __extends(b,a),b}(PIXI.Graphics);d.BackgroundDimmer=g;var h=function(a){function c(c,d,e,f,g,h){void 0===c&&(c=b.Environment.defaultSettings.width),void 0===d&&(d=b.Environment.defaultSettings.height),void 0===e&&(e=0),void 0===f&&(f=.5),void 0===g&&(g=0),void 0===h&&(h=0);var i=a.call(this)||this;return i.beginFill(e,f),i.drawRect(g,h,c,d),i}return __extends(c,a),c}(PIXI.Graphics);d.BoundsFiller=h;var i=function(a){function b(b,c,d,e,f,g,h,i,j,k){void 0===b&&(b=1e4),void 0===c&&(c=1e4),void 0===d&&(d=0),void 0===e&&(e=.5),void 0===f&&(f=0),void 0===g&&(g=0),void 0===h&&(h=0),void 0===i&&(i=c/2-1),void 0===j&&(j=3),void 0===k&&(k=16777215);var l=a.call(this)||this;return l.beginFill(d,e),l.lineStyle(j,k),l.drawRoundedRect(f,g,b,c,i),l.endFill(),l.rotation=h,l}return __extends(b,a),b}(PIXI.Graphics);d.RoundedRectPanel=i;var j=function(a){function c(c,d,e,f,g,h){void 0===f&&(f=!1),void 0===g&&(g=!0),void 0===h&&(h=!1);var i=a.call(this)||this;return i.assets=c,i.videoSprite=new PIXI.Sprite,i.videoSprite.width=b.Environment.defaultSettings.width,i.videoSprite.height=b.Environment.defaultSettings.height,e&&(i.videoSprite.anchor.x=.5,i.videoSprite.anchor.y=.5),i.addChild(i.videoSprite),i}return __extends(c,a),c.prototype.setVideo=function(a){this.video=this.assets.getPIXIAsset(a).data,this.videoSprite.texture=PIXI.Texture.from(this.video),this.video.play()},c.prototype.stopVideo=function(){this.video&&this.videoSprite&&(this.video.pause(),this.video.currentTime=0)},c}(PIXI.Container);d.VideoClipWrapper=j;var k=function(a){function b(b,c,d,e,f){void 0===d&&(d=!1),void 0===e&&(e=!1),void 0===f&&(f=!1);var g=a.call(this)||this;return g.assets=b,g.clipName=c,g.autoPlay=d,g.loop=e,g.clip=b.getMovieClip(g.clipName),g.clip&&(g.autoPlay&&b.playAnimation(g.clip,g.loop),g.addChild(g.clip)),g}return __extends(b,a),b.prototype.setClip=function(){this.clip=this.assets.getMovieClip(this.clipName),this.autoPlay&&this.assets.playAnimation(this.clip,this.loop),this.addChild(this.clip)},b}(PIXI.Container);d.MovieClipWrapper=k;var l=function(a){function b(b,c,d){void 0===d&&(d=!0);var e=a.call(this)||this;return e.texture=b.getPIXITexture(c),e.visible=d,e}return __extends(b,a),b}(PIXI.Sprite);d.Image=l;var m=function(b){function d(a,c,d,f){var g=b.call(this)||this;return g._state=!0,g._spriteOn=new PIXI.Sprite(a.getPIXITexture(c)),g.addChild(g._spriteOn),g._spriteOff=new PIXI.Sprite(a.getPIXITexture(d)),g.addChild(g._spriteOff),g.setState(f),g.interactive=!0,g.buttonMode=!0,g.on(e.getTouchEvent(),g.onPress.bind(g)),g.on(e.getClickEvent(),g.onPress.bind(g)),g}return __extends(d,b),d.prototype.getState=function(){return this._state},d.prototype.onPress=function(){this._state&&!this.name.includes("splash_show_again_toggle")||(this.setState(!this._state),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_TOGGLE_INTERACTION,this))},d.prototype.setState=function(a){this._state=a,this._spriteOn.visible=a,this._spriteOff.visible=!a},d}(PIXI.Container);d.Toggle=m;var n=function(c){function d(d,e,f){void 0===f&&(f=!0);var g=c.call(this,a.Core.Lang.getPhrase(d),e)||this;return g.setText=function(a,b){void 0===b&&(b=!0),g.text=a,g.updateText(),b&&g.anchor.set(.5,.5),g.pivot.x=0},e&&b.Environment.defaultSettings.languagesFontName&&b.Environment.defaultSettings.languagesFontName.indexOf(b.Environment.launchVariables.language)>=0&&b.Environment.gameConfig.fonts.indexOf(e.fontFamily+b.Environment.launchVariables.language)>=0&&(e.fontFamily=e.fontFamily+b.Environment.launchVariables.language,g.style.fontFamily=e.fontFamily),d=a.Core.Lang.getPhrase(d),g.visible=f,g.once("added",function(){return g.setText(d)}),g}return __extends(d,c),d.prototype.show=function(){var a=this;this.alpha=.75,TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0}})},d.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1,a.setText("")}})},d}(PIXI.Text);d.StandardText=n;var o=function(a){function b(b,c,d){var e=a.call(this)||this;return e._inputValue="",e._isFocused=!1,e._isClickedInside=!1,e._isEnabled=!0,e.onKeyDown=function(a){if(e._isEnabled){if("Enter"===a.key)return void e.validateValue();if("Backspace"===a.key)e._inputValue=e._inputValue.slice(0,-1);else if(/^[0-9.,]$/.test(a.key)){if(("."===a.key||","===a.key)&&/[.,]/.test(e._inputValue))return;e._inputValue.length<7&&(e._inputValue+=a.key)}e._text.text=e._inputValue||"|"}},e._onChange=d||function(){},e._background=new PIXI.Graphics,e._background.beginFill(0,0),e._background.drawRoundedRect(0,0,150,50,10),e._background.endFill(),e.addChild(e._background),e._text=new PIXI.Text(b,c),e._text.anchor.set(.5),e._text.position.set(100,25),e.addChild(e._text),e.interactive=!0,e.buttonMode=!0,e._isClickedInside=!1,e.on("pointerdown",e.onFocus.bind(e)),document.addEventListener("pointerdown",e.onDocumentPointerDown.bind(e)),e}return __extends(b,a),b.prototype.onFocus=function(){var a=this;this._isClickedInside=!0,this._isEnabled&&(this._isFocused=!0,this._text.text="|",this._inputValue="",window.removeEventListener("keydown",this.onKeyDown),window.addEventListener("keydown",this.onKeyDown),setTimeout(function(){a._isClickedInside=!1}))},b.prototype.onDocumentPointerDown=function(a){this._isClickedInside||this.onBlur()},b.prototype.onBlur=function(){this._isEnabled&&(this._isFocused=!1,window.removeEventListener("keydown",this.onKeyDown),this.validateValue())},b.prototype.validateValue=function(){var a=parseFloat(this._inputValue.replace(",","."));(isNaN(a)||a<1.11)&&(a=1.11),a>1e4&&(a=1e4),this._inputValue=a%1==0?a+"x":a.toFixed(2)+"x",this._text.text=this._inputValue,this._onChange(this._inputValue)},b.prototype.getValue=function(){return this._inputValue},b.prototype.setEnabled=function(a){this._isEnabled=a,this.interactive=a,this.buttonMode=a,this._background.alpha=a?1:.5,this._text.alpha=a?1:.5},b.prototype.setVisible=function(a){this.visible=a},b.prototype.setDefaultValue=function(a){(isNaN(a)||a<1.11)&&(a=1.11),a>1e4&&(a=1e4),this._inputValue=a%1==0?a+"x":a.toFixed(2)+"x",this._text.text=this._inputValue},b}(PIXI.Container);d.InputFieldDesktop=o;var p=function(a){function b(b,c,d){var e=a.call(this)||this;return e._inputValue="",e._isFocused=!1,e._enabled=!0,e.onBlur=function(){e._isFocused&&(e._isFocused=!1,e._htmlInput.removeEventListener("input",e.onInputChange),e._htmlInput.removeEventListener("focusout",e.onBlur),e.validateValue())},e.onInputChange=function(){e._inputValue=e._htmlInput.value,e._inputValue=e._inputValue.replace(/[^0-9.,]/g,""),(e._inputValue.match(/[.,]/g)||[]).length>1&&(e._inputValue=e._inputValue.slice(0,-1)),e._inputValue.length>7&&(e._inputValue=e._inputValue.slice(0,7)),e._text.text=e._inputValue||"|"},e.onGlobalPointerDown=function(a){e.getBounds().contains(a.clientX,a.clientY)||e.onBlur()},e._onChange=d||function(){},e._background=new PIXI.Graphics,e._background.beginFill(0,0),e._background.drawRoundedRect(0,0,150,50,10),e._background.endFill(),e.addChild(e._background),e._text=new PIXI.Text(b,c),e._text.anchor.set(.5),e._text.position.set(100,25),e.addChild(e._text),e._htmlInput=document.createElement("input"),e._htmlInput.type="text",e._htmlInput.style.position="absolute",e._htmlInput.style.opacity="0",e._htmlInput.style.pointerEvents="none",e._htmlInput.style.zIndex="-1",e._htmlInput.style.textAlign="center",document.body.appendChild(e._htmlInput),e.interactive=!0,e.buttonMode=!0,e.on("pointerdown",e.onFocus.bind(e)),window.addEventListener("pointerdown",e.onGlobalPointerDown),e}return __extends(b,a),b.prototype.onFocus=function(){var a=this;if(this._enabled){this._isFocused=!0,this._text.text="|",this._inputValue="",this._htmlInput.value="";/Android/i.test(navigator.userAgent)?(this._htmlInput.blur(),setTimeout(function(){a._htmlInput.focus()},50)):this._htmlInput.focus(),this._htmlInput.addEventListener("input",this.onInputChange),this._htmlInput.addEventListener("focusout",this.onBlur)}},b.prototype.validateValue=function(){var a=parseFloat(this._inputValue.replace(",","."));(isNaN(a)||a<1.11)&&(a=1.11),a>1e4&&(a=1e4),this._inputValue=this.formatValue(a),this._text.text=this._inputValue,this._onChange(this._inputValue)},b.prototype.formatValue=function(a){return a%1==0?a+"x":a.toFixed(2)+"x"},b.prototype.getValue=function(){return this._inputValue},b.prototype.setEnabled=function(a){this._enabled=a,this.interactive=a,this.buttonMode=a,this._background.alpha=a?1:.5,this._text.alpha=a?1:.5},b.prototype.setVisible=function(a){this.visible=a},b.prototype.setDefaultValue=function(a){(isNaN(a)||a<1.11)&&(a=1.11),a>1e4&&(a=1e4),this._inputValue=this.formatValue(a),this._text.text=this._inputValue},b.prototype.destroy=function(){a.prototype.destroy.call(this),document.body.removeChild(this._htmlInput),window.removeEventListener("pointerdown",this.onGlobalPointerDown)},b}(PIXI.Container);d.InputFieldMobile=p;var q=function(a){function b(b,c){var d=a.call(this)||this;return d._chars=[],d._assets=b,d.once(e.ON_CREATE,function(a){this.setup(a),c&&this.setText(c)}.bind(d)),d}return __extends(b,a),b.prototype.setup=function(a){this._params=a.params;for(var b=0;b<this._params.max_chars;b++){var c=new PIXI.Sprite;c.anchor.x=this._params.doCenter||.5,this._chars.push(c)}},b.prototype.setText=function(a){this.cacheAsBitmap=!1,this.visible=!0;var b=0,c=0,d=0,e=0,f="";this._chars.forEach(function(g){var h=a.substr(b++,1);if(h){if(this._params.mappings[h]){if(g.texture=this._assets.getPIXITexture(this._params.mappings[h]),g.x=c,this._params.breakWords){var i=g.height+(this._params.kerning||0);d+=i}else if(this._params.fixed_width){var j=this._params.fixed_width;"."!=h&&","!=h||(g.x-=25,j=40),c+=j,e+=j}else{var i=g.width+(this._params.kerning||0);c+=i,e+=i}this.addChild(g)}f=h}else this.removeChild(g)}.bind(this)),this.cacheAsBitmap=!0,this.pivot.x=e/2},b.prototype.getParams=function(){return this._params},b.prototype.show=function(){var a=this;TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0}})},b.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1}})},b}(PIXI.Container);d.SpriteText=q;var r=function(b){function c(c,d){var e=this;return c=a.Core.Lang.getPhrase(c),e=b.call(this,c,d)||this,e.once(a.Core.Events.ON_CREATE,function(){this._position=this.position.clone(),this.setText(c)}.bind(e)),e}return __extends(c,b),c.prototype.setText=function(a){this.text=a,this.updateText(),this.x=this._position.x-this.textWidth/2,this.y=this._position.y-this.textHeight/2},c}(PIXI.BitmapText);d.BitmapText=r;var s=function(d){function f(c,f,g,h,i,j,k,l,m,n){void 0===l&&(l=0),void 0===m&&(m=0),void 0===n&&(n=0);var o=d.call(this)||this;if(o._assets=c,o._textureIdUp=f,o._textureIdDown=h,o._textureIdOver=g,o._uses=j||9999999,o._clicked=!1,o._buttonImage=c.getPIXISprite(f),o.addChild(o._buttonImage),o.interactive=!0,o.buttonMode=!0,o.on(e.getTouchEvent(),o.onPress.bind(o)),o.on(e.getOverEvent(),o.onOver.bind(o)),o.on(e.getOutEvent(),o.onOut.bind(o)),o.on(e.getClickEvent(),o.onPress.bind(o)),i){if(b.Environment.defaultSettings.languagesFontName&&b.Environment.defaultSettings.languagesFontName.indexOf(b.Environment.launchVariables.language)>=0&&b.Environment.gameConfig.fonts.indexOf(k.fontFamily+b.Environment.launchVariables.language)>=0&&(k.fontFamily=k.fontFamily+b.Environment.launchVariables.language),"number"!=typeof k.lineHeight){var p="number"==typeof k.fontSize?k.fontSize:20;k.lineHeight=p*n}k.align="center",o._label=new PIXI.Text(b.Lang.getPhrase(i),k),o.addChild(o._label),o._label.anchor.set(.5),o._label.pivot.set(o._label.width/2,o._label.height/2),o._label.position.set(o.width/2+l,o.height/2+m)}else o._label=new PIXI.Text(" ",{align:"center"}),o.addChild(o._label),o._label.anchor.set(.5),o._label.pivot.set(o._label.width/2,o._label.height/2),o._label.position.set(o.width/2,o.height/2),o._label.alpha=0;return o.on(a.Core.Events.ON_DESTROY,function(){this.off(e.getTouchEvent(),this.onPress),this.off(e.getOverEvent(),this.onOver.bind(this)),this.off(e.getOutEvent(),this.onOut.bind(this)),this.off(e.getClickEvent(),this.onPress)}.bind(o)),o}return __extends(f,d),f.prototype.onOver=function(){this._textureIdOver&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdOver))},f.prototype.onOut=function(){this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp)},f.prototype.onPress=function(){if(!this._clicked){this._clicked=!0;var b={x:this.scale.x,y:this.scale.y};this.scale.set(.9*b.x,.9*b.y),this._textureIdDown&&(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdDown)),a.Core.Time.juggler.setTimeout(function(){this.scale.set(b.x,b.y),this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name),this._clicked=!1}.bind(this),150)}},f.prototype.getLabel=function(){return this._label},f.prototype.show=function(){var a=this;TweenLite.to(this,.1,{alpha:1,onComplete:function(){a.visible=!0,a.interactive=!0}})},f.prototype.hide=function(){var a=this;TweenLite.to(this,.1,{alpha:0,onComplete:function(){a.visible=!1,a.interactive=!1}})},f.prototype.fadeOut=function(){this.alpha=.5},f.prototype.fadeIn=function(){this.alpha=1},f.prototype.disable=function(){this.visible&&(this.alpha=.5),this.interactive=!1},f.prototype.updateButtonState=function(a){a?(this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),this.alpha=1):(this._buttonImage.texture=this._textureIdDown?this._assets.getPIXITexture(this._textureIdDown):this._buttonImage.texture,this._textureIdDown||(this.alpha=.5)),this.interactive=a},f.prototype.enable=function(){this.visible&&(this.alpha=1,this.interactive=!0)},f.prototype.setLabel=function(a){this._label.text=a},f.prototype.changeButtonTexture=function(a,b){this._textureIdUp=this._textureIdUp.slice(0,this._textureIdUp.lastIndexOf("_")+1)+a,this._textureIdOver=this._textureIdOver.slice(0,this._textureIdOver.lastIndexOf("_")+1)+a,this._textureIdDown=this._textureIdDown.slice(0,this._textureIdDown.lastIndexOf("_")+1)+a,this._buttonImage.texture=this._assets.getPIXITexture(this._textureIdUp),this._label.text=b},f.prototype.clone=function(){var a=new f(this._assets,this._textureIdUp,this._textureIdOver,this._textureIdDown,this._label.text,1,this._label.style);return a.position.set(this.position.x,this.position.y),a},f}(PIXI.Container);d.SpriteButton=s;var t=function(d){function f(c,f,g,h,i,j,k,l){var m=d.call(this)||this;return m._assets=c,m._clipName=f,m._clipWinName=g,m._clipLossName=h,m._buttonNormal=c.getMovieClip(f),c.playAnimation(m._buttonNormal,!0),m.addChild(m._buttonNormal),m.textPosition=l,m.interactive=!0,m.buttonMode=!0,k&&(m.hitArea=new PIXI.Rectangle(m.x+k.x,m.y+k.y,k.w,k.h)),m.on(e.getTouchEvent(),m.onPress.bind(m)),m.on(e.getOverEvent(),m.onOver.bind(m)),m.on(e.getOutEvent(),m.onOut.bind(m)),m.on(e.getClickEvent(),m.onPress.bind(m)),j.align="center",b.Environment.defaultSettings.languagesFontName&&b.Environment.defaultSettings.languagesFontName.indexOf(b.Environment.launchVariables.language)>=0&&b.Environment.gameConfig.fonts.indexOf(j.fontFamily+b.Environment.launchVariables.language)>=0&&(j.fontFamily=j.fontFamily+b.Environment.launchVariables.language),m._labelStyle=j,m.on(a.Core.Events.ON_DESTROY,function(){m.off(e.getTouchEvent(),m.onPress),m.off(e.getOverEvent(),m.onOver.bind(m)),m.off(e.getOutEvent(),m.onOut.bind(m)),m.off(e.getClickEvent(),m.onPress),m.removeChildren()}),m._scaleX=m.scale.x,m._scaleY=m.scale.y,m}return __extends(f,d),f.prototype.onOver=function(){this.interactive&&(this.scale.x=this._scaleX+.03,this.scale.y=this._scaleY+.03)},f.prototype.onOut=function(){this.interactive&&(this.scale.x=this._scaleX,this.scale.y=this._scaleY)},f.prototype.onPress=function(){this.interactive=!1,this.scale.x=this._scaleX,this.scale.y=this._scaleY,c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name)},f.prototype.onShowPrize=function(a,b,c){var d=this;void 0===b&&(b=!0);var e=b?this._clipWinName:this._clipLossName;this.interactive=!1;var f=this._assets.getMovieClip(e);this.addChild(f),c?this._assets.playAnimation(f,!1,function(){d._prizeLabel=new PIXI.Text(a,d._labelStyle),d.addChild(d._prizeLabel),d._prizeLabel.anchor.x=.5,d._prizeLabel.anchor.y=.5,d._prizeLabel.pivot.x=d._prizeLabel.width/2,d._prizeLabel.pivot.y=d._prizeLabel.height/2,d.textPosition?(d._prizeLabel.x=d.textPosition.x,d._prizeLabel.y=d.textPosition.y):(d._prizeLabel.x=d.width/2,d._prizeLabel.y=d.height/2),c()}):(this._prizeLabel=new PIXI.Text(a,this._labelStyle),this.addChild(this._prizeLabel),this._prizeLabel.anchor.x=.5,this._prizeLabel.anchor.y=.5,this._prizeLabel.pivot.x=this._prizeLabel.width/2,this._prizeLabel.pivot.y=this._prizeLabel.height/2,this.textPosition?(this._prizeLabel.x=this.textPosition.x,this._prizeLabel.y=this.textPosition.y):(this._prizeLabel.x=this.width/2,this._prizeLabel.y=this.height/2),this._assets.playAnimation(f,!1,void 0,!1)),this.removeChild(this._buttonNormal)},f.prototype.onShowDisablePrize=function(a){this.interactive=!1;var b=this._assets.getMovieClip(this._clipLossName);this.addChild(b),this._assets.playAnimation(b,!1,void 0,!1),this.removeChild(this._buttonNormal)},f.prototype.getPrizeLabel=function(){return this._prizeLabel},f}(PIXI.Container);d.BonusPick=t;var u=function(b){function d(c,d,f,g,h,i){var j=b.call(this)||this;return j._assets=c,j._clipName=d,j._clipWinName=f,j._clipLossName=g,j._buttonNormal=c.getMovieClip(d),j._assets.playAnimation(j._buttonNormal,!0),j.addChild(j._buttonNormal),i&&c.getMovieClip(i)&&(j._buttonOver=c.getMovieClip(i),j._assets.playAnimation(j._buttonOver,!0),j._buttonOver.visible=!1,j.addChild(j._buttonOver)),j.interactive=!0,j.buttonMode=!0,h&&(j.hitArea=new PIXI.Rectangle(j.x+h.x,j.y+h.y,h.w,h.h)),j.on(e.getTouchEvent(),j.onPress.bind(j)),j.on(e.getOverEvent(),j.onOver.bind(j)),j.on(e.getOutEvent(),j.onOut.bind(j)),j.on(e.getClickEvent(),j.onPress.bind(j)),j.on(a.Core.Events.ON_DESTROY,function(){j.off(e.getTouchEvent(),j.onPress.bind(j)),j.off(e.getOverEvent(),j.onOver.bind(j)),j.off(e.getOutEvent(),j.onOut.bind(j)),j.off(e.getClickEvent(),j.onPress.bind(j)),j.removeChildren()}),j._scaleX=j.scale.x,j._scaleY=j.scale.y,j}return __extends(d,b),d.prototype.onOver=function(){this.interactive&&(this._buttonOver?(this._buttonOver.visible=!0,this._buttonNormal.visible=!1):(this.scale.x=this._scaleX+.05,this.scale.y=this._scaleY+.05))},d.prototype.onOut=function(){this.interactive&&(this._buttonOver&&(this._buttonOver.visible=!1,this._buttonNormal.visible=!0),this.scale.x=this._scaleX,this.scale.y=this._scaleY)},d.prototype.onPress=function(){this._buttonOver&&(this._buttonOver.visible=!1,this._buttonNormal.visible=!0),this.interactive=!1,this.scale.x=this._scaleX,this.scale.y=this._scaleY,c.SceneManager.getCurrentScene().emit(a.Core.Events.ON_INTERACTION,this,this.name)},d.prototype.onShowPrize=function(a,b){void 0===a&&(a=!0);var c=a?this._clipWinName:this._clipLossName;this.interactive=!1;var d=this._assets.getMovieClip(c);this.addChild(d),this._assets.playAnimation(d,!1,b,void 0==b),this.removeChild(this._buttonNormal)},d.prototype.onShowDisablePrize=function(){this.interactive=!1;var a=this._assets.getMovieClip(this._clipLossName);this.addChild(a),this._assets.playAnimation(a,!1,void 0,!1),this.removeChild(this._buttonNormal)},d}(PIXI.Container);d.BonusOption=u;var v=function(a){function c(c,d,e){var f=a.call(this)||this;f._assets=c,f._textureName=d;var g=new PIXI.Graphics;return g.beginFill(0,.01),g.drawRect(0,0,b.Environment.defaultSettings.width,90),f.addChild(g),f._symbol=new PIXI.Sprite(c.getPIXITexture(d+":BL")),f._symbol.anchor.x=.5,f._symbol.anchor.y=0,f._symbol.visible=!1,f.addChild(f._symbol),e&&b.Environment.defaultSettings.languagesFontName&&b.Environment.defaultSettings.languagesFontName.indexOf(b.Environment.launchVariables.language)>=0&&b.Environment.gameConfig.fonts.indexOf(e.fontFamily+b.Environment.launchVariables.language)>=0&&(e.fontFamily=e.fontFamily+b.Environment.launchVariables.language),f._msg=new PIXI.Text(" ",e),f._msg.anchor.x=.5,f._msg.anchor.y=.5,f._msg.pivot.x=f._msg.width/2,f._msg.pivot.y=f._msg.height/2,f._msg.x=f.width/2,f._msg.y=f.height/2,f.addChild(f._msg),f.visible=!1,f}return __extends(c,a),c.prototype.showMessagePanel=function(a){this._msg.text="",this._msg.text=a,
this._msg.anchor.x=.5,this.alpha=1,this.visible=!0,this._symbol.visible=!1},c.prototype.showWinMessagePanel=function(a,b){this.showMessagePanel(b),this._symbol.texture=this._assets.getPIXITexture(this._textureName+":"+a),this._symbol.visible=!0,this._msg.anchor.x=.43,this._symbol.x=this._msg.x-this._msg.width/1.8},c.prototype.hideMessagePanel=function(){this._symbol.visible=!1,TweenLite.to(this,.5,{alpha:0})},c}(PIXI.Container);d.PlayerMessagePanel=v}(c.UI||(c.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){!function(b){!function(b){function c(b,c,d,e){c=Number(c)||0,d=Number(d)||.25,e=Number(e||5);var f=b.scale.x,g=b.scale.y;b.visible=!1,b.scale.x=.7*f,b.scale.y=.7*g,a.Core.Time.juggler.setTimeout(function(){b.visible=!0,TweenLite.to(b.scale,d,{x:f,y:g,ease:Back.easeOut.config(e)})},c)}function d(b,c,d,e){c=Number(c)||0,d=Number(d)||.4,e=Number(e)||1.3;var f=b.scale.x,g=b.scale.y;b.scale.x=e,b.scale.y=e,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b.scale,d,{x:f,y:g,ease:Cubic.easeOut})},c)}function e(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=0,b.visible=!0,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:1})},c)}function f(b,c,d){c=Number(c)||0,d=Number(d)||.5,b.alpha=1,a.Core.Time.juggler.setTimeout(function(){TweenLite.to(b,d,{alpha:0,onComplete:function(){b.visible=!1}})},c)}b.popOut=c,b.slam=d,b.fadeIn=e,b.fadeOut=f}(b.FX||(b.FX={}))}(b.UI||(b.UI={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){!function(c){var d=function(){function b(a){this.speed=100,this.totalLength=0,this._waypoints=[],this.id=a}return b.prototype.addWaypoint=function(a){var b={x:a.x,y:a.y};this._waypoints.push(b),this.calcPathLength(),b.distance=this.totalLength},b.prototype.getPosition=function(b){for(var c,d=a.Core.Maths.normalize(b/1e3*this.speed,this.totalLength),e=this._waypoints.length-2;e>=0;e--){var f=this._waypoints[e];if(d>f.distance){var g=this._waypoints[e+1],h=g.distance-f.distance,i=d-f.distance,j=i/h;c=new PIXI.Point(a.Core.Maths.lerp(f.x,g.x,j),a.Core.Maths.lerp(f.y,g.y,j));break}}return c},b.prototype.calcPathLength=function(){this.totalLength=0;for(var b=this._waypoints[0],c=0;c<this._waypoints.length;c++)this.totalLength+=a.Core.Maths.calcDistance(b,this._waypoints[c]),b=this._waypoints[c]},b}();c.ParticlePath=d;var e=function(){function c(a){this.emitDuration=-1,this.emitRate=2,this.lifetime={min:1e3,max:3e3},this.scale={min:1,max:1},this.rotation={min:0,max:360},this.gravity={x:0,y:8},this.speed={min:20,max:40},this.spin={min:0,max:0},this.shrinkFactor=0,this.drag=0,this.acceleration=0,this.direction={min:0,max:360},this.maxParticles=10,this.turbulence={min:0,max:0},this.blendMode=PIXI.BLEND_MODES.NORMAL,this.doRandomTextures=!1,this._textures=[],this._clips=[],this._paths={},a=a||{},this.emitDuration=a.emitDuration||1e3,this.emitRate=a.emitRate||1,this.lifetime=a.lifetime||{min:1e3,max:1e3},this.scale=a.scale||{min:1,max:1},this.rotation=a.rotation||{min:0,max:0},this.gravity=a.gravity||{x:0,y:0},this.speed=a.speed||{min:10,max:10},this.spin=a.spin||{min:0,max:0},this.shrinkFactor=a.shrinkFactor||0,this.drag=a.drag||0,this.direction=a.direction||{min:0,max:360},this.maxParticles=a.maxParticles||10,this.turbulence=a.turbulence||{min:0,max:0},this.blendMode=a.blendMode||PIXI.BLEND_MODES.NORMAL,this.autoStart=a.autoStart||!1,this.textures=a.textures,this.movieclips=a.movieclips,this.paths=a.paths,this.doRandomTextures=a.random_textures,this.touchCallback=a.touch_callback,this.acceleration=a.acceleration||0}return c.prototype.createPath=function(a){var b=new d(a);return this._paths[a]=b,b},c.prototype.setPath=function(a){this._currentPath=this._paths[a]},c.prototype.clearCurrentPath=function(){this._currentPath=null},c.prototype.getNextPosition=function(a){return this._currentPath?this._currentPath.getPosition(a):new PIXI.Point(0,0)},c.prototype.getNextTexture=function(){return this.doRandomTextures?this._textures[b.Maths.getRandomRange(0,this._textures.length-1,!0)]:(this._textures.unshift(this._textures.pop()),this._textures[0])},c.prototype.getNextMovieClip=function(){return this._clips.unshift(this._clips.pop()),this._clips[0]},c.prototype.addTexture=function(a){this._textures.push(a)},c.prototype.addMovieClip=function(b,c){for(var d=0;d<this.maxParticles;d++){var e=b.getMovieClip(c,!0,null,!0);this._clips.push(e)}this._clips=a.Core.Utils.shuffleArray(this._clips)},c}();c.ParticleSetup=e;var f=function(b){function c(a,c){var d=b.call(this)||this;return d.isActive=!1,d._dir={x:0,y:0},d._g={x:0,y:0},d._spin=0,d._shrink=0,d._container=a,d._juggler=c,d}return __extends(c,b),c.prototype.onUpdate=function(a){var b=.001*a;this.x+=this._speed*this._dir.x*b,this.y+=this._speed*this._dir.y*b,this._speed+=this._acceleration*b,this._speed-=this._drag*b,this._g.x+=this._gravity.x*b,this._g.y+=this._gravity.y*b,this.x+=this._g.x*b,this.y+=this._g.y*b,this.rotation+=this._spin*b,this._life-=a,this._life<=0&&this.kill(),this.scale.x-=this._shrink*b,this.scale.y-=this._shrink*b,this.scale.x<.01&&this.kill(),this.x+=Math.sin(this.rotation)*this._turbulence*b,this.y-=Math.cos(this.rotation)*this._turbulence*b},c.prototype.start=function(b,c){this._onDead=b,this.isActive=!0,this._container.addChild(this),this._juggler.add(this),this.blendMode=c.blendMode,this._clip&&(this.removeChild(this._clip),this._clip=null);var d=c.getNextTexture();this._clip=c.getNextMovieClip(),d?this.texture=d:(this.addChild(this._clip),this._clip.play()),this.anchor.x=.5,this.anchor.y=.5;var e=a.Core.Maths.getRandomRange;this._shrink=c.shrinkFactor;var f=e(c.scale.min,c.scale.max);this.scale.x=f,this.scale.y=f,this._spin=e(c.spin.min,c.spin.max),this._life=e(c.lifetime.min,c.lifetime.max),this._direction=e(c.direction.min,c.direction.max),this._rotation=e(c.rotation.min,c.rotation.max),this._speed=e(c.speed.min,c.speed.max),this._shrink=c.shrinkFactor,this._drag=c.drag,this._gravity=c.gravity,this._dir={x:a.Core.Maths.Dsin(this._direction),y:-a.Core.Maths.Dcos(this._direction)},this._g={x:0,y:0},this._turbulence=e(c.turbulence.min,c.turbulence.max),this._acceleration=c.acceleration},c.prototype.kill=function(){this.isActive=!1,this._container.removeChild(this),this._juggler.remove(this),this._onDead(this)},c}(PIXI.Sprite);c.Particle=f;var g=function(b){function c(){var c=b.call(this)||this;return c.isActive=!1,c._particles=[],c._activeCount=0,c.interactive=!1,c.interactiveChildren=!1,c.once(a.Core.Events.ON_DESTROY,function(){this.stop()}.bind(c)),c.once(a.Core.Events.ON_CREATE,function(a,b){if(a&&a.params){var c=new e(a.params);if(c.movieclips&&c.movieclips.forEach(function(a){c.addMovieClip(b.getAssets(),a)}.bind(this)),c.textures&&c.textures.forEach(function(a){var d=b.getAssets().getPIXITexture(a);c.addTexture(d)}.bind(this)),c.paths){for(var d in c.paths)!function(a){var b=c.createPath(a),d=c.paths[a];b.speed=d.speed||10,d.waypoints.forEach(function(a){b.addWaypoint(new PIXI.Point(a.x,a.y))}),c.setPath(a)}(d)}this.init(c)}}.bind(c)),c}return __extends(c,b),c.prototype.init=function(b,c){this._setup=b,this._juggler=c||a.Core.Time.juggler;for(var d=0;d<this._setup.maxParticles;d++){var e=new f(this,this._juggler);this._particles.push(e)}this._setup.autoStart&&this.start()},c.prototype.setInteraction=function(a){this._touchCallback=a,a?(this.interactive=!0,this.interactiveChildren=!0,this._particles.forEach(function(a){a.interactive=!0,a.on("mousedown",this._touchCallback)}.bind(this))):(this.interactive=!1,this.interactiveChildren=!1,this._particles.forEach(function(a){a.interactive=!1,a.off("mousedown",this._touchCallback)}.bind(this)))},c.prototype.start=function(){this.isActive||(this.isActive=!0,this._activeCount=0,this._time=0,this._juggler.add(this),this._emissionStopDelay=this._juggler.setTimeout(function(){this.stop()}.bind(this),this._setup.emitDuration),this._emissionDelay=this._juggler.setInterval(this.emitParticles.bind(this),1e3/this._setup.emitRate))},c.prototype.stop=function(){this.isActive&&(this._juggler.remove(this),this._emissionDelay.stop(),this._emissionStopDelay.stop(),this.isActive=!1)},c.prototype.onUpdate=function(a){this._time+=a},c.prototype.emitParticles=function(){var a=this.getParticle();a&&(a.position=this._setup.getNextPosition(this._time)||a.position,this._activeCount++,a.start(this.onParticleDied.bind(this),this._setup))},c.prototype.getParticle=function(){for(var a=null,b=0;b<this._particles.length;b++)if(!this._particles[b].isActive){a=this._particles[b];break}return a},c.prototype.onParticleDied=function(a){0==--this._activeCount&&this.stop()},c}(PIXI.Container);c.Particles=g}(c.FX||(c.FX={}))}(b.Renderer||(b.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){void 0===b&&(b=!0),void 0===c&&(c=10),void 0===d&&(d=20),void 0===e&&(e=20),void 0===f&&(f=30),void 0===g&&(g=0),void 0===h&&(h=1),void 0===i&&(i=3),void 0===j&&(j=5),void 0===k&&(k=.08),void 0===l&&(l=.12),this.data={},this.isActive=!1,this.target=a,this.isActive=b,this.data.minX=c,this.data.maxX=d,this.data.minY=e,this.data.maxY=f,this.data.minDelay=g,this.data.maxDelay=h,this.data.minTime=i,this.data.maxTime=j,this.data.minAngle=k,this.data.maxAngle=l,this.isActive&&this.start()}return a.prototype.start=function(){this.moveX(1),this.moveY(-1),this.rotate(1)},a.prototype.updateState=function(a){this.isActive=a,this.isActive||(this.tweenForX&&(this.tweenForX.kill(),this.tweenForX=null),this.tweenForY&&(this.tweenForY.kill(),this.tweenForY=null),this.tweenForA&&(this.tweenForA.kill(),this.tweenForA=null))},a.prototype.rotate=function(a){var b=this;this.tweenForA=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{rotation:this.random(this.data.minAngle,this.data.maxAngle,a),delay:this.random(this.data.minDelay,this.data.maxDelay),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.rotate(-1*a)}})},a.prototype.moveX=function(a){var b=this;this.tweenForX=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{x:this.target.x+this.random(this.data.minX,this.data.maxX,a),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.moveX(-1*a)}})},a.prototype.moveY=function(a){var b=this;this.tweenForY=TweenLite.to(this.target,parseFloat(this.random(this.data.minTime,this.data.maxTime).toString()),{y:this.target.y+this.random(this.data.minY,this.data.maxY,a),ease:Sine.easeInOut,onComplete:function(){b.isActive&&b.moveY(-1*a)}})},a.prototype.random=function(a,b,c){return void 0===c&&(c=1),(a+(b-a)*Math.random())*c},a}();a.Floating=b}(a.FX||(a.FX={}))}(a.Renderer||(a.Renderer={}))}(a.Core||(a.Core={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){a.ALL_ASSETS_LOADED="all_assets_loaded",a.HANDLE_ALERT_RESPONSE="handle_alert_response",a.HANDLE_INIT_RESPONSE="handle_init_response",a.HANDLE_RESULT_RESPONSE="handle_result_response",a.HANDLE_START_RESPONSE="handle_start_response",a.HANDLE_HISTORY_RESPONSE="handle_history_response",a.REQUEST_RESULTS="request_results",a.CONFIGURE_BET_DETAILS="configure_bet_details",a.SEND_START_REQUEST="send_start_request",a.SEND_PlAY_REQUEST="send_play_request",a.SEND_CONTINUE_REQUEST="send_continue_request",a.SEND_CLOSE_REPLAY_REQUEST="send_close_replay_request",a.RECEIVE_SERVER_RESPONSE="receive_server_response",a.SEND_HISTORY_REQUEST="send_history_request",a.SEND_ROUND_HISTORY_REQUEST="send_round_history_request",a.SEND_ROUND_END="send_round_end_request",a.SEND_ROUND_START="send_round_start_request",a.SEND_UPDATE_BALANCE="send_update_balance_request",a.SEND_DEPOSIT_REQUEST="send_deposit_request",a.SEND_RELOAD_REQUEST="send_reload_request",a.SEND_LOBBY_REQUEST="send_lobby_request",a.SEND_LOAD_COMPLETED="send_load_completed",a.SEND_UPDATE_STAKE="send_update_response",a.SEND_GAME_IS_READY="send_game_is_ready_response",a.SEND_GAME_ERROR="send_game_error_response",a.SEND_GAMBLE_BUTTON_REQUEST="send_red_request",a.GAME_FEATURE_STARTED="game_feature_started",a.GAME_FEATURE_ENDED="game_feature_ended",a.FREE_SPINS_AWARDED="free_spins_awarded",a.FREE_ROUND_STARTED="free_round_started",a.FREE_ROUND_ENDED="free_round_ended",a.BASE="BASE",a.FREE_SPINS="FREE_SPINS",a.FREE_SPIN_SELECTION="FREE_SPIN_SELECTION",a.RE_SPIN="RE_SPIN",a.CASCADE="CASCADE",a.BONUS="BONUS",a.HOLD_FREE_SPINS="HOLD_FREE_SPINS",a.JACKPOT_HOLD_FREE_SPINS="JACKPOT_HOLD_FREE_SPINS",a.MULTI_LEVEL_BONUS="MULTI_LEVEL_BONUS",a.SEND_START_COMMON_DRAW_REQUEST="send_start_common_draw_request",a.SEND_ENTER_COMMON_DRAW_REQUEST="send_enter_common_draw_request",a.SEND_CASHOUT_COMMON_DRAW_REQUEST="send_cashout_common_draw_request",a.SEND_WINNER_COMMON_DRAW_REQUEST="send_winner_common_draw_request",a.SEND_HISTORY_COMMON_DRAW_REQUEST="send_history_common_draw_request",a.RECEIVE_COMMON_DRAW_ENTERED="receive_common_draw_entered",a.RECEIVE_COMMON_DRAW_CASHOUT="receive_common_draw_cashout",a.RECEIVE_COMMON_DRAW_HISTORY="receive_common_draw_history",a.RECEIVE_COMMON_DRAW_WINNER="receive_common_draw_winner",a.RECEIVE_COMMON_DRAW_CLOSE="receive_common_draw_close",a.GAMBLE="GAMBLE",a.SPLASH="SPLASH",a.isPaytableVisible=!1,a.isbetSelect=!1,a.isGamble=!1,a.isGambleExit=!1,a.isAutoplay=!1,a.isIdleMode=!1,a.freeRoundActive=!1,a.isReelSpinning=!1,a.isBetClickOnce=!0,a.stopContinueCallRespin=!1}(a.Server||(a.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __awaiter=this&&this.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){a.done?e(a.value):new c(function(b){b(a.value)}).then(g,h)}i((d=d.apply(a,b||[])).next())})},__generator=this&&this.__generator||function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(e)throw new TypeError("Generator is already executing.");for(;i;)try{if(e=1,f&&(g=f[2&c[0]?"return":c[0]?"throw":"next"])&&!(g=g.call(f,c[1])).done)return g;switch(f=0,g&&(c=[0,g.value]),c[0]){case 0:case 1:g=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,f=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(g=i.trys,!(g=g.length>0&&g[g.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!g||c[1]>g[0]&&c[1]<g[3])){i.label=c[1];break}if(6===c[0]&&i.label<g[1]){i.label=g[1],g=c;break}if(g&&i.label<g[2]){i.label=g[2],i.ops.push(c);break}g[2]&&i.ops.pop(),i.trys.pop();continue}c=b.call(a,i)}catch(a){c=[6,a],f=0}finally{e=g=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e,f,g,h,i={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return h={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(h[Symbol.iterator]=function(){return this}),h},DO;!function(a){!function(b){!function(c){function d(a,b){new(g.getReference(a.class))(a,b)}var e=a.Core.Time,f=a.Core.Environment,g=a.Core.Utils,h=function(){function d(a,b,c,d){this._connection=a,this._juggler=e.juggler,this.addEventsHandler(),this._rgsConnector=c,this._rgsConnector.createConnection(b),this._responseResult=d}return d.prototype.addEventsHandler=function(){var d=this;f.launchVariables.isReplay&&(this._connection.isSocket=!1),this._connection.isSocket&&(b.ApplicationBase.instance.on(c.SEND_START_COMMON_DRAW_REQUEST,function(a){d._rgsConnector.sendStartCommonDrawRequest(a)}),b.ApplicationBase.instance.on(c.SEND_ENTER_COMMON_DRAW_REQUEST,function(a){d._rgsConnector.sendEnterCommonDrawRequest(a)}),b.ApplicationBase.instance.on(c.SEND_CASHOUT_COMMON_DRAW_REQUEST,function(a){d._rgsConnector.sendCashoutCommonDrawRequest(a)}),b.ApplicationBase.instance.on(c.SEND_WINNER_COMMON_DRAW_REQUEST,function(a){d._rgsConnector.sendWinnerCommonDrawRequest(a)}),b.ApplicationBase.instance.on(c.SEND_HISTORY_COMMON_DRAW_REQUEST,function(a){d._rgsConnector.sendHistoryCommonDrawRequest(a)})),b.ApplicationBase.instance.on(c.SEND_START_REQUEST,function(a){d._rgsConnector.sendStartRequest(a)}),b.ApplicationBase.instance.on(c.SEND_PlAY_REQUEST,function(a){d._rgsConnector.sendPlayRequest(a)}),b.ApplicationBase.instance.on(c.SEND_CONTINUE_REQUEST,function(a){d._rgsConnector.sendContinueRequest(a)}),f.launchVariables.isReplay?b.ApplicationBase.instance.on(c.SEND_CLOSE_REPLAY_REQUEST,function(b){a.Core.Time.juggler.setTimeout(function(){window.close()},3e3)}):(b.ApplicationBase.instance.on(c.SEND_ROUND_END,function(a){d._rgsConnector.sendRounEndRequest(a)}),b.ApplicationBase.instance.on(c.SEND_GAMBLE_BUTTON_REQUEST,function(a){d._rgsConnector.sendGambleRequest(a)}),b.ApplicationBase.instance.on(c.SEND_HISTORY_REQUEST,function(a){d._rgsConnector.sendHistoryRequest(a)}),b.ApplicationBase.instance.on(c.SEND_ROUND_HISTORY_REQUEST,function(a){d._rgsConnector.sendRoundHistoryRequest(a)}),b.ApplicationBase.instance.on(c.SEND_LOBBY_REQUEST,function(){d._rgsConnector.sendLobbyRequest()}),b.ApplicationBase.instance.on(c.SEND_RELOAD_REQUEST,function(){d._rgsConnector.sendReloadGameRequest()}),b.ApplicationBase.instance.on(c.SEND_DEPOSIT_REQUEST,function(){d._rgsConnector.sendDepositRequest()}),b.ApplicationBase.instance.on(b.GameEvents.ON_LOAD_PROGRESS,function(a){d._rgsConnector.sendLoadProgressRequest((100*a).toFixed(2))}),b.ApplicationBase.instance.on(c.SEND_UPDATE_STAKE,function(a){d._rgsConnector.sendUpdateStakeRequest(a)}),b.ApplicationBase.instance.on(c.SEND_GAME_IS_READY,function(){d._rgsConnector.sendGameIsReadyRequest()}),b.ApplicationBase.instance.on(c.SEND_GAME_ERROR,function(){d._rgsConnector.sendGameErrorRequest()}),b.ApplicationBase.instance.on(c.SEND_ROUND_START,function(){d._rgsConnector.sendRoundStartRequest()}),b.ApplicationBase.instance.on(c.SEND_LOAD_COMPLETED,function(){d._rgsConnector.sendLoadCompletedRequest()}),b.ApplicationBase.instance.on(c.SEND_UPDATE_BALANCE,function(a){d._rgsConnector.sendBalanceUpdateRequest(a)}),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_START,function(){d._rgsConnector.sendSpinAnimationUpdateRequest(!0)}),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,function(){d._rgsConnector.sendSpinAnimationUpdateRequest(!1)}),b.ApplicationBase.instance.on(a.Slots.ControlPanel.EVENT_AUTO_SPINS_START,function(){d._rgsConnector.sendAutoPlayStartRequest()}),b.ApplicationBase.instance.on(a.Slots.ControlPanel.EVENT_AUTO_SPINS_END,function(){d._rgsConnector.sendAutoPlayStopRequest()}),b.ApplicationBase.instance.on(c.GAME_FEATURE_STARTED,function(){d._rgsConnector.sendGameFeatureStartRequest()}),b.ApplicationBase.instance.on(c.GAME_FEATURE_ENDED,function(){d._rgsConnector.sendGameFeatureEndRequest()}),b.ApplicationBase.instance.on(a.Core.Events.ON_APP_RESIZE,function(){f.isMobile()&&d._rgsConnector.sendOrientationUpdatedRequest()}),b.ApplicationBase.instance.on(c.FREE_SPINS_AWARDED,function(){d._rgsConnector.sendFreeSpinsAwardedRequest()}),b.ApplicationBase.instance.on(a.Slots.ControlPanel.UPDATE_WIN_AMOUNT,function(a,b,c){d._rgsConnector.sendUpdateWinRequest(a,b,c)}),b.ApplicationBase.instance.on(a.Core.SoundManager.EVENT_SET_MUTE,function(a){d._rgsConnector.sendSoundUpdateRequest(a)}),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,function(a){d._rgsConnector.sendTurboUpdateRequest(a)}),b.ApplicationBase.instance.on(b.PlayerMonitoring.EVENT_ALARM_BROKEN_MSG,function(){d._rgsConnector.sendBrokenResumeRequest()}),b.ApplicationBase.instance.on(c.FREE_ROUND_STARTED,function(a){d._rgsConnector.sendFreeRoundsStartRequest(a)}),b.ApplicationBase.instance.on(c.FREE_ROUND_STARTED,function(a){d._rgsConnector.sendFreeRoundsStartRequest(a)}),b.ApplicationBase.instance.on(c.FREE_ROUND_ENDED,function(a){d._rgsConnector.sendFreeRoundsEndRequest(a)})),b.ApplicationBase.instance.on(c.RECEIVE_SERVER_RESPONSE,function(e){"endRound"===e.action?(d._responseResult.updateEndRoundData(e),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_ROUND_END_RECEIVED)):(e.gameState||(e.gameState={requestType:c.BASE,nextRequestType:c.BASE}),"start"===e.action?(d._responseResult.updateData(e),d._responseResult.setGameConfig(),b.ApplicationBase.instance.emit(c.HANDLE_START_RESPONSE)):(d._responseResult.updateData(e),m.current.getAction()!==c.FREE_SPIN_SELECTION&&b.ApplicationBase.instance.emit(c.HANDLE_RESULT_RESPONSE)))})},d}();c.ServerConnection=h;var i=function(){function a(){this.isSocketConnection=!1}return a.prototype.connectWebSocket=function(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return b=this,[4,j.openViaURL(f.launchVariables.webSocketUrl)];case 1:return b.webSocketClientHandler=c.sent(),this.isSocketConnection=a,this.isSocketConnection&&this.webSocketClientHandler.enableDefaultProcessing(),[2,this.webSocketClientHandler]}})})},a.prototype.doPing=function(){return __awaiter(this,void 0,void 0,function(){var a,b,c;return __generator(this,function(d){switch(d.label){case 0:a=(new Date).getTime(),b={cmd:"systemping",source:"systemping-test",data:{localTimeInMS:a}},d.label=1;case 1:return d.trys.push([1,3,,5]),[4,this.webSocketClientHandler.sendAndWaitForResponse(b)];case 2:return d.sent(),[3,5];case 3:return c=d.sent(),console.warn("error in websocket communication, we wait for a reconnect",{error:c}),[4,new Promise(function(a){return setTimeout(a,5e3)})];case 4:return d.sent(),[3,5];case 5:return[4,new Promise(function(a){return setTimeout(a,5e3)})];case 6:d.sent(),d.label=7;case 7:return[3,0];case 8:return[2]}})})},a.prototype.setCustomCallBack=function(a){this.webSocketClientHandler.setCustomCallBack(a)},a.prototype.sendRequest=function(a,b){return __awaiter(this,void 0,void 0,function(){var c,d,e;return __generator(this,function(f){switch(f.label){case 0:return c={cmd:"game",source:"testgame",data:{method:"POST",body:b,headers:{Accept:"application/json","Content-Type":"application/json"}}},[4,this.webSocketClientHandler.sendAndWaitForResponse(c)];case 1:return d=f.sent(),e=d.reply,e.action=a,[2,e]}})})},a.prototype.sendRequestMessage=function(a){this.webSocketClientHandler.sendRequestMessage(a)},a}();c.WebSocketConnector=i;var j=function(){function a(a,b,c){this._replyRequestIdMap=new Map,this._webSocket=a,this._timeout=b,this._webSocketURL=c}return a.openWebSocket=function(){return __awaiter(this,void 0,void 0,function(){var b,c;return __generator(this,function(d){switch(d.label){case 0:return b=new WebSocket(f.launchVariables.webSocketUrl),[4,a.waitForWebSocketConnection(b)];case 1:return c=d.sent(),c?[4,new Promise(function(a){return setTimeout(a,100)})]:[3,3];case 2:return d.sent(),[2,b];case 3:throw new Error("cannot connect to "+f.launchVariables.webSocketUrl)}})})},a.openViaURL=function(a,b){return void 0===b&&(b=1e4),__awaiter(this,void 0,void 0,function(){var c;return __generator(this,function(d){switch(d.label){case 0:return[4,this.openWebSocket()];case 1:return c=d.sent(),[2,new this(c,b,a)]}})})},a.prototype.sendAndWaitForResponse=function(a,b){return void 0===b&&(b=null),__awaiter(this,void 0,void 0,function(){var c,d,e=this;return __generator(this,function(f){return c=(new Date).getTime().toString()+"-"+Math.floor(1e3*Math.random()),a.data.requestId||(a.data.requestId=c),d=new Promise(function(d,f){var g=setTimeout(function(){console.warn("timeout on ws send and wait",{requestId:a.data.requestId,dataToSend:a,timeout:e._timeout}),e._replyRequestIdMap.delete(a.data.requestId),f("timeout")},e._timeout);e._replyRequestIdMap.set("debug-timeout"===a.data.requestId?c:a.data.requestId,{requestedData:a,callback:function(c,h){return __awaiter(e,void 0,void 0,function(){var e,i,j;return __generator(this,function(k){switch(k.label){case 0:g&&clearTimeout(g),k.label=1;case 1:return k.trys.push([1,6,,7]),e=null,b?[4,b(c,h)]:[3,3];case 2:return e=k.sent(),[3,5];case 3:return[4,this.defaultCallBack(c,h)];case 4:e=k.sent(),k.label=5;case 5:return(null===h||void 0===h?void 0:h.requestId)&&this._replyRequestIdMap.delete(null===h||void 0===h?void 0:h.requestId),i=200!=e.status||e.headers&&e.headers["x-response-status"]&&"ok"!==e.headers["x-response-status"],i?(console.log("Response error: "+JSON.stringify(e)),f({code:e.headers["x-h-error-id"],error:e.headers["x-h-error-id"],message:e.headers["x-h-error-msg"]})):d(e),[3,7];case 6:return j=k.sent(),console.warn("error in ws send and wait",{dataToSend:a,requestId:a.data.requestId,error:j}),f(j),[3,7];case 7:return[2]}})})}})}).catch(function(b){return new Promise(function(c,d){console.warn("low level error in sending data to ws",{dataToSend:a,error:b,mapSize:e._replyRequestIdMap.size}),d(b)})}),this._webSocket.send(JSON.stringify(a)),[2,d]})})},a.prototype.sendRequestMessage=function(a){this._webSocket&&this._webSocket.send(a)},a.prototype.getCallBackData=function(a){return this._replyRequestIdMap.get(a)},a.prototype.enableDefaultProcessing=function(){var b=this;this._webSocket.onclose=function(c){return __awaiter(b,void 0,void 0,function(){var b,d;return __generator(this,function(e){switch(e.label){case 0:if(1e3==c.code)return[3,6];console.warn("unexpected closing of websocket",{code:c.code,type:c.type,url:this._webSocketURL}),this._webSocket.close(),delete this._webSocket,e.label=1;case 1:return e.trys.push([1,3,,5]),b=this,[4,a.openWebSocket()];case 2:return b._webSocket=e.sent(),console.warn("we reconnected",{code:c.code,type:c.type,url:this._webSocketURL,webSocket:this._webSocket}),this.enableDefaultProcessing(),[3,6];case 3:return d=e.sent(),console.error("error while reconnecting, waiting a second to retry",{url:this._webSocketURL,error:d}),[4,new Promise(function(a){return setTimeout(a,1e3)})];case 4:return e.sent(),[3,5];case 5:return[3,1];case 6:return[2]}})})},this._webSocket.onmessage=function(a){return __awaiter(b,void 0,void 0,function(){var b,c,d,e;return __generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),b=a.data,c=void 0,(null===b||void 0===b?void 0:b.text)?[4,b.text()]:[3,2];case 1:return c=f.sent(),[3,3];case 2:(null===b||void 0===b?void 0:b.toString)&&(c=b.toString()),f.label=3;case 3:return d=JSON.parse(c),this.processCallBack(d),[3,5];case 4:throw e=f.sent(),console.error("cannot process a websocket response",{rawDataReceivedFromWS:a.data,webSocketDataType:typeof a.data,error:e}),e;case 5:return[2]}})})}},a.prototype.setCustomCallBack=function(a){this._customCallBack=a},a.prototype.defaultCallBack=function(a,b){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(a){return[2,b]})})},a.prototype.processCallBack=function(a){return __awaiter(this,void 0,void 0,function(){var b;return __generator(this,function(c){switch(c.label){case 0:return b=this.getCallBackData(null===a||void 0===a?void 0:a.requestId),b?(null===b||void 0===b?void 0:b.callback)?[4,b.callback(b.requestedData,a)]:[3,2]:[3,5];case 1:return c.sent(),[3,4];case 2:return[4,this.defaultCallBack(b.requestedData,a)];case 3:c.sent(),c.label=4;case 4:return[3,8];case 5:return this._customCallBack?[4,this._customCallBack(a)]:[3,7];case 6:return c.sent(),[2];case 7:console.warn("unsolicited ws data received",{dataReceived:a}),c.label=8;case 8:return[2]}})})},a.waitForWebSocketConnection=function(a,b){return void 0===b&&(b=1e4),__awaiter(this,void 0,void 0,function(){var c,d,e,f;return __generator(this,function(g){switch(g.label){case 0:return c=function(){return a.readyState===WebSocket.OPEN},a.readyState===WebSocket.CONNECTING?[3,1]:[2,c()];case 1:d=100,e=b/d,f=0,g.label=2;case 2:return a.readyState===WebSocket.CONNECTING&&f<e?[4,new Promise(function(a){return setTimeout(a,d)})]:[3,4];case 3:return g.sent(),f++,[3,2];case 4:return[2,c()]}})})},a}();c.ClientWebSocketHandler=j;var k=function(){function d(d){var e=this;this.forceValues=null,this.loginResponse=null,this.replayResponse=[],this.gameRoundRecords=[],this.replayHistoryIndex=0,this.isOpeningReplay=!1,this.sendRequest=function(b,d,f){return void 0===f&&(f="POST"),__awaiter(e,void 0,void 0,function(){var e,e,g=this;return __generator(this,function(h){switch(h.label){case 0:return"endRound"===b&&m.current.getAction()===c.BASE&&m.current.getGameRoundWin()<=0?(a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_ROUND_END_RECEIVED),[2]):[3,1];case 1:return this._connection.isSocket?[4,this.webSocketConnector.sendRequest(b,d).catch(function(a){"timeout"==a&&"start"===b?(g._connection.isSocket=!1,g.sendRequest(b,d,f)):"play"!==b&&"continue"!==b&&"start"!==b||g.showAlertMessage(a)})]:[3,3];case 2:return e=h.sent(),this.forceValues=null,e&&this.receivedResponse(e),[3,5];case 3:return[4,this.postApiCall(a.Core.Environment.launchVariables.serverUrl,d).catch(function(a){g.showAlertMessage(a)})];case 4:e=h.sent(),this.forceValues=null,e&&(e.action=b,this.receivedResponse(e)),h.label=5;case 5:return[2]}})})},this.sendStartRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return f.launchVariables.isReplay?this.sendRequest(this.getServerURL("roundHistory"),{op:"getGameRoundHistoryInfo",token:f.launchVariables.sessionId,gameRound:f.launchVariables.gameRound}):this.sendRequest(this.getServerURL("start"),{op:"loadConfig",token:f.launchVariables.sessionId}),[2]})})},this.sendPlayRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(d){return a.isBroken||f.launchVariables.isReplay?(b.ApplicationBase.instance.emit(c.HANDLE_RESULT_RESPONSE),m.current.setBrokenGameState(!1)):(a.pickId&&(this.forceValues=(this.forceValues?this.forceValues:"")+a.pickId),this.sendRequest(this.getServerURL("play"),{op:"placeBet",token:f.launchVariables.sessionId,stake:Math.floor(100*a.bet*m.current.getGameConfig().getFixedBet()),featureToBuy:a.featureToBuy||null,useTicket:c.freeRoundActive,featureType:a.freeRoundId||null,additionalData:this.forceValues})),[2]})})},this.sendContinueRequest=function(b){return __awaiter(e,void 0,void 0,function(){var d=this;return __generator(this,function(e){return f.launchVariables.isReplay?a.Core.Time.juggler.setTimeout(function(){d.replayHistoryIndex++,d.updatePlayReplayResponse("continue")},500):(b.pickId&&(this.forceValues=(this.forceValues?this.forceValues:"")+b.pickId),this.sendRequest(this.getServerURL("continue"),{op:"placeBet",token:f.launchVariables.sessionId,stake:Math.floor(100*b.bet*m.current.getGameConfig().getFixedBet()),useTicket:c.freeRoundActive,additionalData:this.forceValues})),[2]})})},this.sendRounEndRequest=function(a){return void 0===a&&(a={}),__awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("endRound"),{op:"collect",token:f.launchVariables.sessionId}),b.ApplicationBase.instance.hoelleConnector.OI.roundEnded(m.current.getBalance(),m.current.getTotalBet(),m.current.getGameRoundWin()),[2]})})},this.sendBrokenResumeRequest=function(a){return void 0===a&&(a={}),__awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.resume(),[2]})})},this.sendGambleRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("gamble"),{op:"cardGamble",token:f.launchVariables.sessionId,roundId:a.roundId,gambleAmount:a.amount,type:a.type}),[2]})})},this.sendHistoryRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("history"),{op:"getGameHistory",token:f.launchVariables.sessionId}),[2]})})},this.sendRoundHistoryRequest=function(a){return __awaiter(e,void 0,void 0,function(){var b,c,d,e=this
;return __generator(this,function(g){return this.isOpeningReplay?[2]:(this.isOpeningReplay=!0,this.gameRoundRecords&&this.gameRoundRecords.length>0&&this.gameRoundRecords.length>a.id&&(b=this.gameRoundRecords[a.id],c=window.location.href.split("?")[0],c+="?token="+f.launchVariables.sessionId+"&gameRound="+b.id+"&isSocial="+f.launchVariables.isSocial+"&language="+f.launchVariables.language+"&currency="+f.launchVariables.currency+"&gameCode="+f.launchVariables.gameCode+"&serverUrl="+f.launchVariables.serverUrl+"&displayCurrency="+f.launchVariables.displayCurrency+"&operatorCode="+f.launchVariables.operatorCode+"&isReplay=true",d=window.open(c,"_blank"),d.focus()),setTimeout(function(){e.isOpeningReplay=!1},500),[2])})})},this.sendStartCommonDrawRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("startCommonDraw"),{op:"cd/start",token:f.launchVariables.sessionId}),[2]})})},this.sendEnterCommonDrawRequest=function(a){return void 0===a&&(a={}),__awaiter(e,void 0,void 0,function(){return __generator(this,function(b){return m.current.getCommonDrawHash()?this.sendRequest(this.getServerURL("enterCommonDraw"),{op:"cd/enter",token:f.launchVariables.sessionId,stake:Math.floor(100*a.bet),commonRoundHash:m.current.getCommonDrawHash(),betData:a.betData}):this.sendStartCommonDrawRequest({}),[2]})})},this.sendCloseCommonDrawRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("closeCommonDraw"),{op:"cd/close",token:f.launchVariables.sessionId,commonRoundHash:a.commonRoundHash}),[2]})})},this.sendCashoutCommonDrawRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("cashoutCommonDraw"),{op:"cd/cashout",token:f.launchVariables.sessionId,commonRoundHash:m.current.getCommonDrawHash(),betData:a.betData}),[2]})})},this.sendWinnerCommonDrawRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(b){return this.sendRequest(this.getServerURL("winnerCommonDraw"),{op:"cd/winner",token:f.launchVariables.sessionId,commonRoundHash:a.commonRoundHash,maxRecords:a.maxRecords||-1}),[2]})})},this.sendHistoryCommonDrawRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return this.sendRequest(this.getServerURL("historyCommonDraw"),{op:"cd/history",token:f.launchVariables.sessionId}),[2]})})},this.sendLobbyRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.quit(),[2]})})},this.sendReloadGameRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.quit(),[2]})})},this.sendDepositRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.cashier(),[2]})})},this.sendLoadProgressRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return b.ApplicationBase.instance.hoelleConnector.OI.loadProgress(a),[2]})})},this.sendLoadCompletedRequest=function(){return __awaiter(e,void 0,void 0,function(){var a,c;return __generator(this,function(d){return b.ApplicationBase.instance.hoelleConnector.OI.loadComplete(),this.webSocketConnector&&(a=new Date,c=a-this.loadingStartTime,this.webSocketConnector.sendRequestMessage(JSON.stringify({cmd:"metric",data:{metric:"game.loadingTimeInMS",value:c,type:"timing"}}))),[2]})})},this.sendGameIsReadyRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.gameDataLoaded(),b.ApplicationBase.instance.hoelleConnector.OI.initialGameState(!1),b.ApplicationBase.instance.hoelleConnector.OI.gameReady(),[2]})})},this.sendGameErrorRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return[2]})})},this.sendRoundStartRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.roundStarted(m.current.getBalance(),m.current.getTotalBet()),[2]})})},this.sendUpdateStakeRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return b.ApplicationBase.instance.hoelleConnector.OI.stakeUpdated(a),[2]})})},this.sendUpdateWinRequest=function(a,c,d){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return b.ApplicationBase.instance.hoelleConnector.OI.cashWin&&b.ApplicationBase.instance.hoelleConnector.OI.cashWin(a,c,d),[2]})})},this.sendSoundUpdateRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return a?b.ApplicationBase.instance.hoelleConnector.OI.muted():b.ApplicationBase.instance.hoelleConnector.OI.unmuted(),[2]})})},this.sendTurboUpdateRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return a?b.ApplicationBase.instance.hoelleConnector.OI.turboEnabled():b.ApplicationBase.instance.hoelleConnector.OI.turboDisabled(),[2]})})},this.sendAutoPlayStartRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.autoPlayStarted(),[2]})})},this.sendAutoPlayStopRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.autoPlayFinished(),[2]})})},this.sendGameFeatureStartRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.featuredStarted(),[2]})})},this.sendGameFeatureEndRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.featuredFinished(),[2]})})},this.sendOrientationUpdatedRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.orientationUpdated(),[2]})})},this.sendFreeSpinsAwardedRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.freeSpinsAwarded(),[2]})})},this.sendFreeRoundsStartRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.freeplaysAwarded&&b.ApplicationBase.instance.hoelleConnector.OI.freeplaysAwarded(m.current.getFreeRoundsAwarded(),m.current.getFreeRoundsBet()),b.ApplicationBase.instance.hoelleConnector.OI.getPromoInfo(),[2]})})},this.sendFreeRoundsEndRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return b.ApplicationBase.instance.hoelleConnector.OI.freeplaysSummary&&b.ApplicationBase.instance.hoelleConnector.OI.freeplaysSummary(m.current.getFreeRoundsAwarded()-m.current.getFreeRoundsLeft(),m.current.getFreeRoundsBet(),m.current.getFreeRoundsWin()),[2]})})},this.sendBalanceUpdateRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return b.ApplicationBase.instance.hoelleConnector.OI.balanceUpdated(a),[2]})})},this.sendShowHelpRequest=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(a){return[2]})})},this.sendSpinAnimationUpdateRequest=function(a){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(c){return a?b.ApplicationBase.instance.hoelleConnector.OI.spinAnimationStarted():b.ApplicationBase.instance.hoelleConnector.OI.spinAnimationStopped(),[2]})})},this._connection=d,this.loadingStartTime=new Date,b.ApplicationBase.instance.on(b.GameEvents.SET_FORCE_VALUES,function(a){e.forceValues=a}),b.ApplicationBase.instance.hoelleConnector.OI.on("enableTurboRequested",function(){$("#quick_spin").show()}),b.ApplicationBase.instance.hoelleConnector.OI.on("disableTurboRequested",function(){$("#quick_spin").hide(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,!1)}),b.ApplicationBase.instance.hoelleConnector.OI.on("increaseStakeRequested",function(){}),b.ApplicationBase.instance.hoelleConnector.OI.on("decreaseStakeRequested",function(){}),b.ApplicationBase.instance.hoelleConnector.OI.on("showAutoplayDialog",function(){b.ApplicationBase.instance.emit(a.Slots.ControlPanel.SHOW_AUTO_PLAY_DIALOG)}),b.ApplicationBase.instance.hoelleConnector.OI.on("handleFreeRoundsUpdate",function(){}),b.ApplicationBase.instance.hoelleConnector.OI.on("stopAutoplayRequested",function(){b.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_AUTO_SPIN_STOP)}),b.ApplicationBase.instance.hoelleConnector.OI.on("muteRequested",function(){a.Core.Events.coreEvents.emit(a.Core.SoundManager.EVENT_SET_MUTE,!0,!0)}),b.ApplicationBase.instance.hoelleConnector.OI.on("unmuteRequested",function(){a.Core.Events.coreEvents.emit(a.Core.SoundManager.EVENT_SET_MUTE,!1,!0)}),b.ApplicationBase.instance.hoelleConnector.OI.on("spinRequested",function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.RESPIN)}),b.ApplicationBase.instance.hoelleConnector.OI.on("spinStopRequested",function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_INTERRUPT_SPIN)}),b.ApplicationBase.instance.hoelleConnector.OI.on("reloadRequested",function(){a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_RELOAD_REQUEST)})}return d.prototype.createConnection=function(b){return __awaiter(this,void 0,void 0,function(){var c,d=this;return __generator(this,function(e){switch(e.label){case 0:return f.launchVariables.isReplay?(this.updateLoginReplayResponse(),b(),[3,5]):[3,1];case 1:return[4,this.postApiCall(f.launchVariables.loginUrl+"?token="+f.launchVariables.token,void 0,"GET").catch(function(a){d.showAlertMessage(a)})];case 2:return!(c=e.sent())||c.error?[3,4]:(this.updateLoginResponse(c),this.webSocketConnector=new i,[4,this.webSocketConnector.connectWebSocket(this._connection.isSocket)]);case 3:return e.sent(),this._connection.isSocket&&(setTimeout(function(){d.webSocketConnector.doPing()},500),this.webSocketConnector.setCustomCallBack(function(b){return __awaiter(d,void 0,void 0,function(){return __generator(this,function(c){return"commondrawcreated"==b.topic?(m.current.getCommonDrawHash()||(m.current.getCommonDrawData().commonRoundHash=b.payload.hash),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_COMMON_DRAW_CREATED,b.payload)):"commondrawnewuser"==b.topic||("START_GAMEROUND_RECEIVED"==b.topic||"commondrawstarted"==b.topic?a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_COMMON_DRAW_STARTED,b.payload):"GAME_IN_PROGRESS"==b.topic||"roundinfo"==b.topic?("roundinfo"==b.topic&&!m.current.getCommonDrawHash()&&b.payload.rounds&&"open"==b.payload.rounds[0].status&&(m.current.getCommonDrawData().commonRoundHash=b.payload.rounds[0].hash),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_GAME_IN_PROGRESS,b.payload)):"GAME_FINISHED"==b.topic||"playerfinished"==b.topic||"commondrawresult"==b.topic?(m.current.getCommonDrawData()&&m.current.getCommonDrawHash()&&(b.payload.isCashout="playerfinished"==b.topic,"commondrawresult"==b.topic&&(this.sendCloseCommonDrawRequest({commonRoundHash:m.current.getCommonDrawHash()}),m.current.setCommonDrawData({}))),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_GAME_FINISHED,b.payload)):("paid"==b.topic&&(m.current.getCommonDrawData().commonRoundHash=b.payload.hash),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_GAME_OTHER_STATE,b))),[2]})})})),b(),[3,5];case 4:this.showAlertMessage(c),e.label=5;case 5:return[2]}})})},d.prototype.postApiCall=function(a,b,c){return void 0===c&&(c="POST"),__awaiter(this,void 0,void 0,function(){var d,e,f,g,h,i;return __generator(this,function(j){switch(j.label){case 0:return j.trys.push([0,2,,3]),[4,fetch(a,{method:c,body:b?JSON.stringify(b):void 0,headers:{Accept:"application/json","Content-Type":"application/json",Connection:"keep-alive"}})];case 1:return d=j.sent(),[3,3];case 2:return f=j.sent(),e=f,[3,3];case 3:if(e)return"AbortError"===e.name||"TypeError"===e.name?[2,Promise.reject("NETWORKERROR")]:[2,Promise.reject(e)];j.label=4;case 4:return j.trys.push([4,6,,7]),[4,d.json()];case 5:return g=j.sent(),[3,7];case 6:return h=j.sent(),[2,Promise.reject("error_payload_not_json")];case 7:return i=200!=d.status||!d.ok||null!==d.headers.get("X-Response-Status")&&"ok"!==d.headers.get("X-Response-Status"),i?[2,Promise.reject({code:d.headers.get("x-h-error-id"),error:d.headers.get("x-h-error-id"),message:d.headers.get("x-h-error-msg")})]:[2,Promise.resolve(g)]}})})},d.prototype.getServerURL=function(a){return void 0===a&&(a=void 0),a},d.prototype.receivedResponse=function(a){a.error&&""!==a.error?this.showAlertMessage(a):"endRound"===a.action?this.updateRoundEndResponse(a):"start"===a.action?this.updateStartResponse(a):"play"===a.action||"continue"===a.action?this.updatePlayResponse(a):"history"===a.action?(this.gameRoundRecords=a.gameRoundList,b.ApplicationBase.instance.emit(c.HANDLE_HISTORY_RESPONSE,a)):"roundHistory"===a.action?this.handleReplayResponse(a):a.action.indexOf("CommonDraw")>=0?this.updateResponseForCommonDraw(a):this.updateResponseForOtherState(a)},d.prototype.updateResponseForCommonDraw=function(b){if("startCommonDraw"===b.action)m.current.setCommonDrawData({commonRoundHash:b.commonRoundHash}),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.EVENT_COMMON_DRAW_CREATED,b);else if("enterCommonDraw"===b.action)a.Common.ApplicationBase.instance.emit(c.RECEIVE_COMMON_DRAW_ENTERED,b);else if("closeCommonDraw"===b.action){var d=void 0;b.balance&&void 0!=b.balance.totalBalance?d=b.balance.totalBalance:b.tokenData&&void 0!=b.tokenData.balance&&(d=b.tokenData.balance),d&&m.current.updateCommonRoundEndData({balance:d}),a.Common.ApplicationBase.instance.emit(c.RECEIVE_COMMON_DRAW_CLOSE,b)}else"cashoutCommonDraw"===b.action?(b.balance&&void 0!=b.balance.totalBalance&&m.current.updateCommonRoundEndData({balance:b.balance.totalBalance}),b.isCashout=!0,a.Common.ApplicationBase.instance.emit(c.RECEIVE_COMMON_DRAW_CASHOUT,b)):"historyCommonDraw"===b.action?a.Common.ApplicationBase.instance.emit(c.RECEIVE_COMMON_DRAW_HISTORY,b):"winnerCommonDraw"===b.action&&a.Common.ApplicationBase.instance.emit(c.RECEIVE_COMMON_DRAW_WINNER,b)},d.prototype.updateResponseForOtherState=function(a){},d.prototype.updateLoginReplayResponse=function(){f.launchVariables.localeId=a.Common.Currency.getLocaleCode(f.launchVariables.language,a.Core.Environment.launchVariables.currency),a.Core.Environment.launchVariables.homeUrl=void 0,a.Core.Environment.launchVariables.homeEnabled=!1,a.Core.Environment.launchVariables.gameId=a.Core.Environment.launchVariables.gameCode,a.Core.Environment.launchVariables.sessionId=a.Core.Environment.launchVariables.token,a.Core.Environment.launchVariables.hasCheatTool=!1,a.Core.Environment.launchVariables.mode="1"},d.prototype.updateLoginResponse=function(c){this.loginResponse=c,this.loginResponse&&(a.Core.Environment.launchVariables.isSocial=this.loginResponse.gameSettings.isSocial,a.Core.Environment.launchVariables.isSocial?a.Core.Environment.launchVariables.language="sc":(a.Core.Environment.launchVariables.language=this.loginResponse.tokenData.language.toLowerCase(),f.defaultSettings.languages.indexOf(f.launchVariables.language)<0&&(f.defaultSettings.languages.indexOf(f.launchVariables.language.split("_")[0])>=0?f.launchVariables.language=f.launchVariables.language.split("_")[0]:f.launchVariables.language="en")),a.Core.Environment.launchVariables.currency=this.loginResponse.tokenData.currency,a.Core.Environment.launchVariables.currency.includes("_")&&(a.Core.Environment.launchVariables.currency=a.Core.Environment.launchVariables.currency.replace("_",""),this.loginResponse.tokenData.currency=a.Core.Environment.launchVariables.currency),f.launchVariables.localeId=a.Common.Currency.getLocaleCode(f.launchVariables.language,a.Core.Environment.launchVariables.currency),a.Core.Environment.launchVariables.homeUrl=this.loginResponse.gameSettings.homeURL,void 0!=this.loginResponse.gameSettings.preventRedirect?a.Core.Environment.launchVariables.preventRedirect=this.loginResponse.gameSettings.preventRedirect:a.Core.Environment.launchVariables.preventRedirect=!1,a.Core.Environment.launchVariables.redirectTarget=this.loginResponse.gameSettings.redirectTarget,void 0!=this.loginResponse.gameSettings.homeEnabled?a.Core.Environment.launchVariables.homeEnabled=this.loginResponse.gameSettings.homeEnabled:a.Core.Environment.launchVariables.homeEnabled=!0,a.Core.Environment.launchVariables.gameId=this.loginResponse.tokenData.gameId,a.Core.Environment.launchVariables.gameCode=this.loginResponse.tokenData.gameId,a.Core.Environment.launchVariables.serverUrl=decodeURIComponent(this.loginResponse.backendUrl),a.Core.Environment.launchVariables.webSocketUrl="",this.loginResponse.webSocketUrl&&(a.Core.Environment.launchVariables.webSocketUrl=decodeURIComponent(this.loginResponse.webSocketUrl)),a.Core.Environment.launchVariables.currencyMultiplier=this.loginResponse.tokenData.currencyMultiplier,a.Core.Environment.launchVariables.playerId=this.loginResponse.tokenData.playerId,a.Core.Environment.launchVariables.sessionId=this.loginResponse.token,a.Core.Environment.launchVariables.platformId=this.loginResponse.tokenData.operatorId,a.Core.Environment.launchVariables.operatorCode=this.loginResponse.tokenData.operatorId,a.Core.Environment.launchVariables.brandCode=this.loginResponse.tokenData.operatorId,a.Core.Environment.launchVariables.historyURL=this.loginResponse.gameSettings.historyURL,a.Core.Environment.launchVariables.displayCurrency=this.loginResponse.gameSettings.displayCurrency||!0,a.Core.Environment.launchVariables.displayHistory="DEMO"!=this.loginResponse.tokenData.mode,a.Core.Environment.launchVariables.gameMode=this.loginResponse.tokenData.mode,a.Core.Environment.launchVariables.displayHistory&&void 0!=this.loginResponse.gameSettings.replay&&null!=this.loginResponse.gameSettings.replay&&(a.Core.Environment.launchVariables.displayHistory=this.loginResponse.gameSettings.replay),f.launchVariables.isReplay?(a.Core.Environment.launchVariables.hasCheatTool=!1,a.Core.Environment.launchVariables.displayHistory=!1,a.Core.Environment.launchVariables.mode="1",a.Core.Environment.launchVariables.gameMode="REPLAY"):(!this.loginResponse.backendUrl||!this.loginResponse.backendUrl.includes("staging")||"DEMO"!=this.loginResponse.tokenData.mode&&"internal_testoperator"!=a.Core.Environment.launchVariables.platformId||"0"!=a.Core.Environment.launchVariables.mode&&void 0!=a.Core.Environment.launchVariables.mode?(a.Core.Environment.launchVariables.hasCheatTool=!1,a.Core.Environment.launchVariables.mode="1"):(a.Core.Environment.launchVariables.hasCheatTool=!0,a.Core.Environment.launchVariables.mode="0",window.location&&window.location.ancestorOrigins&&0!=window.location.ancestorOrigins.length&&(a.Core.Environment.launchVariables.hasCheatTool=!1)),b.ApplicationBase.instance.hoelleConnector.OI.log=!0,b.ApplicationBase.instance.hoelleConnector.OI.setup(this.loginResponse.operatorProtocol,this.loginResponse.tokenData.gameId,this.loginResponse.tokenData.currency,this.loginResponse.tokenData.language,this.loginResponse.tokenData.playerId,this.loginResponse.tokenData.mode,this.loginResponse.gameSettings.homeURL,12===this.loginResponse.operatorProtocol&&"mobile"===this.loginResponse.tokenData.device,b.ApplicationBase.instance.hoelleConnector.RLX.configure,b.ApplicationBase.instance.hoelleConnector.RLX.on,b.ApplicationBase.instance.hoelleConnector.RLX.send)))},d.prototype.updateStartResponse=function(a){a.gameRoundInfo&&"open"===a.gameRoundInfo.status&&(a.lastRoundInfo?(a.lastRoundInfo.gameState.sort(function(a,b){if(null!=a&&null!=b)return new Date(a.processedOn)>new Date(b.processedOn)?1:-1}),a.gameState=a.lastRoundInfo.gameState[a.lastRoundInfo.gameState.length-1].result.info.result):this._connection.isSocket&&a.gameRoundInfo.commonRoundHash&&a.gameRoundInfo.commonRoundHash!=m.current.getCommonDrawHash()&&this.sendCloseCommonDrawRequest({gameRound:a.gameRoundInfo.hash,commonRoundHash:a.gameRoundInfo.commonRoundHash}));var d=a.tokenData.currency;d.includes("_")&&(d=d.replace("_","")),this.loginResponse.gameConfig=a.config;var e=void 0;a.tokenData&&(e=a.tokenData.totalWin-a.tokenData.totalBet);var g={action:a.action,balance:this.loginResponse.balance.totalBalance,gameConfig:{rtp:a.config.rtpVersion,buyBonusRTP:a.config.buyBonusRtp,maxWin:a.config.maxWin?a.config.maxWin:"",displayRTP:a.config.displayRTP,maxWinProbability:a.config.maxWinProbability?a.config.maxWinProbability:"",jurisdiction:a.config.jurisdiction?a.config.jurisdiction:"",betLevels:a.config.stakes,defaultBetIndex:a.config.defaultStakeIndex,minSpinTime:a.config.minSpinTime,autoValues:void 0,defaultAutoValue:void 0,allowedQuickSpin:a.config.turboEnabled,buyoutAllowed:a.config.packageBuyEnabled,slamStopAllowed:a.config.stopEnabled,showAutoplay:a.config.autoplayEnabled,isRealityCheck:a.config.rcEnabled,isRealityCheckTime:a.config.rcInterval,sessionTimeoutInSeconds:a.config.sessionTimeoutInSeconds,maxExposure:a.config.maxExposure,minStake:a.config.minStake,maxStake:a.config.maxStake,displayClock:a.config.displayClock,autoplayLossLimitRequired:a.config.autoplayLossLimitRequired},currency:d,currencyMultiplier:a.tokenData.currencyMultiplier,isRoundFinished:void 0==a.gameState,gameState:a.gameState,progressData:a.progressData,profitPosition:e,freeRounds:this.loginResponse.freePlayInfo&&this.loginResponse.freePlaysAvailable&&this.loginResponse.freePlaysAvailable.length>0?{betValue:this.loginResponse.freePlaysAvailable[0].stake/f.defaultSettings.fixedBet,totalNumberOfFreeRounds:this.loginResponse.freePlayInfo.granted,numberOfFreeRounds:this.loginResponse.freePlayInfo.granted-this.loginResponse.freePlayInfo.used,totalWin:this.loginResponse.freePlayInfo.won,active:!this.loginResponse.freePlayInfo.isLast&&this.loginResponse.freePlayInfo.used>0}:void 0};b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,g)},d.prototype.handleReplayResponse=function(a){var d=this;if(a&&a.gameRoundInfo){a.gameState.sort(function(a,b){if(null!=a&&null!=b)return new Date(a.processedOn)>new Date(b.processedOn)?1:-1}),this.replayResponse=[],a.gameState.forEach(function(a){a.result.info.result&&d.replayResponse.push(a.result.info.result)}),this.replayHistoryIndex=0,a.gameState=this.replayResponse[this.replayHistoryIndex];var e={action:"start",balance:0,gameConfig:{betLevels:[a.gameRoundInfo.baseStake],defaultBetIndex:0,minSpinTime:void 0,autoValues:void 0,defaultAutoValue:void 0,allowedQuickSpin:!1,buyoutAllowed:!1,slamStopAllowed:!1,showAutoplay:!1,isRealityCheck:!1,displayClock:!1,autoplayLossLimitRequired:!1},currency:f.launchVariables.currency,isRoundFinished:!1,gameState:a.gameState,progressData:a.progressData,freeRounds:void 0};b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,e)}else this.showAlertMessage({code:"generic"})},d.prototype.updateRoundEndResponse=function(a){var d=void 0;a.tokenData&&(d=a.tokenData.totalWin-a.tokenData.totalBet);var e;a.balance?e=a.balance.totalBalance:a.token&&(e=a.token.totalBalance);var g={action:a.action,balance:e,profitPosition:d,freeRounds:a.freePlayInfo?{betValue:a.gameRoundInfo.stake/f.defaultSettings.fixedBet,totalNumberOfFreeRounds:a.freePlayInfo.granted,numberOfFreeRounds:a.freePlayInfo.granted-a.freePlayInfo.used,totalWin:a.freePlayInfo.won,active:!a.freePlayInfo.isLast&&a.freePlayInfo.used>0}:void 0};b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,g)},d.prototype.updatePlayResponse=function(a){a.gameState.sort(function(a,b){if(null!=a&&null!=b)return new Date(a.processedOn)>new Date(b.processedOn)?1:-1});var d=a.gameState[a.gameState.length-1].result.info.result,e=void 0;a.tokenData&&(e=a.tokenData.totalWin-a.tokenData.totalBet);var g={action:a.action,totalBet:d.totalBet,totalWin:d.totalWin,balance:a.balance?a.balance.totalBalance:m.current.getData().balance,gameState:d,currency:a.tokenData.currency,profitPosition:e,isRoundFinished:d.nextRequestType==c.BASE,freeRounds:a.freePlayInfo?{betValue:d.betValue/f.defaultSettings.fixedBet,totalNumberOfFreeRounds:a.freePlayInfo.granted,numberOfFreeRounds:a.freePlayInfo.granted-a.freePlayInfo.used,totalWin:a.freePlayInfo.won,active:!a.freePlayInfo.isLast&&a.freePlayInfo.used>0}:void 0};"play"!=a.action&&(g.freeRounds=m.current.getFreeRounds()),b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,g)},d.prototype.updatePlayReplayResponse=function(a){var d=this.replayResponse[this.replayHistoryIndex],e={action:a,totalBet:d.totalBet,totalWin:d.totalWin,balance:0,gameState:d,currency:f.launchVariables.currency,isRoundFinished:d.nextRequestType==c.BASE,freeRounds:void 0};b.ApplicationBase.instance.emit(c.RECEIVE_SERVER_RESPONSE,e)},d.prototype.showAlertMessage=function(d){var e;if(d){"string"==typeof d&&(d={code:d});var f;switch(d.code){case"2":f="messagePlayerBlocked";break;case"10":f="err_insufficient_funds";break;case"11":f="messageBetLimitReached";break;case"25":f="messageCoolOffPeriodActive";break;case"28":f="messageRegionIsBlocked";break;case"30":f="messageRGBlockedErrorExplanation";break;default:f="messageGenericErrorTitle"}e=a.Core.Lang.getPhrase(f),"messageGenericErrorTitle"==f?("messageGenericErrorTitle"!=e&&""!=e||(e="Apologies\nIt looks like something did not work, but there is no need for concern.\nPlease, reload the game."),e+="\nError ID: "+d.code):""!=e&&e!=f||!d.message||(e=d.message+"\nError ID: "+d.code),""==e&&(e="Apologies\nIt looks like something did not work, but there is no need for concern.\nPlease, reload the game.",e+="\nError ID: "+d.code),b.ApplicationBase.instance.hoelleConnector.OI.error(e,d.code),b.ApplicationBase.instance.hoelleConnector.OI.passThroughMessage(e),b.ApplicationBase.instance.emit(c.HANDLE_ALERT_RESPONSE,new c.ResponseAlert({lang:e,err:{msg:e},fatal:!0}))}},d}();c.RGSConnector=k;var l=function(){function c(c){var d=this;this.getBuyBonusRTP=function(){return d._response.gameConfig.buyBonusRTP},this.getRTP=function(){return d._response.gameConfig.rtp},this.getMaxWinProbability=function(){return d._response.gameConfig.maxWinProbability},this.getMaxWin=function(){return d._response.gameConfig.maxWin},this.getJurisdiction=function(){return d._response.gameConfig.jurisdiction},this.getDisplayRTP=function(){return d._response.gameConfig.displayRTP},this.getBetValues=function(){var a;return d._response.gameConfig.betLevels&&d._response.gameConfig.betLevels.length>0?(a=[],0==b.Currency.currencyDecimalPlaces?d._response.gameConfig.betLevels.forEach(function(b){var c=b*m.current.getGameConfig().getFixedBet();c.toString().indexOf(".")>0&&parseInt(c.toString().split(".")[1])>0||a.push(b)}):a=d._response.gameConfig.betLevels,!d._response.isRoundFinished&&d._response.gameState&&a.indexOf(m.amountValue(d._response.gameState.betValue))<0&&a.push(m.amountValue(d._response.gameState.betValue))):a=f.defaultSettings.betValues,a},this.operatorCodeList=["6bd6586e4f7c4564b1f97fb314888343","fe596a99ab9e4cefa3faefe30901f124","385ee180dc1041fb90adcbbe1507c75c","0142dc0354664063af43ec79d221e503","913867145d5d439b9aa7591f7c1dc3e1","bd5af21d78c04e3384a5b55dfd24fa87","5f9d4a8ef3fb43d7b2e1c0b8d204261e","05e2c3097f824f32aa84f22bb2684db7","309a819909f64b8e92558abd94b4c673","9f6370dde42b46ff9f1a21f902c77da0","4dc0aca8e09e40a1bc28a3cb8bb40c5a","fefe32692f0f4dc8be564ec829f33151","1c28f29875cb43e5ad466df33ff862e2","00a2016a4b6d45afb31125ff1e812b0d","4e37aa69bf1d40d6ac780d2e67bf1bc4","06af969c51864d5f99eae4f3d16f6ba3","a4aa648652cb4b5ba14a88c9d8edc32b","ab2178ea150942b881da76244a040280","36089e7bdfe041158e48f4eed479354d","fab6b13adcd1415f89e30395d551fada","757414c68ceb42c1a555d772513941d1","c21063ab27de47d59947cd399d6213f7","0ef315d785fd431b8017eb1ccbdc1432","290b1a3c43964f81a3fe498af2ac162a","e08804ca1e814097b2d3f5c7f845eb37","466623a1965144e0a484a1ad52316996","732ffc96deb14efeab06e7ab9b1a0d31","323a3b1414c84327abf4518afe1b6c6b","78a38e7882504ce3a1bb1a327b3388b7","ac51b41c0c564e4f9ed21bec273c38b9","51c7eed2b2ba4c22bca1144040d39659","cbc723ded246439a933be16d89209adf","651eabf4e3f447c5af9dcb004a7ef17e","4fec3365073b426cb7d29ec149031ef3","e32ca803a3ed48b98ceead2ce9b9b78c","edeb860b2f0f4b00b079885b97a030fd"],this.getDefaultBetIndex=function(){return d._response.isRoundFinished?d._response.freeRounds?d.getBetValues().indexOf(m.amountValue(d._response.freeRounds.betValue)):d.operatorCodeList.indexOf(a.Core.Environment.launchVariables.operatorCode)>=0?d.getDefaultBetIndexForBetB2B():d._response.gameConfig.defaultBetIndex>=0&&d._response.gameConfig.defaultBetIndex<d.getBetValues().length?d._response.gameConfig.defaultBetIndex:f.defaultSettings.defaultBetIndex:d.getBetValues().indexOf(m.amountValue(d._response.gameState.betValue))},this.getDefaultBetIndexForBetB2B=function(){var a={EUR:40,KRW:45e3,VND:55e4,UZS:25e4,MNT:7e4,USD:10,RUB:2e3},b=a[d.getCurrencyCode()],c=0;if(d._response.gameConfig.betLevels&&d._response.gameConfig.betLevels.length>0)for(var e=0;e<d._response.gameConfig.betLevels.length;e++)if(d._response.gameConfig.betLevels[e]>=b){c=e;break}return c},this.isSweepStakeGame=function(){return f.launchVariables.isSweepStake||!1},this.isSocial=function(){return a.Core.Environment.launchVariables.isSocial||!1},this.getFixedBet=function(){return f.defaultSettings.fixedBet},this.getBuyoutCost=function(){return f.defaultSettings.buyoutCost},this.getAutoPlayValues=function(){return void 0!==d._response.gameConfig.autoValues?d._response.gameConfig.autoValues:f.defaultSettings.autoValues},this.getDefaultAutoPlayValue=function(){return void 0!==d._response.gameConfig.defaultAutoValue?d._response.gameConfig.defaultAutoValue:f.defaultSettings.defaultAutoValue},this.getCurrencyCode=function(){return void 0!==d._response.currency?d._response.currency:f.launchVariables.currency},this.getCurrencyDecimalPlaces=function(){return f.defaultSettings.currencyDecimalPlaces},this.getLocaleId=function(){return f.launchVariables.localeId||"en"},this.isUseGrouping=function(){return f.defaultSettings.useGrouping},this.isDisplayCurrency=function(){return f.launchVariables.displayCurrency},this.isUKGC=function(){return void 0!==d._response.gameConfig.isUKGC?d._response.gameConfig.isUKGC:f.defaultSettings.ukgc},this.isRealityCheckSettingsAllowed=function(){return void 0!==d._response.gameConfig.isRealityCheck?d._response.gameConfig.isRealityCheck:f.defaultSettings.realityCheckSettingsAllowed},this.getSessionTimeoutInSeconds=function(){return d._response.gameConfig.sessionTimeoutInSeconds||d._response.gameConfig.isRealityCheckTime},this.isQuickSpinAllowed=function(){return void 0!==d._response.gameConfig.allowedQuickSpin?d._response.gameConfig.allowedQuickSpin:f.defaultSettings.allowedQuickSpin},this.getSpinDuration=function(){return f.defaultSettings.spinDuration*(5e3===d._response.gameConfig.minSpinTime?8:2)},this.isSlamStopAllowed=function(){return void 0!==d._response.gameConfig.slamStopAllowed?d._response.gameConfig.slamStopAllowed:f.defaultSettings.slamStopAllowed},this.isAutoPlayDisplay=function(){return void 0!==d._response.gameConfig.showAutoplay?d._response.gameConfig.showAutoplay:f.defaultSettings.showAutoplay},this.isBuyoutAllowed=function(){return void 0!==d._response.gameConfig.buyoutAllowed?d._response.gameConfig.buyoutAllowed:f.defaultSettings.buyoutAllowed},this.isDisplayClock=function(){return void 0!==d._response.gameConfig.displayClock?d._response.gameConfig.displayClock:f.defaultSettings.displayClock},this.isAutoplayLossLimitRequired=function(){
return void 0!==d._response.gameConfig.autoplayLossLimitRequired?d._response.gameConfig.autoplayLossLimitRequired:f.defaultSettings.autoplayLossLimitRequired},this.maxBetAmount=function(){var a=d.getBetValues();return a[a.length-1]},this.maxWinMultiplier=function(){return m.amountValue(d._response.gameConfig.maxExposure)},this._response=c;var e=[];this._response.gameConfig.betLevels.forEach(function(a){e.push(m.amountValue(a/d.getFixedBet()))}),this._response.gameConfig.betLevels=e}return c.prototype.getConfigData=function(){return this._response.gameConfig},c}();c.ResponseConfig=l;var m=function(){function a(){this.commonDrawData={},a.current=this}return a.prototype.setCommonDrawData=function(a){this.commonDrawData=a},a.prototype.getCommonDrawData=function(){return this.commonDrawData},a.prototype.getCommonDrawHash=function(){return this.commonDrawData?this.commonDrawData.commonRoundHash:void 0},a.amountValue=function(a){return a/100},a.prototype.updateData=function(a){this._response=a,this.getUpdatedGameResponse(a),this.getAction()!==c.BASE&&this.getAction()!==c.RE_SPIN||(this.triggeredGrid=null,this.getNextAction()!==c.BASE&&(this.triggeredGrid=this.getGrid()))},a.prototype.updateEndRoundData=function(a){this._response.balance=a.balance,this._response.freeRounds=a.freeRounds,this._response.profitPosition=a.profitPosition},a.prototype.updateCommonRoundEndData=function(a){this._response.balance=a.balance},a.prototype.getData=function(){return this._response},a.prototype.getProfitPosition=function(){return this._response.profitPosition&&!isNaN(this._response.profitPosition)?a.amountValue(this._response.profitPosition):0},a.prototype.setGameConfig=function(){this._config=new l(this._response),this.setBrokenGameState(!this.isGameRoundOver())},a.prototype.getGameConfig=function(){return this._config},a.prototype.setBrokenGameState=function(a){return this._response.isBroken=a},a.prototype.isBrokenGameSate=function(){return this._response.isBroken},a.prototype.getProgressData=function(){return"start"===this._response.action?this._response.progressData:this._response.gameState.progressData},a.prototype.getBalance=function(){return a.amountValue(this._response.balance)},a.prototype.getAccumulatedWin=function(){return this._response.accumulatedWin&&"string"==typeof this._response.accumulatedWin?a.amountValue(Number(this._response.accumulatedWin)):a.amountValue(this._response.accumulatedWin)},a.prototype.getJackpotValues=function(){if(this._response&&this._response.jackpotConfig){var a=this.getJackpotAfterWinValues();return a&&this._response.jackpotData&&(a[this._response.jackpotData.level]=Number(this._response.jackpotData.win).toFixed(2)),a}return null},a.prototype.getJackpotAfterWinValues=function(){if(this._response&&this._response.jackpotConfig){for(var a in this._response.jackpotConfig)this._response.jackpotConfig[a]=Number(this._response.jackpotConfig[a]).toFixed(2);return this._response.jackpotConfig}return null},a.prototype.getJackpotData=function(){return this._response&&this._response.jackpotData?(this._response.jackpotData.win=Number(this._response.jackpotData.win).toFixed(2),this._response.jackpotData):null},a.prototype.getAccumlatedValues=function(){return this._response?this._response.jackpotData:null},a.prototype.getAction=function(){return this._response.gameState.requestType},a.prototype.getNextAction=function(){return this._response.gameState.nextRequestType},a.prototype.getBet=function(){return a.amountValue(this._response.gameState.betValue)},a.prototype.getTotalBet=function(){return a.amountValue(this._response.gameState.totalBet)},a.prototype.getTotalWin=function(){return a.amountValue(this._response.gameState.totalWin)},a.prototype.getGameRoundWin=function(){return a.amountValue(this._response.gameState.totalRoundWin)},a.prototype.getGrid=function(){return this._response.gameState.grid},a.prototype.getGridAfterCascadeWin=function(){return this._response.gameState.gridAfterCascadeWin},a.prototype.getExpandingReels=function(){return this._response.gameState.expandingReels},a.prototype.getModifierSymbolPosition=function(){return this._response.gameState.reelModifiers},a.prototype.getTriggeredGrid=function(){return this.triggeredGrid},a.prototype.getWinDetails=function(){return this._response.gameState.winDetails},a.prototype.getMultiplier=function(){return this._response.gameState.multiplier},a.prototype.getWildMultiplier=function(){return this._response.gameState.wildMultiplier},a.prototype.getBuyoutFeature=function(){return this._response.gameState.featureToBuy},a.prototype.isGameRoundOver=function(){return this._response.isRoundFinished},a.prototype.getFeatureGameData=function(){return this._response.gameState.featureGameData?this._response.gameState.featureGameData:null},a.prototype.getGameData=function(){return this._response.gameState.gameData},a.prototype.getFeatureAwardedMultiplier=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN&&this.getAction()!=c.FREE_SPIN_SELECTION?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.multiplier:null},a.prototype.getFeatureTotalSpins=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN&&this.getAction()!=c.FREE_SPIN_SELECTION?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.totalSpins:null},a.prototype.getFeatureAwardedSpins=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN&&this.getAction()!=c.FREE_SPIN_SELECTION?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.awardedSpins:null},a.prototype.getFeatureSpinsLeft=function(){var a;return a=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN&&this.getAction()!=c.FREE_SPIN_SELECTION?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.remainSpins:null},a.prototype.isFreeReSpin=function(){var a=this._response.gameState.featureGameData;return!(!a||null===a.isFreeReSpin)&&a.isFreeReSpin},a.prototype.getFeatureReelModifiersSymbols=function(){var a;return a=this.getAction()!=c.BASE?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.reelModifiers:null},a.prototype.getFeatureExpandingReels=function(){var a;return a=this.getAction()!=c.BASE?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,a?a.expandingReels:null},a.prototype.getFeatureReTriggeredSpins=function(){var a=this._response.gameState.featureGameData;return a&&(a.id.includes(c.FREE_SPINS)||a.id===c.RE_SPIN)?a.retriggerSpins:null},a.prototype.getBonusPrizes=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData?this._response.gameState.featureTriggerData:this._response.gameState.featureGameData,a&&a.bonusOptions?a.bonusOptions:null},a.prototype.getAwardedBonusPrizes=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData?this._response.gameState.featureTriggerData:this._response.gameState.featureGameData,a&&a.awardedOptions?a.awardedOptions:{}},a.prototype.getBonusLevel=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData?this._response.gameState.featureTriggerData:this._response.gameState.featureGameData,a&&a.level?a.level:1},a.prototype.getBonusNextLevel=function(){var a;return a=this.getAction().includes(c.BONUS)?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData?this._response.gameState.featureTriggerData:this._response.gameState.featureGameData,a&&a.nextLevel?a.nextLevel:1},a.prototype.getFeatureData=function(){return this._response.gameState.featureGameData?this._response.gameState.featureGameData.featureData:null},a.prototype.getFeatureTotalWin=function(){var b;return b=this.getAction()!=c.BASE&&this.getAction()!=c.RE_SPIN?this._response.gameState.featureGameData:this._response.gameState.featureTriggerData,b?a.amountValue(b.totalWin):0},a.prototype.getFreeRounds=function(){return this._response.freeRounds},a.prototype.getFreeRoundsAwarded=function(){return this._response.freeRounds?this._response.freeRounds.totalNumberOfFreeRounds:null},a.prototype.getFreeRoundsLeft=function(){return this._response.freeRounds?this._response.freeRounds.numberOfFreeRounds:null},a.prototype.getFreeRoundsWin=function(){return this._response.freeRounds?a.amountValue(this._response.freeRounds.totalWin):null},a.prototype.isFreeRoundsActive=function(){return!!this._response.freeRounds&&this._response.freeRounds.active},a.prototype.getFreeRoundsBet=function(){return this._response.freeRounds?a.amountValue(this._response.freeRounds.betValue):null},a.prototype.getGambleRounds=function(){return this._response.gambleRounds},a.prototype.getGambleTotalWin=function(){return this._response.gambleRounds?a.amountValue(this._response.gambleRounds.totalWin):null},a.prototype.getGambleToWin=function(){return this._response.gambleRounds?a.amountValue(this._response.gambleRounds.totalWin):null},a.prototype.getGambleCard=function(){return this._response.gambleRounds?this._response.gambleRounds.card:null},a.prototype.getGamblePreviousCards=function(){return this._response.gambleRounds?this._response.gambleRounds.historyCards:null},a.prototype.isMaxWinCapped=function(){return!1},a.prototype.getCappedWinAmount=function(){return null},a.prototype.getUpdatedGameResponse=function(a){this._response.gameState&&(this._response.gameState.grid=this.getSymbolGrid(this._response.gameState.grid),this._response.gameState.winDetails=this.getWins(this._response.gameState.winDetails),this._response.gameState.reelModifiers=this.getModifierSymbols(this._response.gameState.reelModifiers),this._response.gameState.expandingReels=this.getExpandingSymbolReels(this._response.gameState.expandingReels),this._response.gameState.featureGameData&&this._response.gameState.featureGameData.reelModifiers&&(this._response.gameState.featureGameData.reelModifiers=this.getModifierSymbols(this._response.gameState.featureGameData.reelModifiers)),this._response.gameState.featureTriggerData&&this._response.gameState.featureTriggerData.reelModifiers&&(this._response.gameState.featureTriggerData.reelModifiers=this.getModifierSymbols(this._response.gameState.featureTriggerData.reelModifiers)),this._response.gameState.featureGameData&&this._response.gameState.featureGameData.expandingReels&&(this._response.gameState.featureGameData.expandingReels=this.getExpandingSymbolReels(this._response.gameState.featureGameData.expandingReels)),this._response.gameState.featureTriggerData&&this._response.gameState.featureTriggerData.expandingReels&&(this._response.gameState.featureTriggerData.expandingReels=this.getExpandingSymbolReels(this._response.gameState.featureTriggerData.expandingReels)),this._response.gameState.featureGameData&&this._response.gameState.featureGameData.gridAfterCascadeWin?this._response.gameState.gridAfterCascadeWin=this.getSymbolGrid(this._response.gameState.featureGameData.gridAfterCascadeWin):this._response.gameState.gridAfterCascadeWin&&(this._response.gameState.gridAfterCascadeWin=this.getSymbolGrid(this._response.gameState.gridAfterCascadeWin)))},a.prototype.getSymbolGrid=function(a){var b=[];if(!a)return b;for(var c=0;c<a.length;c++){for(var d=[this.getRandomSymbolId()],e=0;e<a[c].length;e++)d.push(this.getSymbolId(a[c][e]));d.push(this.getRandomSymbolId()),b.push(d)}return b},a.prototype.getWins=function(b){var d=[],e=!1;if(b&&b.length>0)for(var f=0;f<b.length;f++){var g=b[f];d.push({symbol:this.getSymbolId(g.symbol),win:a.amountValue(g.win),positions:this.getWinPositions(g.positions),type:"LINE"==g.type||"WAY"==g.type||"CASCADE"==g.type||"CLUSTERS"==g.type?g.type:"SCATTER",line:g.line,feature:"LINE"==g.type||"WAY"==g.type||"CASCADE"==g.type||"CLUSTERS"==g.type?void 0:g.type}),d[f].feature&&(e=!0)}return e||!this._response.gameState.featureTriggerData||this._response.gameState.featureTriggerData.id!=c.FREE_SPINS&&this._response.gameState.featureTriggerData.id!==c.HOLD_FREE_SPINS||d.push(this.addFeatureWinDetail()),d},a.prototype.addFeatureWinDetail=function(){for(var a=[],b="",c=0;c<this._response.gameState.grid.length;c++)for(var d=1;d<this._response.gameState.grid[c].length-1;d++)(this._response.gameState.grid[c][d].includes("SC")||this._response.gameState.grid[c][d].includes("BN"))&&(a.push({reel:c,row:d-1}),b=this._response.gameState.grid[c][d]);return{symbol:b,win:0,positions:this.getWinPositions(a),type:"SCATTER",line:-1,feature:this._response.gameState.featureTriggerData.id}},a.prototype.getModifierSymbols=function(a){var b=null;return a&&a.length>0&&(b=[],a.forEach(function(a){b.push(new q(a))})),b},a.prototype.getExpandingSymbolReels=function(a){var b=null;return a&&a.length>0&&(b=[],a.forEach(function(a){b.push(new r(a))})),b},a.prototype.getWinPositions=function(a){var b=[];return a&&a.forEach(function(a){b.push(new p(a.reel,a.row))}.bind(this)),b},a.prototype.getSymbolId=function(a){return a&&""!=a?f.defaultSettings.symbolMapWithServer[a]||a:"BL"},a.prototype.getRandomSymbolId=function(){var a=f.gameConfig.profile[this.getAction()];a||(a=f.gameConfig.profile[c.BASE]);var b=Object.keys(a.paytable),d=Math.floor(Math.random()*b.length);return f.defaultSettings.symbolMapWithServer[b[d]]},a}();c.ResponseResult=m;var n=function(){function b(a){this._response=a,b.current=this}return b.prototype.getPlayerMessage=function(){return this._response.lang?a.Core.Lang.getPhrase(this._response.lang):a.Core.Lang.getPhrase("err_server_generic")},b.prototype.isFatal=function(){return this._response.fatal},b.prototype.getErrorObject=function(){return this._response.err},b.prototype.getErrorMessage=function(){return this._response.err?this._response.err.msg||"no error msg available":"no error object available"},b}();c.ResponseAlert=n;var o=function(){function a(){}return a.setTime=function(b){a.time.setTime(b)},a.getFormattedTime=function(){var b=new Date;return a.timeFormat.format(b)},a.time=new Date,a.timeFormat=Intl?Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit"}):{format:function(a){var b=a.toLocaleTimeString();return b.substring(0,b.lastIndexOf(":"))}},a}();c.ServerTime=o;var p=function(){function a(a,b){this.reel=a,this.row=b}return a.prototype.getReelIndex=function(){return this.reel},a.prototype.getRowIndex=function(){return this.row},a}();c.SymbolPosition=p;var q=function(){function a(a){this.symbol=f.defaultSettings.symbolMapWithServer[a.symbol]||a.symbol,this.replaceSymbol=a.replaceSymbol,this.position=new p(a.position.reel,a.position.row),a.type&&(this.type=isNaN(a.type)?a.type:m.amountValue(a.type))}return a.prototype.getSymbol=function(){return this.symbol},a.prototype.getReplaceSymbol=function(){return this.replaceSymbol},a.prototype.getPosition=function(){return this.position},a.prototype.getType=function(){return this.type},a}();c.ModifierSymbolPosition=q;var r=function(){function a(a){this.symbol=f.defaultSettings.symbolMapWithServer[a.symbol]||a.symbol,this.reel=a.reel}return a.prototype.getSymbol=function(){return this.symbol},a.prototype.getReelIndex=function(){return this.reel},a}();c.ExpandingReels=r,c.createServerConnection=d}(b.Server||(b.Server={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(b){function c(a,c){if(void 0===c&&(c=!1),null==a||void 0==a)return"";if(0==b.currencyDecimalPlaces&&(a=Math.floor(a),b.nonGroupingCurrencies.indexOf(b.currencyCode)>=0&&(b.useGrouping=!1)),b.formatAsCredits)return Math.floor(a).toLocaleString(void 0,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:b.useGrouping});if(c||!b.currencyCode||!b.displayCurrency)return a.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:b.currencyDecimalPlaces,maximumFractionDigits:b.currencyDecimalPlaces,useGrouping:b.useGrouping});if(b.currencyCodeMap[b.currencyCode])return b.currencyCodeMap[b.currencyCode]+a.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:b.currencyDecimalPlaces,maximumFractionDigits:b.currencyDecimalPlaces,useGrouping:b.useGrouping});try{return a.toLocaleString(b.localeId,{currency:b.currencyCode,style:"currency",minimumFractionDigits:b.currencyDecimalPlaces,maximumFractionDigits:b.currencyDecimalPlaces,useGrouping:b.useGrouping})}catch(c){return b.currencyCode+a.toLocaleString(b.localeId,{style:"decimal",minimumFractionDigits:b.currencyDecimalPlaces,maximumFractionDigits:b.currencyDecimalPlaces,useGrouping:b.useGrouping})}}function d(c,d){try{var e=0;if(b.zeroDecimalCurrencies.indexOf(d)<0){var f=new Intl.NumberFormat("en",{style:"currency",currency:d}),g=f.format(1.11),h=g.match(/[\d.,]+/);if(h){var i=h[0].split(".")[1];e=i?i.length:0}}return a.Core.Environment.defaultSettings.currencyDecimalPlaces=e,"en"}catch(b){return a.Core.Environment.defaultSettings.currencyDecimalPlaces=2,"en"}}b.creditValue=1,b.displayCurrency=!0,b.currencyCodeMap={MXN:"$",CLP:"$",GLD:"GC",GHC:"SC",SWP:"SC",WVC:"WOW",STC:"SC",FGC:"FC",SBC:"SC",FBC:"FC",GBC:"GC",ISC:"SC",IGC:"GC",GBC2:"GC",GBC3:"GC",MTC:"SC",SCC:"SC",GCC:"GC",RTC:"ROO",XSC:"SC",XGC:"GC"},b.nonGroupingCurrencies=["FBC","GBC"],b.zeroDecimalCurrencies=["YER","XPF","XOF","XAF","VUV","VND","UGX","SYP","STD","SOS","SLL","RWF","RSD","PYG","MRO","MMK","MGA","LBP","LAK","KRW","KPW","KMF","JPY","ISK","IRR","IQD","GNF","DJF","CLP","BIF","ALL","AFN","GHC","GLD","FBC","GBC","GBC2","GBC3","RTC"],b.format=c,b.getLocaleCode=d}(b.Currency||(b.Currency={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){!function(a){function b(a){d=a}function c(a){if(d[a])return new e(d[a]);throw"Scene id doesn't exist in profile : "+a}var d;a.init=b,a.getSceneProfile=c;var e=function(){function a(a){this._profile=a}return a.prototype.get=function(){return this._profile},a}();a.SceneProfile=e}(a.SceneProfile||(a.SceneProfile={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(a){var b=function(){function a(){}return a.ON_GAME_INITIALIZED="on_game_initialized",a.ON_GET_GAME_RESULTS="on_get_game_results",a.ON_GET_CLEAR_ALL_SCREEN="on_clear_screen",a.ON_REMOVE_SYMBOL_IN_HOLD="on_remove_symbol_in_hold_spin",a.ON_RESULTS_READY="on_results_ready",a.ON_RESULTS_DISPLAYED="on_results_displayed",a.ON_PLAYER_PROMPT="on_player_prompt",a.ON_PLAYER_PROMPT_WIN="on_player_prompt_win",a.ON_GAME_CHANGED="on_game_change",a.ON_GAME_ACCEPTED="on_game_accepted",a.ON_UPDATE_GAMBLE="on_update_gamble",a.GAMBLE_EXIT="on_gamble_exit",a.ON_GAME_READY="on_game_ready",a.ON_CONTINUE_GAME="on_continue_game",a.ON_FATAL_ERROR="on_game_fatal_error",a.ON_LOAD_PROGRESS="on_game_load_progress",a.UPDATE_BALACE="update_balace",a.HISTORY_RESPONSE="history_data",a.SET_FORCE_VALUES="set_force_values",a.ACTIVATE_FREE_ROUND="set_round_values",a.EVENT_QUIT_GAME="on_quit_game",a.ADD_CELEBRATIONS="on_add_celebrations",a.ON_INTRO_CLOSE="on_intro_close",a.ON_OUTRO_CLOSE="on_outro_close",a.SPIN_BUTTON_ANIMATION_START="spin_animation_start",a.SPIN_BUTTON_ANIMATION_STOP="spin_animation_stop",a.EVENT_ROUND_END_RECEIVED="round_end_received",a.EVENT_GAME_IN_PROGRESS="game_in_progress",a.EVENT_COMMON_DRAW_STARTED="common_draw_started",a.EVENT_COMMON_DRAW_ENTERED="common_draw_entered",a.EVENT_COMMON_DRAW_CREATED="common_draw_created",a.EVENT_GAME_FINISHED="game_finished",a.EVENT_GAME_OTHER_STATE="game_other_state",a.ON_HANDLE_RESTORE_STATE="handle_restore_state",a.ON_BUY_INTERACT_GAME="buy_interact_state",a}();a.GameEvents=b}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Common.GameEvents,e=a.Common.Server,f=a.Common.Server.ResponseResult,g=function(c){function g(a,b,d,e){return c.call(this,a,b,d,e)||this}return __extends(g,c),g.prototype.addForce=function(){},g.prototype.onCreate=function(){c.prototype.onCreate.call(this),a.Core.Environment.launchVariables.isReplay&&this._layout.getComponent("balance_text")&&(this._layout.getComponent("balance_text").visible=!1),b.ApplicationBase.instance.on(d.ON_RESULTS_READY,this.onResultsReady,this),b.ApplicationBase.instance.on(e.REQUEST_RESULTS,this.onResultsRequested,this),b.ApplicationBase.instance.on(d.ON_CONTINUE_GAME,this.onContinueGame,this),b.ApplicationBase.instance.on(d.ON_GAME_READY,this.onGameReady,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown,this),b.ApplicationBase.instance.on(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY,this.showBrokenFeatureWinSummary,this),b.ApplicationBase.instance.on(d.ON_PLAYER_PROMPT,this.onPlayerPrompt,this),b.ApplicationBase.instance.on(d.ON_INTRO_CLOSE,this.closeIntroPopup,this),b.ApplicationBase.instance.on(d.ON_OUTRO_CLOSE,this.closeOutroPopup,this),this.on(a.Core.Events.ON_INTERACTION,this.onInteraction,this),this._promptMsgPanel=this._layout.getComponent("player_prompt"),this._sceneAnimations=this._layout.getLayoutParams().sceneAnimations,b.ApplicationBase.instance.on(e.ALL_ASSETS_LOADED,this.loadingCompleted,this),b.ApplicationBase.instance.on(d.EVENT_GAME_IN_PROGRESS,this.onGameInProgress,this),b.ApplicationBase.instance.on(d.EVENT_GAME_FINISHED,this.onGameFinished,this),b.ApplicationBase.instance.on(d.EVENT_COMMON_DRAW_STARTED,this.onCommonDrawGameStarted,this),b.ApplicationBase.instance.on(d.EVENT_COMMON_DRAW_CREATED,this.onCommonDrawGameCreated,this),b.ApplicationBase.instance.on(d.EVENT_GAME_OTHER_STATE,this.onCommonDrawOtherState,this),b.ApplicationBase.instance.on(e.RECEIVE_COMMON_DRAW_ENTERED,this.handleCommonDrawGameCreated,this),b.ApplicationBase.instance.on(e.RECEIVE_COMMON_DRAW_CASHOUT,this.handleCommonDrawGameCashout,this),b.ApplicationBase.instance.on(e.RECEIVE_COMMON_DRAW_WINNER,this.handleCommonDrawWinner,this),b.ApplicationBase.instance.on(e.RECEIVE_COMMON_DRAW_HISTORY,this.handleCommonDrawHistory,this),b.ApplicationBase.instance.on(e.RECEIVE_COMMON_DRAW_CLOSE,this.handleCommonDrawClose,this),this.createAnimationInterval()},g.prototype.onDestroy=function(){c.prototype.onDestroy.call(this),b.ApplicationBase.instance.off(d.ON_RESULTS_READY,this.onResultsReady),b.ApplicationBase.instance.off(d.ON_GAME_READY,this.onGameReady),b.ApplicationBase.instance.off(d.ON_CONTINUE_GAME,this.onContinueGame),b.ApplicationBase.instance.off(e.REQUEST_RESULTS,this.onResultsRequested),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),b.ApplicationBase.instance.off(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY,this.showBrokenFeatureWinSummary,this),b.ApplicationBase.instance.off(d.ON_PLAYER_PROMPT,this.onPlayerPrompt),b.ApplicationBase.instance.off(d.ON_INTRO_CLOSE,this.closeIntroPopup,this),b.ApplicationBase.instance.off(d.ON_OUTRO_CLOSE,this.closeOutroPopup,this),b.ApplicationBase.instance.off(d.EVENT_GAME_IN_PROGRESS,this.onGameInProgress,this),b.ApplicationBase.instance.off(d.EVENT_GAME_FINISHED,this.onGameFinished,this),b.ApplicationBase.instance.off(e.RECEIVE_COMMON_DRAW_ENTERED,this.handleCommonDrawGameCreated,this),b.ApplicationBase.instance.off(e.RECEIVE_COMMON_DRAW_CASHOUT,this.handleCommonDrawGameCashout,this),b.ApplicationBase.instance.off(e.RECEIVE_COMMON_DRAW_WINNER,this.handleCommonDrawWinner,this),b.ApplicationBase.instance.off(e.RECEIVE_COMMON_DRAW_HISTORY,this.handleCommonDrawHistory,this),b.ApplicationBase.instance.off(e.RECEIVE_COMMON_DRAW_CLOSE,this.handleCommonDrawClose,this),this.off(a.Core.Events.ON_INTERACTION,this.onInteraction),this._animationInterval&&clearInterval(this._animationInterval)},g.prototype.onResultsRequested=function(c){"BASE"!==f.current.getNextAction()||c.isBroken||e.freeRoundActive||a.Core.Environment.launchVariables.isReplay||b.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,f.current.getBalance()-a.Slots.SettingsPages.BettingSetup.getTotalBetCash())},g.prototype.closeIntroPopup=function(){},g.prototype.closeOutroPopup=function(){},g.prototype.onResultsReady=function(){},g.prototype.onGameReady=function(){this.onResize()},g.prototype.onInteraction=function(a,b){},g.prototype.onSummaryAccepted=function(){b.ApplicationBase.instance.emit(d.ON_RESULTS_DISPLAYED)},g.prototype.onGameAccepted=function(){var a=this;b.ApplicationBase.instance.emit(d.ON_GAME_ACCEPTED),this._announcer&&TweenLite.to(this._announcer,.5,{alpha:0,onComplete:function(){a._announcer.parent.removeChild(a._announcer)}}),b.ApplicationBase.instance.emit(d.ON_GET_GAME_RESULTS)},g.prototype.onContinueGame=function(a){},g.prototype.showAnnouncer=function(b){this._layout.getComponent(b)&&(this.interactive=!0,this.interactiveChildren=!0,this._announcer=this._layout.getComponent(b),this._announcer.visible=!0,this._announceTimeout=a.Core.Time.juggler.setTimeout(function(){},1e4))},g.prototype.onWinsShown=function(){},g.prototype.showBrokenFeatureWinSummary=function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0)},g.prototype.onPlayerPrompt=function(a){this._promptMsgPanel&&(a&&a.length?this._promptMsgPanel.showMessagePanel(a.toUpperCase()):this._promptMsgPanel.hideMessagePanel())},g.prototype.createAnimationInterval=function(){var a=this;this._sceneAnimations&&this._sceneAnimations.length>0&&(this._animationInterval=setInterval(function(){a.playSceneAnimation()},1e4/this._sceneAnimations.length))},g.prototype.playSceneAnimation=function(){if(this._sceneAnimations&&this._sceneAnimations.length>0){var a=Math.floor(Math.random()*this._sceneAnimations.length),b=this._layout.getComponent(this._sceneAnimations[a]);this._assets.playAnimation(b.clip,!1)}},g.prototype.loadingCompleted=function(){for(var b in this._layout.getComponents())if(this._layout.getComponent(b)instanceof a.Core.Renderer.UI.MovieClipWrapper){var c=this._layout.getComponent(b);c&&!c.clip&&c.setClip()}a.Core.SoundManager.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500),a.Core.Environment.isMobile()&&this.updateOnOrientationChange()},g.prototype.onGameInProgress=function(a){},g.prototype.onGameFinished=function(a){},g.prototype.onCommonDrawGameCreated=function(a){},g.prototype.onCommonDrawGameEntered=function(a){},g.prototype.onCommonDrawGameStarted=function(a){},g.prototype.onCommonDrawOtherState=function(a){},g.prototype.handleCommonDrawGameCashout=function(a){},g.prototype.handleCommonDrawGameCreated=function(a){},g.prototype.handleCommonDrawWinner=function(a){},g.prototype.handleCommonDrawHistory=function(a){},g.prototype.handleCommonDrawClose=function(a){},g}(c);b.CommonSceneBase=g}(a.Common||(a.Common={}))}(DO||(DO={}));var DO;!function(a){!function(b){!function(c){function d(){o();var d=x.current.getGameConfig();("BR"===d.getJurisdiction()&&d.getSessionTimeoutInSeconds()||"UKGC"===d.getJurisdiction()&&d.isRealityCheckSettingsAllowed())&&this.startInactivityCheck(),b.ApplicationBase.instance.on(b.Server.HANDLE_RESULT_RESPONSE,function(){a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.REALITY_CHECK_TIMER_RESET),x.current.getAction()===b.Server.BASE&&(D+=x.current.getTotalBet(),A=x.current.getTotalBet(),F+=x.current.getTotalBet()),E+=x.current.getTotalWin(),G+=x.current.getTotalWin(),x.current.getAction()===b.Server.FREE_SPINS&&B<x.current.getTotalWin()&&(B=N),N=x.current.getGameRoundWin()},this),b.ApplicationBase.instance.on(b.Server.REQUEST_RESULTS,function(a){a.isBroken||C++},this),b.ApplicationBase.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,function(){(x.current.getAction()===b.Server.RE_SPIN&&x.current.getNextAction()==b.Server.BASE||x.current.getAction()===b.Server.BASE&&x.current.getNextAction()==b.Server.BASE)&&b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS)}),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS_AT_FS,function(){b.ApplicationBase.instance.emit(c.EVENT_CHECK_ALARMS)}),b.ApplicationBase.instance.on(b.GameEvents.ON_GAME_CHANGED,function(){x.current.getNextAction()!=b.Server.BASE&&y&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_FEATURE_STOP),o())},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_REALITY_CHECK_CHANGE,function(a){k(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,function(a){a=a||9999999999,l(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,m(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,function(a){a=a||9999999999,n(a)},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,function(a){a||0!=I||0!=J||0!=K||o()},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,function(a){y=a},this),b.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,function(a){z=a},this),a.Common.ApplicationBase.instance.on(c.REALITY_CHECK_TIMER_RESET,function(){P=!1,O=Date.now()}),b.ApplicationBase.instance.on(c.EVENT_CHECK_ALARMS,function(){v()>=I&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_CASH_LOSS,I),o()),N&&N>=J&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,J),o()),B&&B>=J&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,J),o()),E>=K&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_TOTAL_CASH_WIN,K),o()),N&&N>=J&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_SINGLE_CASH_WIN,J),o()),N&&z&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_STOP_ON_ANY_WIN,J),o());var a=(new Date).getTime();x.current.getGameConfig().isRealityCheckSettingsAllowed()&&(a-M)/6e4>=L&&(b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,L),M=a)},this)}function e(){if("UKGC"===x.current.getGameConfig().getJurisdiction()&&x.current.getGameConfig().isRealityCheckSettingsAllowed()){var a=Date.now(),d=a-O,e=x.current.getGameConfig().getSessionTimeoutInSeconds();if(d>=e&&!P){P=!0;var f=Math.floor(e/6e4);b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,f)}}else if("BR"===x.current.getGameConfig().getJurisdiction()&&x.current.getGameConfig().getSessionTimeoutInSeconds()){var a=Date.now(),d=(a-O)/1e3;if(d>=x.current.getGameConfig().getSessionTimeoutInSeconds()&&!P){P=!0;var f=Math.floor(x.current.getGameConfig().getSessionTimeoutInSeconds()/60);b.ApplicationBase.instance.emit(c.EVENT_ALARM_REALITY_CHECK,f)}}}function f(){var a=this;this.inactivityChecker=setInterval(function(){return a.checkInactivity()},this.CHECK_INTERVAL_MS)}function g(){O=Date.now()}function h(){return L}function i(a){y=a}function j(a){z=a}function k(a){L=a,M=(new Date).getTime()}function l(a){I=a}function m(a){J=a}function n(a){K=a}function o(){C=0,D=0,E=0,B=0,N=0,I=9007199254740991,J=9007199254740991,K=9007199254740991,y=!1,z=!1,H=(new Date).getTime()}function p(){return N}function q(){return((new Date).getTime()-H)/1e3}function r(){return C}function s(){return D}function t(){return E}function u(){return E/D*100}function v(){return D-E}function w(){return G-(x.current.getFreeRounds()?0:F)}var x=a.Common.Server.ResponseResult;c.EVENT_ALARM_CASH_LOSS="monitoring_cash_loss_alarm",c.EVENT_ALARM_SINGLE_CASH_WIN="monitoring_single_cash_win_alarm",c.EVENT_ALARM_TOTAL_CASH_WIN="monitoring_total_cash_win_alarm",c.EVENT_ALARM_STOP_ON_ANY_WIN="monitoring_stop_on_any_win",c.EVENT_ALARM_REALITY_CHECK="monitoring_reality_check",c.EVENT_ALARM_FEATURE_STOP="monitoring_feature_stop",c.EVENT_ALARM_BROKEN_MSG="broken_alarm",c.REALITY_CHECK_TIMER_RESET="reality_check_timer",c.EVENT_CHECK_ALARMS="monitoring_check_alarms",c.EVENT_CHECK_ALARMS_AT_FS="monitoring_check_alarms_at_fs",
c.EVENT_CHECK_MAX_CAP="monitoring_max_cap",c.INSUFFICIENT_FUND="insufficient_fund";var y,z,A,B,C=0,D=0,E=0,F=0,G=0,H=0,I=9999999,J=9999999,K=9999999,L=60,M=(new Date).getTime(),N=0,O=Date.now(),P=!1;c.init=d,c.checkInactivity=e,c.startInactivityCheck=f,c.resetInactivityTimer=g,c.getRealityCheckDuration=h,c.setFeatureStop=i,c.setWinStop=j,c.setLimitRealityCheck=k,c.setLimitCashLoss=l,c.setLimitSingleWin=m,c.setLimitTotalWin=n,c.reset=o,c.getCurrentLastCashWin=p,c.getCurrentDuration=q,c.getCurrentBetCount=r,c.getCurrentTotalBetCash=s,c.getCurrentTotalWin=t,c.getCurrentRTP=u,c.getCurrentLossCash=v,c.getNetPosition=w}(b.PlayerMonitoring||(b.PlayerMonitoring={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Time.Juggler,e=function(c){function e(e){var f=c.call(this)||this;return f._assets=e,f._juggler=new d(!0),f.once(a.Core.Events.ON_CREATE,function(){f.setImage(0)}),b.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){f._juggler._isActive=!1}),f}return __extends(e,c),e.prototype.setImage=function(a){var b=this._assets.getPIXISprite(this._config.params.sprites[a]);this.addChild(b)},e}(PIXI.Container);c.SpriteBanner=e}(b.FX||(b.FX={}))}(a.Common||(a.Common={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Core.Lang,h=a.Common.PlayerMonitoring,i=a.Core.HTML,j=a.Core.SoundManager,k=a.Common.GameEvents,l=a.Common.Server,m=a.Common.Currency,n=a.Common.SceneProfile,o=a.Core.Utils.formatTime,p=a.Common.Server.ResponseResult,q=function(){function a(){}return a.ON_REALITY_CHECK_CHANGE="settings_reality_check_change",a.ON_AUTO_SPIN_COUNT_CHANGE="settings_auto_spin_count_change",a.ON_LOSS_LIMIT_CHANGE="settings_loss_limit_change",a.ON_SINGLE_WIN_LIMIT_CHANGE="settings_single_win_limit_change",a.ON_TOTAL_WIN_LIMIT_CHANGE="settings_total_win_limit_change",a.ON_STOP_ON_FEATURE_WIN_CHANGE="settings_stop_on_feature",a.ON_STOP_ON_ANY_WIN="settings_stop_on_any_win",a.ON_SETTINGS_OPEN="settings_shown",a.ON_SETTINGS_CLOSED="settings_closed",a.ON_BET_CHANGE="settings_bet_change",a.ON_INFO_PAGE_CLOSED="info_page_change",a.ON_LEFT_HANDED_MODE="settings_left_handed",a.ON_QUICK_SPIN="settings_quick_spin",a.ON_DISPLAY_FORMAT_CHANGE="settings_coins_or_cash",a.ON_BET_EVENT_OUTER="on_bet_load_outer",a.ON_AUTOPLAY_EVENT_OUTER="on_autoplay_load_outer",a.PAYTABLE_STATUS_CHANGED="paytable_status_change",a.OPTION_STATUS_CHANGED="option_status_change",a}();c.SettingsEvents=q;var r=function(){function a(){}return a.setBetLevels=function(b){a.betLevels=b},a.setFixedBet=function(b){a.fixedBet=b},a.getTotalBetCash=function(){return a.currentBetLevel*a.fixedBet},a.betLevels=[],a.currentBetLevel=1,a}();c.BettingSetup=r;var s=function(d){function s(c,n){function s(){j.globalSounds.getVolumeFX()||j.globalSounds.getVolumeMusic()?e.coreEvents.emit(j.EVENT_SET_MUTE,!1,!0):e.coreEvents.emit(j.EVENT_SET_MUTE,!0,!0)}var u=d.call(this,c,n)||this;u.prevID=void 0,u.firstLoad=0,u.losslimitValue=0,u.paytablePages=[],u.paytablePagesClassIds="",u.paytablePages=[],u.paytablePagesClassIds="";for(var w=1;w<=f.defaultSettings.totalPaytablePages;w++)u.paytablePagesClassIds+=".paginatonIndexOver"+w+", .paginatonIndex"+w,w!=f.defaultSettings.totalPaytablePages&&(u.paytablePagesClassIds+=", "),u.paytablePages.push("page"+w);return u._$settingsHolder=$("#settings"),u._$menu=$("#settings_menu"),u._$pages=$("#settings_pages"),u._$header=$("#settings_header"),u._$footer=$("#settings_footer"),u._$buttonAudio=$("#button_settings_audio"),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,u.onAutoEnd,u),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPIN,u.onAutoSpinStart),a.Common.ApplicationBase.instance.on(q.ON_INFO_PAGE_CLOSED,function(){return u.closeSettingsClick()}),u._$buttonHome=$("#button_settings_home"),u._$buttonHome.on("click",function(){$("#button_exit_settings").click(),window.vex.dialog.buttons.YES.text=g.getPhrase("yes_caps"),window.vex.dialog.buttons.NO.text=g.getPhrase("no_caps"),window.vex.dialog.confirm({message:g.getPhrase("confirm_exit"),callback:function(c){c&&a.Common.ApplicationBase.instance.emit(b.ControlPanel.EVENT_QUIT_GAME)}})}),a.Common.ApplicationBase.instance.once(k.ON_GAME_READY,function(){$("body").append($("#cp_auto_settings_panel")),f.isDesktop()||$("div#game_wrapper").append($("#settings_page_history")),this._stopOnFeature.setValue(!1),this._stopOnAnyWin.setValue(!1),void 0===f.defaultSettings.quickSpinValue&&(f.defaultSettings.quickSpinValue=!0),p.current.getGameConfig().isQuickSpinAllowed(),this._quickSpin.setValue(a.Common.ApplicationBase.getAppValue("quickSpin",f.defaultSettings.quickSpinValue)),this._gamble.setValue(1==a.Common.ApplicationBase.getAppValue("gamble",!0)),this._splashScreen.setValue(1==a.Common.ApplicationBase.getAppValue("splashScreen",!0)),this._spaceBar.setValue(1==a.Common.ApplicationBase.getAppValue("spaceToSpin",!0)),this._leftHanded.setValue(!1),this._sounds.setValue(this.stringtoBoolean(f.launchVariables.sfx)),this._music.setValue(this.stringtoBoolean(f.launchVariables.music))}.bind(u)),a.Common.ApplicationBase.instance.on(l.CONFIGURE_BET_DETAILS,function(b){r.setBetLevels(b.getBetValues()),r.setFixedBet(b.getFixedBet()),r.currentBetLevel=b.getBetValues()[b.getDefaultBetIndex()],u._totalBet=new x("stepper_total_bet"),new x("cp_stepper_total_bet"),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,function(a){this.losslimitValue=a||9999999999},u),a.Common.ApplicationBase.instance.on(q.ON_BET_CHANGE,function(){return u.updatePays()}),a.Common.ApplicationBase.instance.on(q.ON_BET_EVENT_OUTER,function(){return u.showBetPage()}),a.Common.ApplicationBase.instance.on(q.ON_AUTOPLAY_EVENT_OUTER,function(){return u.showAutoplayPage()}),a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,{betLevel:r.currentBetLevel,totalBet:r.getTotalBetCash()})}),e.coreEvents.on(j.EVENT_SET_MUTE,function(a,b){void 0===b&&(b=!1);var c=u._$buttonAudio;a?(c.removeClass("audio_on").addClass("audio_off"),b||(u._sounds.setValue(!1),u._music.setValue(!1))):(c.removeClass("audio_off").addClass("audio_on"),b||(j.globalSounds.getVolumeMusic()&&u._music.setValue(!0),j.globalSounds.getVolumeFX()&&u._sounds.setValue(!0)))}),u._sessionLimitSlider=new A("slider_session_limit",1,120,o,2),u._sessionLimitSlider.setValue(h.getRealityCheckDuration()),u._sessionLimitSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(q.ON_REALITY_CHECK_CHANGE,b)},$("#session_time_limit").hide(),u._autoSpinsSlider=new A("slider_autospin_count",0,100,null,5),u._autoSpinsSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(q.ON_AUTO_SPIN_COUNT_CHANGE,b);var c=p.current.getGameConfig().isUKGC();if(void 0!==u.losslimitValue&&u.losslimitValue>0&&(0===b?($("#autoplayStartButton").css("pointer-events","none"),$("#autoplayStartButton").addClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_disable+"')")):p.current.getGameConfig().isAutoplayLossLimitRequired()||($("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')"))),!p.current.getGameConfig().isAutoplayLossLimitRequired()){if(b&&c){var d=u._$inputLossLimit,e=$("#autoplayStartButton");d.getValue()?(d.getDiv().fadeIn(),d.getDiv().removeClass("flash-item"),e.removeClass("disabled_settings_item"),e.css("pointer-events","all"),e.css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')")):(d.getDiv().addClass("flash-item"),e.removeClass("disabled_settings_item"),e.css("pointer-events","all"),e.css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')"))}else $("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')");0===b?($("#autoplayStartButton").css("pointer-events","none"),$("#autoplayStartButton").addClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_disable+"')")):($("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')"))}},u._$inputLossLimit=new t("input_loss_limit",function(b){var c=a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),d=u._$inputLossLimit,e=$("#autoplayStartButton");a.Common.ApplicationBase.instance.emit(q.ON_LOSS_LIMIT_CHANGE,b),b>=c?(d.getDiv().removeClass("flash-item"),e.removeClass("disabled_settings_item"),e.css("pointer-events","all"),e.css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')")):d&&(d.getDiv().addClass("flash-item"),e.addClass("disabled_settings_item"),e.css("pointer-events","none"),e.css("background-image","url('"+f.defaultSettings.autoplayStartButton_disable+"')"))},"keypad"),u._$inputSingleWinLimit=new t("input_single_win_limit",function(b){a.Common.ApplicationBase.instance.emit(q.ON_SINGLE_WIN_LIMIT_CHANGE,b)},"keypad"),u._$inputTotalWinLimit=new t("input_total_win_limit",function(b){a.Common.ApplicationBase.instance.emit(q.ON_TOTAL_WIN_LIMIT_CHANGE,b)},"keypad"),u._stopOnFeature=new z("checkbox_stop_on_feature",function(b){a.Common.ApplicationBase.instance.emit(q.ON_STOP_ON_FEATURE_WIN_CHANGE,b)}),u._stopOnAnyWin=new z("checkbox_stop_on_any",function(b){a.Common.ApplicationBase.instance.emit(q.ON_STOP_ON_ANY_WIN,b)}),u._quickSpin=new z("checkbox_quickspin",function(b){p.current.getGameConfig().isQuickSpinAllowed()?(null===b&&(b=!1),a.Common.ApplicationBase.instance.emit(q.ON_QUICK_SPIN,b),a.Common.ApplicationBase.saveAppValue("quickSpin",b)):(a.Common.ApplicationBase.instance.emit(q.ON_QUICK_SPIN,!1),a.Common.ApplicationBase.saveAppValue("quickSpin",!1))}),u._gamble=new z("checkbox_gamble",function(b){a.Common.ApplicationBase.saveAppValue("gamble",b)}),u._splashScreen=new z("checkbox_splash",function(b){a.Common.ApplicationBase.saveAppValue("splashScreen",b)}),u._spaceBar=new z("checkbox_spacebar",function(b){a.Common.ApplicationBase.saveAppValue("spaceToSpin",b)}),u._valuesInCoins=new z("checkbox_coin_values",function(b){a.Common.ApplicationBase.saveAppValue("showWinsAsCoins",b),m.formatAsCredits=b,a.Common.ApplicationBase.instance.emit(q.ON_DISPLAY_FORMAT_CHANGE,b),a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,{betLevel:this.betLevel,coinLevel:this.coinLevel})}),u._leftHanded=new z("checkbox_left_handed",function(b){a.Common.ApplicationBase.saveAppValue("leftHandedMode",b),a.Common.ApplicationBase.instance.emit(q.ON_LEFT_HANDED_MODE,b)}),u._sounds=new z("checkbox_soundeffects",function(b){a.Common.ApplicationBase.saveAppValue("soundEffects",b),j.globalSounds.setVolumeFX(b),s()}),u._music=new z("checkbox_music",function(b){a.Common.ApplicationBase.saveAppValue("music",b),j.globalSounds.setVolumeMusic(b),s()}),u._paysPager=new v("pay_page_pager",u.paytablePages),$(u._$div).find("#settings_autospins").on("click",u.onMenuClick.bind(u)),$("#settings_pays").on("click",u.onMenuClick.bind(u)),$("#settings_rules").on("click",u.onMenuClick.bind(u)),$(u._$div).find("#settings_history").on("click",u.onMenuClick.bind(u)),$(u._$div).find("#settings_bets").on("click",u.onMenuClick.bind(u)),$("#settings_general").on("click",u.onMenuClick.bind(u)),$("#button_exit_settings").on("click",u.closeSettingsClick.bind(u)),$(document).on("click","#exit_btn_history",function(){document.getElementById("historyData").innerHTML="",document.getElementById("history_info").innerHTML="",document.getElementById("history_info").style.display="none",document.getElementById("historyData").style.display="block",$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),$("#settings_page_history").hide(),$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),a.Core.Environment.playVibrate(),j.globalSounds.playCue("GENERIC_CLICK"),$("#settings_wrapper").hide(),$("#settings_wrapper").css("display","none"),f.isDesktop()&&$("#balance_wrapper, #bet_wrapper, #win_wrapper").css("color","white"),$("#info_bar").css("z-index","9"),f.isMobile()&&($("#menu_mobile").show(),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden")),a.Common.Server.isPaytableVisible=!1,i.getPageManager("MAIN").closeOverlay(),i.getPageManager("MAIN").showPage("main"),$("#control_panel").css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1),a.Common.ApplicationBase.instance.emit(q.OPTION_STATUS_CHANGED,!1)}),$("#autoplayStartButton").on("click",function(){j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(q.ON_SETTINGS_CLOSED,{autoSpins:u._autoSpinsSlider.getValue()}),u.autoSpinCount=u._autoSpinsSlider.getValue(),$("#button_stop_autospin").css("pointer-events","all"),$("#cp_auto_settings_panel").css("display","none")}),u.on(a.Core.Events.ON_HIDDEN,function(b){b||(a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_SHOW),f.isDesktop()?($(document).find("button_help").removeClass("disabled"),$("#menu_mobile").removeClass("disabled"),$("#info_bar").removeClass("bright"),$("div#game_wrapper").append($("#control_panel")),e.coreEvents.emit(a.Core.Events.ON_APP_RESIZE)):($(document).find("button_help").removeClass("disabled"),$("#menu_mobile").removeClass("disabled")))}),$("#settings_page_autospins").hide(),$("#settings_page_general").hide(),$("#settings_page_bets").hide(),$("#settings_page_rules").hide(),$("#settings_page_pays").hide(),$("#settings_page_history").hide(),u.on(a.Core.Events.ON_SHOWN,u.onShown,u),a.Core.Events.coreEvents.on(a.Core.Events.ON_APP_RESIZE,u.resize,u),u.resize(),u}return __extends(s,d),s.loadGameRules=function(b){f.defaultSettings.languages.indexOf(f.launchVariables.language)<0&&(f.defaultSettings.languages.indexOf(f.launchVariables.language.split("_")[0])>=0?f.launchVariables.language=f.launchVariables.language.split("_")[0]:f.launchVariables.language="en");var c=f.launchVariables.language.toLowerCase();c&&$("#"+c).css("display","block"),$.ajax({type:"GET",url:"assets/locale/rules/rules_"+c+".html?v=1.0.0",success:function(c){$("#settings_page_rules").append(c.replace("{version}","<small><strong>"+a.Common.ApplicationBase.version+"</strong></small>")),b()},error:function(){throw"Can't load game rules"}})},s.prototype.stringtoBoolean=function(a){return"1"===a||"true"===a||"0"!==a&&"false"!==a&&void 0},s.prototype.onShown=function(){this.resize(),this._autoSpinsSlider.setValue(0),this.updatePays(),0===this.autoSpinCount&&(this._$inputLossLimit.setValue(null),this._$inputTotalWinLimit.setValue(null),this._$inputSingleWinLimit.setValue(null),this._stopOnAnyWin.setValue(!1),this._stopOnFeature.setValue(!1)),a.Common.ApplicationBase.instance.emit(q.ON_SETTINGS_OPEN)},s.prototype.onAutoSpinStart=function(a){this.autoSpinCount=a},s.prototype.onAutoEnd=function(){this._stopOnFeature.setValue(!1),this.autoSpinCount=0,$(".checkbox_handle").animate({left:"3px"},200),$("#checkbox_stop_on_any").removeClass("checkbox_on"),$("#checkbox_stop_on_any").addClass("checkbox_off")},s.prototype.closeSettingsClick=function(){a.Core.Environment.playVibrate(),$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),j.globalSounds.playCue("GENERIC_CLICK"),$("#button_help").removeClass("disabled"),$("#settings_wrapper").hide(),$("#settings_wrapper").css("display","none"),f.isDesktop()&&$("#balance_wrapper, #bet_wrapper, #win_wrapper").css("color","white"),$("#button_settings").css("pointer-events","all"),$("#button_settings").removeClass("disabled"),$("#button_settings").removeClass("disabled_settings_item"),$("#info_bar").css("z-index","9"),f.isMobile()&&($("#menu_mobile").show(),p.current.getGameConfig().isAutoPlayDisplay()&&(p.current.getFreeRoundsLeft()?($("#Autoplay_button_wrapper, #Autoplay_btn").show(),$("#Autoplay_button_wrapper, #Autoplay_btn").addClass("disabled"),$("#Autoplay_btn").css("pointer-events","none")):$("#Autoplay_button_wrapper").show()),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden")),a.Common.Server.isPaytableVisible=!1,p.current.getFreeRoundsLeft()?($("#button_bet_button, #button_auto_cp").addClass("disabled"),$("#button_bet_button").css("pointer-events","none"),a.Core.Environment.launchVariables.homeEnabled||($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none"))):($("#button_bet_button").removeClass("disabled"),$("#button_bet_button").css("pointer-events","all"),a.Core.Environment.launchVariables.homeEnabled&&0===this.autoSpinCount&&"none"!==$("#button_spin").css("pointer-events")&&($("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all"))),$("#button_buy_credit").removeClass("disabled"),$("#button_buy_credit").css("pointer-events","all"),$("#button_max").removeClass("disabled"),$("#button_max").css("pointer-events","all"),i.getPageManager("MAIN").closeOverlay(),i.getPageManager("MAIN").showPage("main"),$("#control_panel").css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1),a.Common.ApplicationBase.instance.emit(q.OPTION_STATUS_CHANGED,!1)},s.prototype.onMenuClick=function(b){var d=b.target;if(a.Core.Environment.playVibrate(),void 0===this.prevID||this.prevID!==d.id)switch(this.prevID=d.id,$("#button_exit_settings").removeClass("disabled_settings_item"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$("#settings_rules").removeClass("icon_selected"),$("#settings_pays").removeClass("icon_selected"),$(this._$div).find("#settings_history").removeClass("icon_selected"),$("#settings_general").removeClass("icon_selected"),$(this._$div).find("#settings_bets").removeClass("icon_selected"),d.id){case"settings_autospins":$(this._$div).find("#settings_autospins").addClass("icon_selected"),this.showPage("settings_page_autospins","settings_autoplay_mob"),this._autoSpinsSlider.setValue(0);break;case"settings_general":$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","none"),0!==Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button"),p.current.getGameConfig().isQuickSpinAllowed()?$("#quick_spin").show():$("#quick_spin").hide(),$("#bet_wrapper").css("pointer-events","none"),$("#settings_general").addClass("icon_selected"),this.showPage("settings_page_general","settings_general_mob"),a.Common.ApplicationBase.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!1);break;case"settings_bets":$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob");break;case"settings_pays":$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","block"),0!==Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button"),this.updatePays(),$("#bet_wrapper").removeClass("disabled"),$("#settings_pays").addClass("icon_selected"),this.showPage("settings_page_pays","settings_pays_caps"),a.Common.ApplicationBase.instance.emit(q.PAYTABLE_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(c.SettingsEvents.OPTION_STATUS_CHANGED,!0);break;case"settings_rules":$(".pager-btn, "+this.paytablePagesClassIds).css("display","none"),$("#settings_rules").addClass("icon_selected"),this.showPage("settings_page_rules","settings_rules_mob"),0!=Object.keys(j.globalSounds.getAtlas()).length&&j.globalSounds.playCue("Click_Toggle_Button");break;case"settings_history":$(this._$div).find("#settings_history").addClass("icon_selected"),$("#history_table_wrapper")[0].children.length>0&&($(".tableOuter, #allSpinsRecord, #fgtableOuter, #freeGameData").remove(),document.getElementById("historyData").innerHTML="",document.getElementById("historyData").style.display="block",document.getElementById("history_info").innerHTML="",document.getElementById("history_info").style.display="none"),$(".pager-btn.pager-left, .pager-btn.pager-right, "+this.paytablePagesClassIds).css("display","none"),this.showPage("settings_page_history","History"),$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),j.globalSounds.playCue("Click_Toggle_Button")}},s.prototype.showPage=function(a,b){$(this._$header).find("#settings_page_title").text(g.getPhrase(b)),this._$currentPage&&this._$currentPage.hide();var c=$("#"+a);c.show(),this._$currentPage=c},s.prototype.updatePays=function(){var a=n.getSceneProfile(l.BASE);for(var b in a.get().paytable){var c=a.get().paytable[b];if(c.oak)for(var d in c.oak){var e=c.oak[d].multiplier;e&&("SCATTER"!=c.name?$("#symbol-pays_"+b+d).text(m.format(r.currentBetLevel*e)):$("#symbol-pays_"+b+d).text(m.format(r.getTotalBetCash()*e)))}}this.firstLoad++},s.prototype.showBetPage=function(){a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"),$(this._$div).find("#settings_bets").addClass("icon_selected"),this.showPage("settings_page_bets","settings_bet_mob"),$(this._$div).find("#settings_autospins").removeClass("icon_selected"),$(this._$div).find("#settings_general").removeClass("icon_selected")},s.prototype.showAutoplayPage=function(){this._autoSpinsSlider.setValue(0),this._stopOnFeature.setValue(!1),$(".checkbox_handle").animate({left:"3px"},200),$("#checkbox_stop_on_any").removeClass("checkbox_on"),$("#checkbox_stop_on_any").addClass("checkbox_off")},s.prototype.resize=function(){var a=0;f.isDesktop()?$("body").append(this._$settingsHolder):($("body").append(this._$settingsHolder),a=$(window).width(),$(window).height(),f.isLandscape()?(this._$header.css("width",a-80+"px"),this._$footer.css("width",a-80+"px")):(this._$header.css("width","100%"),this._$footer.css("width","100%")))},s}(d);c.Settings=s;var t=function(){function a(b,c,d){this._value=0,this._currentKeypadValue="",this._clickCount=0,this._$div=$("#"+b),this._$keypadDiv=$("#"+d),this._$keypadDisplay=this._$keypadDiv.find(".keypad_display"),this._onChange=c,this._value=0,a.isKeypadInitialized||this.initKeypad(),this._$div.on("click",function(){a.currentInput=this,this.clearKeypad(),this._$keypadDiv.show()}.bind(this)),this.setValue()}return a.prototype.getDiv=function(){return this._$div},a.prototype.getValue=function(){return 100*this._value},a.prototype.setValue=function(a){if(a!=this._value&&this._onChange(this._value=a?100*a:a),a){var b=m.formatAsCredits;m.formatAsCredits=!1,this._$div.text(m.format(100*a||0)),m.formatAsCredits=b}else this._$div.text("0")},a.prototype.clearKeypad=function(){this._clickCount=0,this._currentKeypadValue="0",this._$keypadDisplay.text(this._currentKeypadValue)},a.prototype.addCharacter=function(a){0==this._clickCount&&(this._currentKeypadValue=""),this._currentKeypadValue.length+1<7&&(this._clickCount++,this._currentKeypadValue+=a,this._$keypadDisplay.text(this._currentKeypadValue))},a.prototype.initKeypad=function(){this._$keypadDiv.find(".keypad_1").on("click",function(){this.addCharacter("1")}.bind(this)),this._$keypadDiv.find(".keypad_2").on("click",function(){this.addCharacter("2")}.bind(this)),this._$keypadDiv.find(".keypad_3").on("click",function(){this.addCharacter("3")}.bind(this)),this._$keypadDiv.find(".keypad_4").on("click",function(){this.addCharacter("4")}.bind(this)),this._$keypadDiv.find(".keypad_5").on("click",function(){this.addCharacter("5")}.bind(this)),this._$keypadDiv.find(".keypad_6").on("click",function(){this.addCharacter("6")}.bind(this)),this._$keypadDiv.find(".keypad_7").on("click",function(){this.addCharacter("7")}.bind(this)),this._$keypadDiv.find(".keypad_8").on("click",function(){this.addCharacter("8")}.bind(this)),this._$keypadDiv.find(".keypad_9").on("click",function(){this.addCharacter("9")}.bind(this)),this._$keypadDiv.find(".keypad_0").on("click",function(){this.addCharacter("0")}.bind(this)),this._$keypadDiv.find(".keypad_dout").on("click",function(){this.addCharacter(".")}.bind(this)),this._$keypadDiv.find(".keypad_cancel").on("click",function(){this.clearKeypad(),this._$keypadDiv.hide()}.bind(this)),this._$keypadDiv.find(".keypad_ok").on("click",function(){this._$keypadDiv.hide(),0==this._currentKeypadValue.length?a.currentInput.setValue(null):a.currentInput.setValue(parseFloat(this._currentKeypadValue)),this.clearKeypad()}.bind(this)),a.isKeypadInitialized=!0},a.isKeypadInitialized=!1,a}();c.NumericInput=t;var u=function(){function b(b,c){void 0===c&&(c=null);var d=this;this._$div=b,this._changeHandler=c,this._$div.on("keydown",function(b){var c=b.key,e=d._$div.val();if(!(-1!==$.inArray(b.keyCode,[8,9,13,27,46])||b.keyCode>=35&&b.keyCode<=39||b.ctrlKey||b.metaKey)){var f=a.Core.Environment.defaultSettings.currencyDecimalPlaces;if("."!==c&&","!==c&&190!==b.keyCode&&110!==b.keyCode){if(!/^[0-9]$/.test(c))return b.preventDefault(),!1;if(f>0&&e.includes(".")){var g=e.indexOf("."),h=e.substring(g+1).length;if(d.getCaretPosition()>g&&h>=f)return b.preventDefault(),!1}if(e.replace(".","").length>=12)return b.preventDefault(),!1;d.callChangeHandler()}else{if(0===f)return b.preventDefault(),!1;if(!/^\d+$/.test(e))return b.preventDefault(),!1;if(e.includes("."))return b.preventDefault(),!1}}}),this._$div.on("input",function(){var a=d.sanitizeInput(d._$div.val());a.replace(".","").length>12&&(a=a.substring(0,12)),d._$div.val(a),d.callChangeHandler()}),this._$div.on("paste",function(a){var b=(a.originalEvent||a).clipboardData.getData("text"),c=d.sanitizeInput(b);c!==b&&(a.preventDefault(),d._$div.val(c),d.callChangeHandler())})}return b.prototype.reset=function(){this._changeHandler&&this._changeHandler(0),this._$div.val("")},b.prototype.callChangeHandler=function(){var b=this;a.Core.Time.juggler.setTimeout(function(){if(b._changeHandler){var a=parseFloat(b._$div.val());b._changeHandler(isNaN(a)?0:a)}},1)},b.prototype.sanitizeInput=function(b){var c=a.Core.Environment.defaultSettings.currencyDecimalPlaces,d=b.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1").replace(/^0+(\d)/,"$1");if(0===c)d=d.split(".")[0];else if(d.includes(".")){var e=d.split("."),f=e[0],g=e[1].substring(0,c);d=f+"."+g}return d},b.prototype.getCaretPosition=function(){var a=this._$div.get(0);return a&&null!=a.selectionStart?a.selectionStart:this._$div.val().length},b}();c.MoneyInput=u;var v=function(){function a(a,b){var c=this;this._idx=0,this.hideAll=function(){return c._$pages.forEach(function(a){return a.hide()})},this.updatePage=this.updatePage.bind(this),this._$div=$("#"+a),this._$nextBtn=this._$div.find(".pager-right"),this._$prevBtn=this._$div.find(".pager-left"),this._$text=this._$div.find(".pager-text"),this._$pages=b.map(function(a){return $("#"+a)}),this._$nextBtn.on("click",function(a){return c.updatePage(c._idx+1)},this.paginationNum()),this._$prevBtn.on("click",function(a){return c.updatePage(c._idx-1)},this.paginationNum()),this.hideAll(),this.updatePage(this._idx)}return a.prototype.updatePage=function(a){var b=j.globalSounds.getAtlas();0===Object.keys(b).length||j.globalSounds.playCue("Click_Toggle_Button"),this._$pages[this._idx].hide(),this._idx=a,this._idx<0?this._idx=this._$pages.length-1:this._idx>=this._$pages.length&&(this._idx=0),this._$pages[this._idx].show(),this._$text.text(this._idx+1+"/"+this._$pages.length)},a.prototype.paginationNum=function(){function a(){j.globalSounds.playCue("GENERIC_CLICK"),$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c--,0===c&&(c=d),$("#index"+c).addClass("paginatonIndexOver"+c)}function b(){j.globalSounds.playCue("GENERIC_CLICK"),$("#index"+c).removeClass("paginatonIndexOver"+c),$("#index"+c).addClass("paginatonIndex"+c),c%=d,c++,$("#index"+c).addClass("paginatonIndexOver"+c)}var c=1,d=f.defaultSettings.totalPaytablePages;$(".pager-left").on("click",a),$(".pager-right").on("click",b)},a}();c.PagerWidget=v;var w=function(){function b(b){this._currentIndex=0,this._$div=$("#"+b),this._$value=$(this._$div.find(".value")),this._$buttonNext=$(this._$div.find(".button_next")),this._$buttonPrev=$(this._$div.find(".button_prev")),this._$buttonPrev.on("click",function(){var b=this;f.isDesktop()&&(a.Common.Server.isBetClickOnce=!0),-1==this._currentIndex&&(this._currentIndex=this._values.length-1),0==this._currentIndex&&(this._currentIndex=this._values.length),a.Common.Server.isBetClickOnce&&this._currentIndex>0&&(a.Core.Environment.playVibrate(),j.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex-1]),f.isMobile()&&(this._$buttonPrev.css("visibility","hidden"),a.Core.Time.juggler.setTimeout(function(){b._$buttonPrev.css("visibility","visible")},100)),a.Common.Server.isBetClickOnce=!1)}.bind(this)),this._$buttonNext.on("click",function(){var b=this;f.isDesktop()&&(a.Common.Server.isBetClickOnce=!0),this._currentIndex==this._values.length-1&&(this._currentIndex=-1),a.Common.Server.isBetClickOnce&&this._currentIndex<this._values.length-1&&(a.Core.Environment.playVibrate(),j.globalSounds.playCue("plus_minus"),this.setValue(this._values[this._currentIndex+1]),f.isMobile()&&(this._$buttonNext.css("visibility","hidden"),a.Core.Time.juggler.setTimeout(function(){b._$buttonNext.css("visibility","visible")},100)),a.Common.Server.isBetClickOnce=!1)}.bind(this))}return b.prototype.getValue=function(){return this._values[this._currentIndex]},b.prototype.setMax=function(){this.setValue(this._values[this._values.length-1])},b.prototype.setValue=function(a,b){var c=a!=this.getValue();this._currentIndex=this._values.indexOf(a),this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},b.prototype.setIndex=function(a,b){this._currentIndex=a,this.showValue(),!b&&this.onChange&&this.onChange()},b.prototype.setValues=function(a,b){this._values=a,this._valueLabels=b,this._currentIndex=0,this.setValue(this._values[0])},b.prototype.setText=function(a){this._$value.text(a)},b.prototype.showValue=function(){this._$value.text(this._valueLabels[this._currentIndex]),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._currentIndex===this._values.length-1?(this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none")):0===this._currentIndex&&(this._$buttonPrev.addClass("disabled"),this._$buttonPrev.css("pointer-events","none"))},b}();c.StepperWidget=w;var x=function(b){function c(c){var d=b.call(this,c)||this;return d.calculateValues=function(){var a=d.calculateTotalBetCombos(r.betLevels),b=[];a.forEach(function(a){b.push(m.format(a.totalBet))}),d.setValues(a,b)},d.calculateValues(),d.onChange=function(b){r.currentBetLevel=b.betLevel,a.Common.ApplicationBase.instance.emit(q.ON_BET_CHANGE,b)},a.Common.ApplicationBase.instance.on(q.ON_BET_CHANGE,function(a){a.betLevel&&(r.currentBetLevel=a.betLevel);var b=r.getTotalBetCash();this.setValue(b,!0)}.bind(d)),d}return __extends(c,b),c.prototype.showValue=function(){b.prototype.showValue.call(this),
this._values.length>0&&(this._$value.text(m.format(this._values[this._currentIndex].totalBet)),f.isMobile()&&a.Common.Server.isbetSelect&&$("#cp_bet").text(m.format(this._values[this._currentIndex].totalBet)))},c.prototype.setValue=function(a,b){for(var c=a!=this.getValue(),d=0;d<this._values.length;d++)if(this._values[d].totalBet==a){this._currentIndex=d;break}this.showValue(),!b&&c&&this.onChange&&this.onChange(a)},c.prototype.calculateTotalBetCombos=function(a){for(var b=[],c=0;c<a.length;c++)b.push({betLevel:a[c],totalBet:a[c]*r.fixedBet});b.sort(function(a,b){return a.totalBet>b.totalBet?1:a.totalBet<b.totalBet?-1:0});var d=0,e=[];return b.forEach(function(a){a.totalBet!=d&&e.push(a),d=a.totalBet}),JSON.parse(JSON.stringify(e))},c}(w);c.StepperTotalBet=x;var y=function(){function b(a){this._value=a.betLevel,this._valueLabel=a.totalBet;var b=this.getIndexOfBet(this._value);this._$div='<div class="show-bet" id='+b+">"+m.format(Number(this._valueLabel))+"</div>"}return b.prototype.selectedBet=function(){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:this._value,totalBet:this._valueLabel})},b.prototype.changeSelectedBet=function(a){a.betLevel==this._value?this._$div.addClass("current-bet"):this._$div.removeClass("current-bet")},b.prototype.getValue=function(){return this._value},b.prototype.getIndexOfBet=function(a){return p.current.getGameConfig().getBetValues().indexOf(a)+1},b.prototype.setValue=function(a,b){this.getValue();this.showValue()},b.prototype.setValues=function(a){this._value=a.betLevel,this._valueLabel=a.totalBet,this.setValue(this._value)},b.prototype.getDiv=function(){return this._$div},b.prototype.showValue=function(){this._$div.text(this._valueLabel)},b}();c.BetButtonWidget=y;var z=function(){function a(a,b){this._$div=$("#"+a),this._onChange=b,this._$div.addClass("checkbox"),this._$div.append("<div class='checkbox_handle'></div>"),this._$handle=this._$div.find(".checkbox_handle"),this._$div.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),this.setValue(!this._value)}.bind(this))}return a.prototype.setValue=function(a){this._value=a,this._value?(this._$handle.animate({left:"35px"},200),this._$div.removeClass("checkbox_off"),this._$div.addClass("checkbox_on")):(this._$handle.animate({left:"3px"},200),this._$div.removeClass("checkbox_on"),this._$div.addClass("checkbox_off")),this._onChange(this._value)},a.prototype.getValue=function(){return this._value},a}();c.CheckboxWidget=z;var A=function(){function b(a,c,d,e,g){this._minValue=0,this._maxValue=1,this._isMouseDown=!1,this._$div=$("#"+a),this._$div.addClass("slider"),this._$div.append('\n        <div class="value_label">Label</div>\n        <div class="groove-container">\n            <div class="min_label">0</div>\n            <div class="groove">\n                <div class="lit"></div>\n                <div class="handle"></div>\n            </div>\n            <div class="max_label">1</div>\n        </div>\n    '),this._onDisplay=e||function(a){return a},this._clamp=g||1,this._minValue=c,this._maxValue=d,this._$handle=$(this._$div.find(".handle")),this._$litBar=$(this._$div.find(".lit")),this._$groove=$(this._$div.find(".groove")),this._$labelMin=$(this._$div.find(".min_label")),this._$labelMax=$(this._$div.find(".max_label")),this._$labelValue=$(this._$div.find(".value_label")),this._$labelMin.text(this._onDisplay(c)),this._$labelMax.text(this._onDisplay(d)),$(document).on("mouseup",function(a){this._isMouseDown=!1}.bind(this)),this._$div.find(".groove-container").on("mousedown",function(a){this._isMouseDown=!0;var c=this._$groove.offset();this.calcValue((a.clientX-c.left)*(1/b.scaleFactor))}.bind(this)),this._$div.on("touchmove",function(a){var b=this._$groove.offset();this.calcValue(a.originalEvent.touches[0].clientX-b.left)}.bind(this)),f.isDesktop()?this._$div.on("mousemove",function(a){if(this._isMouseDown){var c=this._$groove.offset();this.calcValue((a.originalEvent.clientX-c.left)*(1/b.scaleFactor))}}.bind(this)):(this._$div.find(".groove-container").on("touchstart",function(a){this._isTouchDown=!0;var c=this._$groove.offset();this.calcValue((a.originalEvent.touches[0].clientX-c.left)*(1/b.scaleFactor))}.bind(this)),this._$div.on("touchmove",function(a){if(this._isTouchDown){var c=this._$groove.offset();this.calcValue((a.originalEvent.touches[0].clientX-c.left)*(1/b.scaleFactor))}}.bind(this)),this._$div.on("touchend",function(a){this._isTouchDown=!1}.bind(this))),this.setValue(0)}return b.prototype.getValue=function(){return this._value},b.prototype.setValue=function(a){this._value=a,this._$labelValue.text(this._onDisplay(a));var b=(a-this._minValue+1)/(this._maxValue-this._minValue+1)*100;this._$litBar.css("width",b+"%"),this._$handle.css("left",b-6+"%"),this.onChange&&this.onChange(a)},b.prototype.enable=function(a){a?this._$div.removeClass("disabled"):this._$div.addClass("disabled")},b.prototype.calcValue=function(b){var c=b/this._$groove.outerWidth(),d=1.3*c*(this._maxValue-this._minValue)+this._minValue,e=this._clamp;d<this._minValue+e?d=this._minValue:d>this._maxValue-e&&(d=this._maxValue),this.setValue(a.Core.Maths.roundToNearest(d,e))},b.scaleFactor=1,b}();c.SliderWidget=A}(b.SettingsPages||(b.SettingsPages={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Time.Juggler,d=a.Common.GameEvents,e=a.Common.SceneProfile,f=a.Core.Renderer.Stage,g=a.Core.Lang,h=a.Common.Currency,i=PIXI.Graphics,j=a.Common.Server.ResponseResult,k=a.Common.Server,l=a.Core.SoundManager,m=a.Core.Renderer.UI.StandardText,n=function(h){function m(f,g){var i=h.call(this)||this;if(i._reels=[],i._wasSpinInterrupted=!1,i._allSymbols=[],i._symbolProfiles={},i._reelsSpinning=0,i._reelOverlays=[],i._assets=f,i._juggler=new c(!0),!g)throw"[Aperture] Required parameter 'sceneId' missing in Aperture constructor in layout.  Valid constructor is : Aperture(assets, sceneId)";return i._sceneProfile=e.getSceneProfile(g),i.once(a.Core.Events.ON_DESTROY,i.onDestroy),i.once(a.Core.Events.ON_CREATE,i.onCreate),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_INTERRUPT_SPIN,i.onInterruptSpin,i),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,i.onWinsShown,i),a.Common.ApplicationBase.instance.on(d.ON_GET_GAME_RESULTS,i.onGameResults,i),a.Common.ApplicationBase.instance.on(d.ON_GET_CLEAR_ALL_SCREEN,i.onGameResults,i),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){this._juggler._isActive=!1}.bind(i)),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_QUICK_SPIN,function(a){j.current&&j.current.getGameConfig().isQuickSpinAllowed()?m.isQuickSpin=a:m.isQuickSpin=!1}.bind(i)),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_MODIFY_APERTURE_START,i.hideReel,i),i}return __extends(m,h),m.prototype.onDestroy=function(){a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_INTERRUPT_SPIN,this.onInterruptSpin),a.Common.ApplicationBase.instance.off(d.ON_GET_GAME_RESULTS,this.onGameResults),a.Common.ApplicationBase.instance.off(d.ON_RESULTS_DISPLAYED,this.onWinsShown),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinsShown),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_MODIFY_APERTURE_START,this.hideReel),this._reels.forEach(function(a){a.destroy(),a=null})},m.prototype.onCreate=function(b){var c=this;if(this._setup=b.params,!this._setup.symbols)throw"[Aperture] Missing 'symbols' property in Aperture setup";for(var d in this._sceneProfile.get().paytable)this._symbolProfiles[d]=new u(d,this._setup.symbols[d],this._sceneProfile.get().paytable[d]);this._behindReels=new PIXI.Container,this.addChild(this._behindReels);var e=this._setup.reel_spacing/2,f=0;this._allSymbols=[],this._setup.reels.forEach(function(b){var d=b.strip.split(","),g=new a.Slots.Reel(c,c._assets,b,d,c._juggler,c._setup.isCascadeSpin,c._setup.reelStopSequence);c._reels.push(g),g.x=e,c._setup.alignTop&&b.top_margin?g.y=b.top_margin:g.y=0,e+=c._setup.reel_spacing,c.addChild(g),g.mask=new i,g.mask.beginFill(16777215),g.mask.drawRect(-c._setup.reel_spacing/2,b.top_margin,c._setup.reel_spacing,b.height),g.mask.endFill(),g.mask.pivot.set(.5,.5),g.addChild(g.mask),c._allSymbols=c._allSymbols.concat(g.getVisibleSymbols()),g.reelIndex=f++})},m.prototype.createReelOverlays=function(){var a=this;this._reelOverlays=[];var b=this._setup.reel_spacing/2;this._setup.reels.forEach(function(c,d){var e=a._setup.alignTop&&c.top_margin?c.top_margin:0,f=new PIXI.Graphics;f.beginFill(0,a._setup.noWinSymbolOverlayAlpha||.5),f.drawRect(-a._setup.reel_spacing/2,e,a._setup.reel_spacing,c.height),f.endFill(),f.x=b,f.visible=!1,a.addChild(f),a._reelOverlays.push(f),b+=a._setup.reel_spacing})},m.prototype.showReelOverlays=function(a){this._reelOverlays&&0!==this._reelOverlays.length&&this._reelOverlays.forEach(function(b){b.visible=a})},m.prototype.onWinsShown=function(){this._juggler.timeMultiplier=1,this.stopSymbolAnimations()},m.prototype.onGameResults=function(){this.stopSymbolAnimations()},m.prototype.getBackContainer=function(){return this._behindReels},m.prototype.stopSymbolAnimations=function(){this.showReelOverlays(!1),this.applyToSymbols(function(a){a.stopAnimation()})},m.prototype.startSpin=function(b){var c=this;void 0===b&&(b=!1),this._setup.isCascadeSpin&&(j.current.getNextAction()==k.RE_SPIN||j.current.isFreeReSpin())||l.globalSounds.playCue("ReeL_spin"),this._spinTime=(new Date).getTime(),this._wasSpinInterrupted=!1,this.showReelOverlays(!1),a.Common.ApplicationBase.instance.emit(d.ON_PLAYER_PROMPT,g.getPhrase("@footer_no_win")),this.applyToSymbols(function(a){a.fadeIn()}),this._juggler.timeMultiplier=m.isQuickSpin?this._setup.quickSpinMultiplier:this._setup.spinMultiplier,this._reels.forEach(function(a){c._setup.isCascadeSpin?a.startCascadeSpin(b):a.startSpin(b),a.alpha=1}),a.Common.ApplicationBase.instance.emit(m.EVENT_REELS_SPIN_START,b)},m.prototype.dropSymbols=function(b,c){var d=this;this.alpha=1;var e=(new Date).getTime(),f=1;if(!this._setup.isCascadeSpin){f=100,this._spinTime&&(f=(j.current.getGameConfig().getSpinDuration()||1e3)-(e-this._spinTime));for(var g=0;g<this._setup.reels.length;g++)f-=1e3*this._setup.reels[g].animation.drop.bounce_time,f-=1e3*this._setup.reels[g].animation.drop.back_delay,f-=1e3*this._setup.reels[g].animation.drop.delay;(f<0||!b.isNextGameBase()||!b.isBaseGame())&&(f=m.isQuickSpin?100:500)}a.Core.Time.juggler.setTimeout(function(){d.showResults(b,c)},f)},m.prototype.getSymbolProfile=function(a){if(this._symbolProfiles[a])return this._symbolProfiles[a];throw"[Aperture] Symbol id does not exist in aperture symbols setup : "+a},m.prototype.getSymbolCounts=function(){var a={};return this.applyToSymbols(function(b){a[b.symbolId]=a[b.symbolId]||0,a[b.symbolId]++}),a},m.prototype.getReel=function(a){return this._reels[a]},m.prototype.getAllSymbols=function(){return this._allSymbols},m.prototype.getSpinningReelsCount=function(){var a=0;return this.applyToReels(function(b){b.isSpinning()&&a++}),a},m.prototype.getSymbols=function(a){var b=[];return a.forEach(function(a){b.push(this.getSymbolAtPosition(a.getReelIndex(),a.getRowIndex()))}.bind(this)),b},m.prototype.getAbsolutePositionCentre=function(a){var b=this._setup.reel_spacing,c=this._reels[a.getReelIndex()].getSymbol(a.getRowIndex()+1).height-50;return new PIXI.Point(b/2+a.getReelIndex()*b,-c/2+a.getRowIndex()*c)},m.prototype.getSymbolAtPosition=function(a,b){return this._reels[a].getSymbol(b+1)},m.prototype.getPositionCentre=function(a,b,c){return c=c||f.instance,this.getSymbolAtPosition(a,b).getLocalCoords(c)},m.prototype.getPositionCentreList=function(a,b){b=b||f.instance;var c=[];return a.forEach(function(a){c.push(this.getPositionCentre(a.getReelIndex(),a.getRowIndex(),b))}.bind(this)),c},m.prototype.restoreAperture=function(a,b){void 0===b&&(b=!0);var c=0;a.forEach(function(a){this._reels[c++].setSymbols(a,b)}.bind(this))},m.prototype.updateAperture=function(a,b){var c=this;a&&a.length>0&&a.forEach(function(a){c._reels[a.getPosition().getReelIndex()].changeSymbols(a.getSymbol(),a.getPosition().getRowIndex())}),b&&b.length>0&&b.forEach(function(a){for(var b=c._reels[a.getReelIndex()]._setup.symbols_per_reel;b>0;)c._reels[a.getReelIndex()].changeSymbols(a.getSymbol(),--b)})},m.prototype.onInterruptSpin=function(){this._wasSpinInterrupted=!0,this._juggler.timeMultiplier=this._setup.interruptSpinMultiplier},m.prototype.onStopReelSpinning=function(){this._wasSpinInterrupted=!0,this._reels.forEach(function(a){a.isSpinning()&&a.animateReelStop()})},m.prototype.applyToSymbols=function(a){this._allSymbols.forEach(a)},m.prototype.applyToReels=function(a){this._reels.forEach(a)},m.prototype.showResults=function(b,c){function d(){if(m.isQuickSpin&&(j=0),f._wasSpinInterrupted){j=0;for(var b=0;b<f._reels.length;b++)h=f._setup.reelStopSequence[b],e();a.Common.ApplicationBase.instance.emit(m.EVENT_REEL_DROPPED,f._reels,f._wasSpinInterrupted)}else f._setup.reelStopSequence.indexOf(h)!=f._setup.reelStopSequence.length-1&&(h=f._setup.reelStopSequence[f._setup.reelStopSequence.indexOf(h)+1],j=i,e())}function e(e){var i,k=f._reels[h];if(g=f.getSymbolCounts(),f._wasSpinInterrupted&&a.Common.ApplicationBase.instance.emit(m.EVENT_REELS_DROPPED,b),!f._setup.hideAnticipation&&!f._wasSpinInterrupted&&h>1)for(var l in g){var n=g[l],o=f.getSymbolProfile(l);o.doTease(f._setup.teaseSymbolIds,l,n)&&function(b){i=b,j=0,f._juggler.timeMultiplier=4,a.Common.ApplicationBase.instance.emit(m.EVENT_TEASE_REEL,k,i)}(o)}k.dropSymbols(i,b.aperture.getStrip(h+1),function(e){f._allSymbols=f._allSymbols.concat(k.getVisibleSymbols()),--f._reelsSpinning>0?f._juggler.setTimeout(function(){d()},j):f._juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(m.EVENT_REELS_DROPPED,b),c&&c()},i?550:j)})}var f=this;this._allSymbols=[];var g,h=f._setup.reelStopSequence[0],i=1e3*this._reels[0]._setup.animation.drop.delay,j=i;this._reelsSpinning=this._reels.length,e()},m.prototype.hideReel=function(a){this._reels[a].alpha=0},m.prototype.showReel=function(a){this._reels[a].alpha=1},Object.defineProperty(m.prototype,"isSpinning",{get:function(){return this._reelsSpinning>0},enumerable:!0,configurable:!0}),m.prototype.getReelStopSequence=function(){return this._setup.reelStopSequence},m.EVENT_REEL_DROPPED="aperture_reel_dropped",m.EVENT_SYMBOL_DROPPED="aperture_symbol_dropped",m.EVENT_TEASE_REEL="aperture_tease_reel",m.EVENT_TEASE_REEL_END="aperture_tease_reel_end",m.EVENT_REELS_DROPPED="aperture_all_reels_dropped",m.EVENT_REELS_SPIN_START="aperture_reels_start",m}(PIXI.Container);b.Aperture=n;var o=function(b){function c(a,c,d){var e=b.call(this)||this;return e._setup=d,e._assets=c,e._aperture=a,e._static=new PIXI.Sprite,e.addChild(e._static),e._aperture._setup.coin_value_data&&(e._prizeFrame=new PIXI.Sprite,e._aperture._setup.coin_value_data.offsetF?(e._prizeFrame.x+=e._aperture._setup.coin_value_data.offsetF.x,e._prizeFrame.y+=e._aperture._setup.coin_value_data.offsetF.y):(e._prizeFrame.x+=e._aperture._setup.coin_value_data.offset.x,e._prizeFrame.y+=e._aperture._setup.coin_value_data.offset.y),e._prizeFrame.visible=!1,e.addChild(e._prizeFrame),e._prize=new m("",e._aperture._setup.coin_value_data.font),e._prize.x+=e._aperture._setup.coin_value_data.offset.x,e._prize.y+=e._aperture._setup.coin_value_data.offset.y,e.addChild(e._prize)),e.scale.set(e._aperture._setup.default_symbol_scale||1),e._originalPosition=e.position,e}return __extends(c,b),c.prototype.getSymbolProfile=function(){return this._symbolProfile},c.prototype.fadeOut=function(){this.alpha=.4},c.prototype.fadeIn=function(){this.alpha=1},c.prototype.onDropped=function(){var a=this;if(this._aperture._setup.isCascadeSpin){var b=this.y;TweenMax.to(this,.05,{y:"+=3",yoyo:!0,repeat:2,onComplete:function(){a.y=b}})}},c.prototype.setSymbol=function(b,c){if(void 0===c&&(c=!0),this.symbolId=b,this._symbolProfile=this._aperture.getSymbolProfile(this.symbolId),this._static.texture=this._assets.getPIXITexture(this._symbolProfile.getTextureId()),this._static.anchor.x=.5,this._static.anchor.y=.5,this._symbolProfile.isInFront()&&this.parent.addChild(this),this._prize)if(this._symbolProfile.getCoinValue())if(!isNaN(this._symbolProfile.getCoinValue())&&this._symbolProfile.getCoinValue()>0){var d=a.Common.Currency.format(this._symbolProfile.getCoinValue()*a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),!0);for(this._prize.setText(d),this._prize.scale.set(1,1);this._prize.width>.57*this.width;)this._prize.scale.x-=.05,this._prize.scale.y-=.05}else isNaN(this._symbolProfile.getCoinValue())?(this._prize.setText(this._symbolProfile.getCoinValue().toString()),this._prize.scale.set(1,1)):c&&(this._prize.setText(""),this._prizeFrame.visible=!1);else c&&(this._prize.setText(""),this._prizeFrame.visible=!1)},c.prototype.setSymbolPrize=function(a){this._prize.setText(a),a&&""!=a&&this._prizeFrame.texture?this._prizeFrame.visible=!0:this._prizeFrame.visible=!1},c.prototype.getSymbolPrize=function(){return this._prize?this._prize.text:""},c.prototype.setSymbolPrizeFrame=function(a,b){void 0===b&&(b=1),a?(this._prizeFrame.texture=this._assets.getPIXITexture(a),this._prizeFrame.anchor.x=.5,this._prizeFrame.anchor.y=.5,this._prizeFrame.scale.set(b,b),this._prizeFrame.visible=!0):this._prizeFrame.visible=!1},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.stopAnimation=function(){this.alpha=1,this.visible=!0,this._originalPosition&&(this.position=this._originalPosition)},c.prototype.symbolRemoveAnimate=function(a){var b;return this.stopAnimation(),a=a||this._symbolProfile.getRemoveClipId(),a&&(b=this._assets.getMovieClip(a,!0))&&b.scale.set(this._setup.default_symbol_scale||1),b},c.prototype.animate=function(b){var c,d,e,f,g=1;if(this.stopAnimation(),b=b||this._symbolProfile.getMovieClipId(),this._symbolProfile.getFrameClipId()&&(c=this._assets.getMovieClip(this._symbolProfile.getFrameClipId(),!0)),b&&a.Common.ApplicationBase.allAssetsLoaded?(d=this._assets.getMovieClip(b,!0),this.visible=!1):(this.visible=!1,d=new PIXI.Sprite(this._static.texture)),this._prize){if(!isNaN(this._symbolProfile.getCoinValue())&&this._symbolProfile.getCoinValue()>0){var h=this._symbolProfile.getCoinValue()*a.Slots.SettingsPages.BettingSetup.getTotalBetCash();for(f=new m(a.Common.Currency.format(h,!0),this._aperture._setup.coin_value_data.font,!1);f.width>.57*this._static.texture.width;)f.scale.x-=.05,f.scale.y-=.05}else isNaN(this._symbolProfile.getCoinValue())?f=new m(a.Common.Currency.format(this._symbolProfile.getCoinValue(),!0),this._aperture._setup.coin_value_data.font,!1):""!=this._prize.text&&(f=new m(this._prize.text,this._aperture._setup.coin_value_data.font,!1));this._prizeFrame.texture&&(e=new PIXI.Sprite(this._prizeFrame.texture),g=this._prizeFrame.scale.x)}return{animationClip:d,frameClip:c,prizeText:f,prizeFrame:e,prizeFrameScale:g}},c}(PIXI.Container);b.Symbol=o;var p=function(b){function c(c,d,e,f,g,h,i){var j=b.call(this)||this;j.rowIndex=0,j._symbols=[],j._speedM=1,j._isSpinning=!1,j._wasInterrupted=!1,j.spinDuration=0,j._section=0,j.isCascadeWinSpin=!1,j.afterCascadeReel=[],j._assets=d,j._setup=e,j._strip=f,j._juggler=g,j._aperture=c,j.isCascadeSpin=h,j.reelStopSequence=i,j._container=new PIXI.Container,j.addChild(j._container),j._symbolHeight=j._setup.height/j._setup.symbols_per_reel;for(var k=a.Core.Maths.getRandomRange(1,f.length-(j._setup.symbols_per_reel+3),!0),l=-1;l<=j._setup.symbols_per_reel;l++){var m=new a.Slots.Symbol(c,j._assets,j._setup);j._container.addChild(m),m.y=(l+1.5)*j._symbolHeight+(j._setup.top_margin||0),j._symbols.push(m),m.setSymbol(f[l+k])}return j._section=0,j.isCascadeSpin?j.changeCascadeSection(!0):j.changeSection(!0),j._symbolTransitionUpto=j.isCascadeSpin||j._setup.down?0:-j._symbolHeight,j._blur=new PIXI.filters.BlurFilter,j._blur.blurX=0,j._blur.blurY=0,j}return __extends(c,b),c.prototype.destroy=function(){this._juggler.remove(this)},c.prototype.dropInstant=function(a,b){if(this._isSpinning){this._juggler.remove(this),this._container.filters=null,this._isSpinning=!1;for(var c=-1;c<=this._setup.symbols_per_reel;c++)this._symbols[c+1].setSymbol(a[c+1]);this._container.y=1*-this._symbolHeight,TweenLite.to(this._container,1,{y:-this._symbolHeight,ease:Linear.easeIn,onComplete:function(){void 0!==b&&b()}})}},c.prototype.isSpinning=function(){return this._isSpinning},c.prototype.getLocalCoords=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,0)))},c.prototype.getCentroid=function(b){return b=b||a.Core.Renderer.Stage.instance,b.toLocal(this.toGlobal(new PIXI.Point(0,this._setup.height/2)))},c.prototype.getVisibleSymbols=function(){return this._symbols.slice(1,this._symbols.length-1)},c.prototype.getSymbolIds=function(){var a=[];return this._symbols.forEach(function(b){a.push(b.symbolId)}),a},c.prototype.startSpin=function(a){var b=this;this._isSpinning||(this.spinDuration=0,this._wasInterrupted=!1,this._finalSymbols=null,this.position.y=0,this._isSpinning=!0,TweenLite.to(this._container,this._setup.animation.start.ramp_time||0,{y:this._container.y+(this._setup.animation.start.ramp_distance||0)*(this._setup.down?-1:1),ease:Power1.easeIn,delay:this._setup.animation.start.delay,onComplete:function(){b._setup.motion_blur&&(b._container.filters=[b._blur]),b._juggler.add(b),b._speedM=0,TweenLite.to(b,b._setup.animation.start.back_delay||1,{_speedM:n.isQuickSpin?1:b._setup.animation.accel_speed||1,ease:Power1.easeOut,onComplete:function(){}})}}))},c.prototype.startCascadeSpin=function(a){var b=this;this._isSpinning||(this._wasInterrupted=!1,this._finalSymbols=null,this.position.y=0,this._isSpinning=!0,this.isCascadeWinSpin=j.current.getNextAction()==k.RE_SPIN||j.current.isFreeReSpin(),a&&(j.current.getAction()==k.BASE||j.current.getAction()==k.FREE_SPINS&&!j.current.isFreeReSpin()?this.isCascadeWinSpin=!1:j.current.getAction()==k.RE_SPIN&&j.current.getNextAction()!=k.RE_SPIN&&(this.isCascadeWinSpin=!0)),this.isCascadeWinSpin?(this.afterCascadeReel=j.current.getGridAfterCascadeWin()[this.reelIndex],this._juggler.add(this),TweenLite.to(this,1,{_speedM:n.isQuickSpin?1:this._setup.animation.accel_speed||1})):(this.afterCascadeReel=[],TweenLite.to(this._container,this._setup.animation.start.ramp_time||0,{y:2*this._container.y,ease:Power1.easeInOut,delay:this._setup.animation.start.delay,onComplete:function(){b._juggler.add(b),TweenLite.to(b,1,{_speedM:n.isQuickSpin?1:b._setup.animation.accel_speed||1})}})))},c.prototype.getSymbolCount=function(a){var b=0;return this.applyToSymbols(function(c){c.symbolId===a&&b++}),b},c.prototype.setSymbols=function(a,b){void 0===b&&(b=!0);var c=0;this._symbols.forEach(function(d){d.setSymbol(a[c++],b)})},c.prototype.changeSymbols=function(a,b){this._symbols[b+1].setSymbol(a)},c.prototype.getSymbol=function(a){return this._symbols[a]},c.prototype.dropSymbols=function(b,c,d){var e=this;this._onStopped=d,this._teaseSymbolProfile=b,b?(a.Core.Time.juggler.setTimeout(function(){e._finalSymbols=c.slice()},b.getTeaseDuration(this.reelIndex)),b.mimicNearMiss()&&(TweenLite.to(this,1,{y:this.y-this._symbolHeight*(this._setup.animation.tease_peek||1),ease:Linear.easeIn}),c[0]=b.getId())):this._finalSymbols=c.slice()},c.prototype.applyToSymbols=function(a){this.rowIndex=0,this.getVisibleSymbols().forEach(a)},c.prototype.onUpdate=function(a){this.spinDuration+=a,this.isCascadeSpin?this.isCascadeWinSpin?this.changeCascadeSection():(this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>this._symbolTransitionUpto&&this.changeCascadeSection()):(this._setup.down?(this._container.y+=this._setup.animation.spin_speed*a*this._speedM,this._container.y>this._symbolTransitionUpto&&(this._container.y=this._symbolTransitionUpto),this._container.y>=0&&this.changeSection()):(this._container.y-=this._setup.animation.spin_speed*a*this._speedM,this._container.y<this._symbolTransitionUpto&&(this._container.y=this._symbolTransitionUpto),this._container.y<=this._symbolTransitionUpto&&this.changeSection()),this._setup.motion_blur&&(this._blur.blurY=this._setup.motion_blur))},c.prototype.changeSection=function(a){if(void 0===a&&(a=!1),this._setup.down||a){this._container.y-=this._symbolHeight,this._section--,this._section<0&&(this._section=this._strip.length-1);for(var b=void 0,c=void 0,d=this._symbols.length-1;d>0;d--)b=this._symbols[d-1],c=this._symbols[d],b&&c.setSymbol(b.symbolId);if(this._finalSymbols){if(this._setup.animation.stop_speed&&this._setup.animation.stop_speed>0){var e=this._setup.animation.stop_speed;this._speedM=this._speedM>e?this._speedM-e:.1,this._blur.blurY=0}this._symbols[0].setSymbol(this._finalSymbols.pop()),this._finalSymbols.length||this.animateReelStop()}else this._symbols[0].setSymbol(this._strip[this._section])}else{this._container.y+=this._symbolHeight,this._section++,this._section>=this._strip.length&&(this._section=0);for(var b=void 0,c=void 0,d=0;d<this._symbols.length-1;d++)b=this._symbols[d+1],c=this._symbols[d],b&&c.setSymbol(b.symbolId);if(this._finalSymbols){if(this._setup.animation.stop_speed&&this._setup.animation.stop_speed>0){var e=this._setup.animation.stop_speed;this._speedM=this._speedM>e?this._speedM-e:.1,this._blur.blurY=0}var f=this._finalSymbols[0];this._finalSymbols=this._finalSymbols.slice(1,this._finalSymbols.length),this._symbols[this._symbols.length-1].setSymbol(f),this._finalSymbols.length||this.animateReelStop()}else this._symbols[this._symbols.length-1].setSymbol(this._strip[this._section])}},c.prototype.changeCascadeSection=function(a){if(void 0===a&&(a=!1),a&&(this._container.y-=this._symbolHeight),this._finalSymbols&&this._finalSymbols.length>0){if(this.isCascadeWinSpin){for(var b=0;b<this._finalSymbols.length;b++)this._symbols[b].setSymbol(this._finalSymbols[b]);this._finalSymbols=[]}else{for(var c=void 0,d=void 0,e=this._symbols.length-1;e>0;e--)c=this._symbols[e-1],d=this._symbols[e],c&&d.setSymbol(c.symbolId);this._symbols[0].setSymbol(this._finalSymbols.pop())}this._finalSymbols.length||this.animateCascadeReelStop()}},c.prototype.animateCascadeReelStop=function(){function b(){if(a.Common.ApplicationBase.instance.emit(n.EVENT_REEL_DROPPED,c,c._wasInterrupted),c.afterCascadeReel.indexOf("BL")>=0)for(var b=!1,d=c.getVisibleSymbols().length-1;d>=0;d--)c.afterCascadeReel.length>0&&"BL"!=c.afterCascadeReel[c.rowIndex]&&(b=!0),b&&c.getVisibleSymbols()[d].onDropped(),a.Common.ApplicationBase.instance.emit(n.EVENT_SYMBOL_DROPPED,c.getVisibleSymbols()[d],c),c.rowIndex++;else c.applyToSymbols(function(b){a.Common.ApplicationBase.instance.emit(n.EVENT_SYMBOL_DROPPED,b,c),c.rowIndex++})}var c=this;this._isSpinning=!1,this._juggler.remove(this),this._container.filters=null,this.isCascadeWinSpin?(this._container.y-=this._setup.animation.drop.bounce_distance,TweenLite.to(this._container,this._setup.animation.drop.cascade_bounce_time||.1,{y:-c._symbolHeight,ease:Power1.easeInOut,onComplete:function(){b(),c._onStopped(c)}})):(c.reelIndex<c._aperture._setup.reels.length-1&&c._onStopped(c),this._container.y=-2*this._setup.symbols_per_reel*c._symbolHeight,TweenLite.to(this._container,this._setup.animation.drop.bounce_time||1,{y:-c._symbolHeight,ease:Power1.easeInOut,onComplete:function(){b(),c.reelIndex==c._aperture._setup.reels.length-1&&c._onStopped(c)}}))},c.prototype.animateReelStop=function(){function b(){a.Common.ApplicationBase.instance.emit(n.EVENT_REEL_DROPPED,d,d._wasInterrupted),d.applyToSymbols(function(b){b.onDropped(),a.Common.ApplicationBase.instance.emit(n.EVENT_SYMBOL_DROPPED,b,d),d.rowIndex++})}var c=this,d=this;this._isSpinning=!1,this._juggler.remove(this),this._container.filters=null,this._setup.animation.drop?(a.Core.SoundManager.globalSounds.playCue("REEL_DROP"),this._container.y=-d._symbolHeight+this._setup.animation.drop.bounce_distance*(this._setup.down?1:-1),this.reelStopSequence[this.reelStopSequence.length-1]!=this.reelIndex&&d._onStopped(d),TweenLite.to(this._container,this._setup.animation.drop.bounce_time,{y:-d._symbolHeight,delay:this._setup.animation.drop.back_delay,ease:Power1.easeInOut,onComplete:function(){b(),c.reelStopSequence[c.reelStopSequence.length-1]==c.reelIndex&&(d._onStopped(d),c._teaseSymbolProfile&&a.Common.ApplicationBase.instance.emit(n.EVENT_TEASE_REEL_END,c))}})):(this._container.y=-d._symbolHeight,b(),d._onStopped(d),a.Common.ApplicationBase.instance.emit(n.EVENT_TEASE_REEL_END,this))},c}(PIXI.Container);b.Reel=p;var q=function(){function a(a){this._aperture=a}return a.prototype.getStrip=function(a){return this._aperture[a-1]},a.prototype.getReelCount=function(){return this._aperture.length},a.prototype.getVisibleStrip=function(a){var b=this.getStrip(a);return b.slice(1,b.length-1)},a.prototype.getAperture=function(){return this._aperture},a.prototype.getVisibleAperture=function(){var b=[];return this._aperture.forEach(function(a){b.push(a.slice(1,a.length-1))}),new a(b)},a.prototype.isSymbolVisible=function(a,b){return this.getVisibleStrip(b).indexOf(a)>-1},a.prototype.getOccurrences=function(a,b){var c=[];b=b||this._aperture.length;for(var d=1;d<b;d++)this.isSymbolVisible(a,d)&&c.push(d);return c},a}();b.ApertureResponse=q;var r=function(){function a(a){this._wins=[],this.result=a,this.aperture=new q(a.getGrid()),a.getWinDetails()&&a.getWinDetails().length>0&&(a.getWinDetails().sort(function(a,b){return b.win-a.win}),a.getWinDetails().forEach(function(a){this._wins.push(new s(a))}.bind(this)))}return a.prototype.hasScatterWin=function(){for(var a=0;a<this._wins.length;a++)if(this._wins[a].getType()==s.TYPE_SCATTER)return!0;return!1},a.prototype.getResult=function(){return this.result},a.prototype.getFeatureWin=function(){var a;return this.applyToAllWins(function(b){b.getFeatureId()&&(a=b)}),a},a.prototype.applyToAllWins=function(a){this.getWins().forEach(a)},a.prototype.getWins=function(){return this._wins.slice()},a.prototype.setWins=function(a){this._wins=a},a.prototype.getSingleWin=function(){return this._wins[0]},a.prototype.getWinCount=function(){return this._wins.length},a.prototype.getAction=function(){return this.result.getAction()},a.prototype.getNextAction=function(){return this.result.getNextAction()},a.prototype.getTotalWin=function(){return this.result.getTotalWin()},a.prototype.isBaseGame=function(){return this.result.getAction()==k.BASE},a.prototype.isNextGameBase=function(){return this.result.getNextAction()==k.BASE},a.prototype.isFreeSpinGame=function(){return this.result.getAction()==k.FREE_SPINS},a.prototype.isActionMatch=function(a){return this.result.getAction()===a},a.prototype.getGameRoundWin=function(){return this.result.getGameRoundWin()},a.prototype.getMultiplier=function(){return this.result.getMultiplier()||1},a.prototype.getExpandingReels=function(){return this.result.getExpandingReels()},a.prototype.getModifierSymbolPosition=function(){return this.result.getModifierSymbolPosition()},a.prototype.isRoundFinished=function(){return this.result.isGameRoundOver()},a.prototype.getBuyoutFeature=function(){return this.result.getBuyoutFeature()},a}();b.SpinResults=r;var s=function(){function a(a){this._data=a}return a.prototype.getFeatureId=function(){return this._data.feature},a.prototype.getPositions=function(){return this._data.positions},a.prototype.getLine=function(){return this._data.line||0},a.prototype.getType=function(){return this._data.type},a.prototype.getWinCash=function(){return this._data.win||0},a.prototype.getSymbolId=function(){return this._data.symbol},a.prototype.getOAK=function(){return this._data.oak},
a.prototype.getDescription=function(){var b;switch(this.getType()){case a.TYPE_LINE:b=g.getPhrase("line_x_wins_caps",{line:this.getLine(),win:h.format(this.getWinCash())});break;default:b=g.getPhrase("way_wins_caps",{symbol:this.getSymbolId(),win:h.format(this.getWinCash())})}return b},a.TYPE_LINE="LINE",a.TYPE_WAY="WAY",a.TYPE_SCATTER="SCATTER",a}();b.SlotWin=s;var t=function(){function a(a){this.rule=a.rule,this._oak=a.oak}return a.prototype.getOAKMultiplier=function(a){return this._oak?this._oak["x"+a]:0},a}();b.SymbolPays=t;var u=function(){function a(a,b,c){this._data=b,this._data.id=a,this._data.pays=c}return a.prototype.getCoinValue=function(){return this._data.pays.coin_value},a.prototype.isInFront=function(){return this._data.bring_to_front},a.prototype.getAnimationDuration=function(){return this._data.animation.duration},a.prototype.getId=function(){return this._data.id},a.prototype.getTextureId=function(){return this._data.texture},a.prototype.getMovieClipId=function(){return this._data.animation.clip?this._data.animation.clip:null},a.prototype.getRemoveClipId=function(){return this._data.animation.remove},a.prototype.getMovieClipOffsets=function(){return this._data.animation.offsets||{x:0,y:0}},a.prototype.getDropClipId=function(){return this._data.animation.drop},a.prototype.getReelDropClipId=function(){return this._data.animation.reelDrop},a.prototype.getActiveClipId=function(){return this._data.animation.active},a.prototype.getSpineId=function(){return this._data.animation.spineId},a.prototype.getFrameClipId=function(){return this._data.animation.frame},a.prototype.getAudioDropId=function(){return this._data.audio.drop},a.prototype.getAudioWinId=function(){return this._data.audio.win},a.prototype.getPays=function(){return new t(this._data.pays)},a.prototype.mimicNearMiss=function(){return!!this._data.tease&&Math.random()<=(this._data.tease.near_miss||0)},a.prototype.getTeaseDuration=function(a){return this._data.tease.duration[a]||1e3},a.prototype.getTeaseAudioId=function(a){return this._data.tease&&this._data.tease.audio?this._data.tease.audio[a]?this._data.tease.audio[a]:this._data.tease.audio[0]:null},a.prototype.doTease=function(a,b,c){return this._data.tease&&Object.keys(a).indexOf(b)>=0&&a[b]<=c},a}();b.SymbolProfile=u}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Utils.Queue,d=a.Common.SceneProfile,e=a.Common.GameEvents,f=a.Core.Lang,g=a.Common.Currency,h=a.Core.Time.Juggler,i=a.Common.Server.ResponseResult,j=a.Core.Utils.convertToAmount,k=a.Core.Utils,l=a.Core.Environment,m=a.Common.Server,n=a.Core.SoundManager,o=function(o){function p(c,f){var g=o.call(this)||this;if(g._isSkip=!1,g._idleCycling=!1,g._currentWinMultiplier=1,g._assets=c,g._juggler=new h(!0),!f)throw"[WinManager] Required parameter 'gameId' missing in WinManager constructor in layout.  Valid constructor is : WinManager(assets, gameId)";return g._sceneProfile=d.getSceneProfile(f),g.once(a.Core.Events.ON_DESTROY,g.onDestroy,g),g.once(a.Core.Events.ON_CREATE,g.onCreate,g),a.Common.ApplicationBase.instance.on(e.ON_GAME_CHANGED,g.onGameChanged,g),a.Common.ApplicationBase.instance.on(e.ON_GET_GAME_RESULTS,g.onPlayerBet,g),a.Common.ApplicationBase.instance.on(e.ADD_CELEBRATIONS,g.addCelebrationAnimations,g),a.Common.ApplicationBase.instance.on(p.STOP_SYMBOLS_ANIMATION,g.buttonClicked,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_START,g.onAutoStart,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_END,g.onAutoEnd,g),a.Common.ApplicationBase.instance.on(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,g.onAutoEnd,g),a.Common.ApplicationBase.instance.on(e.ON_GET_CLEAR_ALL_SCREEN,g.onPlayerBet,g),a.Common.ApplicationBase.instance.on(p.EVENT_FREE_SPINS_END,g.onAutoStart,g),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_SPIN_START,g.onSpinStart,g),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){g._juggler._isActive=!1}),g.setupWinTypes({BIG_WIN:l.defaultSettings.bigWinRange,SUPER_WIN:l.defaultSettings.superWinRange,MEGA_WIN:l.defaultSettings.megaWinRange,AMAZING_WIN:l.defaultSettings.amazingWinRange}),g}return __extends(p,o),p.prototype.onCreate=function(b,c){var d=this;this._layout=c,this._setup=b.params,this._sceneObject=c.getParentScene(),this._aperture=c.getComponent(this._setup.aperture),this._paylineRenderer=c.getComponentPlugin(this,this._setup.payline_renderer),this._symbolAnimation=c.getComponentPlugin(this,this._setup.symbol_animator),this._movingWild=c.getComponentPlugin(this,this._setup.moving_wild_animator),this._modifiedSymbols=c.getComponentPlugin(this,this._setup.modifier_symbol_animator),this._expandingSymbolReels=c.getComponentPlugin(this,this._setup.expanding_reel_animator),this._animationLayer=new PIXI.Container,this._aperture.addChild(this._animationLayer),a.Core.Utils.touchToSkip(function(){d._isSkip&&d.stopWinDisplay()}),this.winSummaryDelay=3e3,this._setup.win_summary_duration&&(this.winSummaryDelay=this._setup.win_summary_duration)},p.prototype.getExpandingSymbolReels=function(){return this._expandingSymbolReels},p.prototype.getModifiedSymbols=function(){return this._modifiedSymbols},p.prototype.getSceneObject=function(){return this._sceneObject},p.prototype.onDestroy=function(){this.removeAllListeners(),a.Common.ApplicationBase.instance.off(e.ON_GAME_CHANGED,this.onGameChanged),a.Common.ApplicationBase.instance.off(e.ON_GET_GAME_RESULTS,this.onPlayerBet),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_START,this.onAutoStart),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_END,this.onAutoEnd),a.Common.ApplicationBase.instance.off(b.ControlPanel.EVENT_AUTO_SPINS_ENDS,this.onAutoEnd),a.Common.ApplicationBase.instance.off(p.STOP_SYMBOLS_ANIMATION,this.buttonClicked),a.Common.ApplicationBase.instance.off(e.ON_GET_CLEAR_ALL_SCREEN,this.onPlayerBet),a.Common.ApplicationBase.instance.off(e.ADD_CELEBRATIONS,this.addCelebrationAnimations)},p.prototype.setupWinTypes=function(a){this._winBandSetup=a},p.prototype.onSpinStart=function(a){!a&&this._movingWild&&i.current.getFeatureReelModifiersSymbols()&&this._movingWild.addMovingWildSymbol(i.current.getFeatureReelModifiersSymbols()),this._modifiedSymbols&&i.current.getFeatureReelModifiersSymbols()&&this._modifiedSymbols.addModifierSymbols(i.current.getFeatureReelModifiersSymbols()),this._expandingSymbolReels&&i.current.getFeatureExpandingReels()&&this._expandingSymbolReels.addExpandingSymbolReels(i.current.getFeatureExpandingReels()),this._animationLayer.removeChildren()},p.prototype.getWinBand=function(b){var c=(j(b),null);for(var d in this._winBandSetup){if(!(b>=this._winBandSetup[d]*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))break;c=d}return c},p.prototype.onAutoEnd=function(){this._idleCycling=!0,this._isAutoPlay=!1},p.prototype.onAutoStart=function(){this._idleCycling=!1,this._isAutoPlay=!0},p.prototype.onGameChanged=function(){this.stopWinDisplay(),this._idleCycling=i.current.getAction()==m.BASE||i.current.getAction()==m.RE_SPIN},p.prototype.onPlayerBet=function(){this.stopWinDisplay()},p.prototype.getAperture=function(){return this._aperture},p.prototype.addModifySymbolBeforeReelStop=function(a,b){this._modifiedSymbols&&a.getModifierSymbolPosition()?this._modifiedSymbols.addModifierSymbols(a.getModifierSymbolPosition(),b):b()},p.prototype.displaySpinResults=function(d,h){var j=this,n=new k.Queue(this._juggler);this.visible=!0,a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,"");var o=k.touchToSkip(function(){n.skip()}.bind(this)),q=d.getTotalWin(),r=d.getWins(),s=d.getWins(),t=d.getFeatureWin();this._expandingSymbolReels&&d.getExpandingReels()&&n.add(function(a){j._expandingSymbolReels.addExpandingSymbolReels(i.current.getExpandingReels(),a)}),(d.getModifierSymbolPosition()||d.getExpandingReels())&&n.add(function(a){j.updateGridFeatureAfterReelStop(i.current.getModifierSymbolPosition(),a)}),n.add(function(a){j._aperture.updateAperture(d.getModifierSymbolPosition(),j._expandingSymbolReels?i.current.getExpandingReels():[]),j._currentWinMultiplier=d.getMultiplier(),j._modifiedSymbols&&j._modifiedSymbols.removeAnimations(),j._movingWild&&j._movingWild.removeAnimations(),j._expandingSymbolReels&&j._expandingSymbolReels.removeAnimations(),j._animationLayer.removeChildren(),a()}),d.isRoundFinished()&&(d.getAction()==m.RE_SPIN||d.isBaseGame())&&d.getGameRoundWin()>0&&this.addCelebrationAnimations(d.getGameRoundWin(),n),d.getNextAction()!=m.BASE||d.getAction()!=m.BASE&&d.getAction()!==m.RE_SPIN||n.add(function(b){a.Common.ApplicationBase.instance.emit(m.SEND_ROUND_END),b()}),r.length>0?(this.visible=!0,n.add(function(b){j.getAperture().showReelOverlays(!0),a.Common.ApplicationBase.instance.emit(p.EVENT_SHOW_WIN_SUMMARY,d),a.Common.ApplicationBase.instance.emit(p.EVENT_WIN_PRESENTATION_START),j._setup.showPlayerMessages&&q>0&&j._juggler.setTimeout(function(){r.length>1?a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,f.getPhrase("player_wins_x_caps",{win:g.format(q)})):a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT_WIN,r[0])},j.winSummaryDelay-1e3),j._juggler.setTimeout(function(){j.winSummaryEnd=!0,j._paylineRenderer&&j._paylineRenderer.onWinPresentationComplete(),b()},j.winSummaryDelay)})):(this.visible=!1,this.winSummaryEnd=!0);var u;!this._setup.hideWinToggle&&s.length>1&&!(this._isAutoPlay||d.isFreeSpinGame()||this._aperture._setup.isCascadeSpin&&b.Aperture.isQuickSpin)&&n.add(function(b){var d=new c(j._juggler);s.forEach(function(b){b.getFeatureId()&&b.getWinCash()<=0||d.add(function(c){a.Common.ApplicationBase.instance.emit(p.EVENT_SHOW_WIN,b,!0,j._aperture.getSymbolProfile(b.getSymbolId()),!1),j._setup.showPlayerMessages&&b.getWinCash()&&b.getWinCash()>0?a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT_WIN,b):a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT," "),u=j._juggler.setTimeout(c,j._aperture.getSymbolProfile(b.getSymbolId()).getAnimationDuration()||j._setup.win_display_duration)})}),d.start(b)},!0),n.add(function(a){u&&u.stop(),a()}),t&&n.add(function(b){j._isSkip=!0,t.getPositions().length>0&&(a.Common.ApplicationBase.instance.emit(p.EVENT_SHOW_WIN,t,!0,j._aperture.getSymbolProfile(t.getSymbolId()),!1),a.Common.ApplicationBase.instance.emit(e.ON_PLAYER_PROMPT,f.getPhrase("@congratulations_caps")),u=j._juggler.setTimeout(b,j._aperture.getSymbolProfile(t.getSymbolId()).getAnimationDuration()||j._setup.win_display_duration))},!0),n.add(function(a){u&&u.stop(),a()}),n.add(function(b){a.Common.ApplicationBase.instance.emit(p.EVENT_WIN_PRESENTATION_END,d),b()}),s.length>0&&this._aperture._setup.isCascadeSpin&&(d.getNextAction()===m.RE_SPIN||d.getNextAction()===m.FREE_SPINS&&i.current.isFreeReSpin())&&n.add(function(b){a.Common.ApplicationBase.instance.emit(p.EVENT_REMOVE_WIN_SYMBOLS,d),j._juggler.setTimeout(function(){b()},j._setup.win_remove_duration||1e3)}),n.start(function(){o(),n.wasSkipped&&this.stopWinDisplay(),!l.launchVariables.isReplay||d.getNextAction()!=m.BASE||d.getAction()!=m.BASE&&d.getAction()!==m.RE_SPIN||a.Common.ApplicationBase.instance.emit(m.SEND_CLOSE_REPLAY_REQUEST),h()}.bind(this))},p.prototype.updateGridFeatureAfterReelStop=function(b,c){if(i.current.getAction().includes(m.HOLD_FREE_SPINS)){var d=[];b.forEach(function(a){d.push(a.getPosition())}),this._symbolAnimation.onCoinSymbolDrop(d),a.Core.Time.juggler.setTimeout(function(){c()},1500)}else c()},p.prototype.stopWinDisplay=function(){this._isSkip=!1,this._aperture.stopSymbolAnimations(),this._paylineRenderer&&this._paylineRenderer.onWinPresentationComplete(),this._cycleDelay&&this._cycleDelay.stop(),this.visible=!1,this._juggler.purge()},p.prototype.buttonClicked=function(){this._idleCycling=!1,this.stopWinDisplay()},p.prototype.addCelebrationAnimations=function(b,c){var d=this.getWinBand(b);d&&c.add(function(c){a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay(d,{win:b,celebrationEnd:!0,callback:c,OnComplete:function(){n.globalSounds.playCue("celebration_end"),a.Core.Environment.playVibrate(1e3);var b=a.Core.SoundManager.globalSounds.startMusic("music_base",1500);void 0!=b&&b.volume(1),"false"===a.Common.ApplicationBase.getValues("music")&&n.globalSounds.setVolumeMusic(!1)}})},250)})},p.EVENT_SHOW_WIN="win_manager_show_win",p.EVENT_SHOW_WIN_SUMMARY="win_manager_show_win_summary",p.EVENT_WIN_PRESENTATION_END="win_manager_presentation_complete",p.EVENT_MODIFY_APERTURE_START="win_manager_modifier_start",p.EVENT_WIN_PRESENTATION_START="win_manager_display_win",p.EVENT_FREE_SPINS_END="free_spins_feature_end",p.STOP_SYMBOLS_ANIMATION="stop_symbols_animation",p.EVENT_SHOW_FEATURE_WIN_SUMMARY="show_feature_win_summary",p.SHOW_BUY_FEATURE_UI="show_buy_feature_summary",p.HIDE_BUY_FEATURE_UI="hide_buy_feature_summary",p.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY="show_broken_feature_win_summary",p.EVENT_REMOVE_WIN_SYMBOLS="remove_win_symbols",p.DISABLE_BET_BUTTONS="disable_bet_button",p.ENABLE_BET_BUTTONS="enable_bet_button",p}(PIXI.Container);b.WinManager=o}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),__assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},DO;!function(a){!function(b){!function(c){var d=a.Core.HTML.Page,e=a.Core.Events,f=a.Core.Environment,g=a.Common.Server,h=a.Common.GameEvents,i=a.Core.Lang,j=a.Core.SoundManager,k=a.Common.Currency,l=a.Common.Server.ServerTime,m=a.Common.PlayerMonitoring,n=a.Slots.SettingsPages.BettingSetup,o=a.Core.Time.Juggler,p=a.Core.Utils.formatTime,q=a.Common.Server.ResponseResult,r=a.Slots.SettingsPages.SettingsEvents,s=a.Core.Utils.convertToAmount;c.EVENT_HIDE="panel_hide",c.SHOW_AUTO_PLAY_DIALOG="show_auto_dialog",c.EVENT_SHOW="panel_show",c.EVENT_SHOW_WIN="panel_show_win",c.EVENT_UPDATE_FEATURE_DISPLAY="panel_update_feature_display",c.EVENT_DISABLE="panel_disable",c.EVENT_NO_TOUCHES="panel_no_touches",c.EVENT_INTERRUPT_SPIN="panel_interrupt_spin",c.EVENT_STOP_SPIN="panel_stop_spin",c.EVENT_AUTO_SPIN="panel_auto_spin",c.EVENT_AUTO_SPIN_STOP="auto_spin_stop",c.EVENT_AUTO_SPINS_START="panel_auto_spins_start",c.EVENT_AUTO_SPINS_END="panel_auto_spins_end",c.EVENT_AUTO_SPINS_ENDS="panel_auto_spins_ends",c.EVENT_QUIT_GAME="panel_quit_game",c.EVENT_SPACE_BAR="panel_space_bar",c.EVENT_RE_SPIN_BUTTON_HIDE="re_spin_button_disable",c.EVENT_BET_PANEL_CLOSE="bet_panel_close",c.EVENT_AUTO_PANEL_CLOSE="auto_panel_close",c.HIDE_PANEL_IN_BROKEN="hide_panel_in_broken",c.SHOW_PANEL_IN_BROKEN="show_panel_in_broken",c.PAYTABLE_SHOW_HIDE_BUTTONPANEL="hide button panel",c.DIV_POINTER="hide button panel",c.RESPIN="hide button panel",c.AUTO_SPINS_BUTTON_ENABLE="auto_spins_button_enable",c.UPDATE_WIN_AMOUNT="update_win_amount",c.PLAY_IDLE_ANIMATIONS="play_idle_animations",c.CLOSE_SPLASH_SCREEN="close_splash_screen";var t=function(d){function t(l,n){var p=d.call(this,l,n)||this;return p._autoSpins=0,p.firstLoad=!0,p.isSpinStarted=!1,p.realityCheckInterval=null,p.stopClickAnyWhere=!1,p.isRealityCheckActive=!1,p._juggler=new o(!0),p._isLeftHanded=1==a.Common.ApplicationBase.getAppValue("leftHandedMode"),e.coreEvents.on(e.ON_APP_RESIZE,p.onResize,p),p.onResize(),p.setupWinTypes({BIG_WIN:f.defaultSettings.bigWinRange,SUPER_WIN:f.defaultSettings.superWinRange,MEGA_WIN:f.defaultSettings.megaWinRange,AMAZING_WIN:f.defaultSettings.amazingWinRange}),a.Common.ApplicationBase.instance.on(h.ON_GAME_INITIALIZED,function(){q.current.isBrokenGameSate()?(q.current.getGameConfig().isAutoPlayDisplay()&&q.current.getAction()!=g.FREE_SPINS&&$("#button_auto_cp").addClass("disabled").css("display","block"),q.current.getAction()!=g.BASE&&q.current.getGameRoundWin()>0?(p._$textWin.text(k.format(q.current.getGameRoundWin())),p._$textWin.show(),p._$winWrapper.css("visibility","visible")):(p._$textWin.hide(),p._$winWrapper.css("visibility","visible"))):(p._$textWin.hide(),p._$winWrapper.css("visibility","visible"));var b=q.current.getGameConfig().getAutoPlayValues();p.autoSettingsPanel=new u("cp_auto_settings_panel"),p.betSettingsPanel=new w("cp_bet_settings_panel"),p._$autoSpinsSlider=new a.Slots.SettingsPages.SliderWidget("cp_slider_autospin_count",0,b[b.length-1],null,5),p._$autoSpinsSlider.onChange=function(b){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,b)},setInterval(p.updateTimeDisplay.bind(p),15e3),p.updateTimeDisplay(),a.Core.Environment.launchVariables.displayHistory?$("#button_history").css("display","block"):$("#button_history").css("display","none"),""==f.launchVariables.homeUrl?$("#button_home").css("display","none"):$("#button_home").css("display","block"),a.Core.Environment.launchVariables.homeEnabled?($("#button_home").css("pointer-events","all"),$("#button_home").removeClass("disabled")):($("#button_home").css("pointer-events","none"),$("#button_home").addClass("disabled"))}),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_CASH_LOSS,p.onCashLossAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_SINGLE_CASH_WIN,p.onSingleWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_TOTAL_CASH_WIN,p.onTotalWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_FEATURE_STOP,p.onFeatureStopAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_STOP_ON_ANY_WIN,p.onAnyWinAlarm,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_REALITY_CHECK,p.onRealityCheck,p),a.Common.ApplicationBase.instance.on(m.INSUFFICIENT_FUND,p.oninsufficientFund,p),a.Common.ApplicationBase.instance.on(m.EVENT_ALARM_BROKEN_MSG,p.onBrokenAlarm,p),a.Common.ApplicationBase.instance.on(c.RESPIN,p.startSpin,p),a.Common.ApplicationBase.instance.on(c.PAYTABLE_SHOW_HIDE_BUTTONPANEL,p.paytableShowHidePanel,p),a.Common.ApplicationBase.instance.on(m.EVENT_CHECK_MAX_CAP,p.onMaxCap,p),a.Common.ApplicationBase.instance.on(a.Common.Server.HANDLE_HISTORY_RESPONSE,function(a){new v(a)},p),a.Common.ApplicationBase.instance.on(c.EVENT_HIDE,p.hidePanel,p),a.Common.ApplicationBase.instance.on(c.SHOW_AUTO_PLAY_DIALOG,p.showAutoplayDialog,p),a.Common.ApplicationBase.instance.on(c.EVENT_SHOW,p.showPanel,p),a.Common.ApplicationBase.instance.on(c.EVENT_UPDATE_FEATURE_DISPLAY,p.onUpdateFeatureDisplay,p),a.Common.ApplicationBase.instance.on(h.ON_GET_GAME_RESULTS,p.onGetGameResults,p),a.Common.ApplicationBase.instance.on(h.ON_GET_CLEAR_ALL_SCREEN,p.onGetGameResults,p),a.Common.ApplicationBase.instance.on(h.ON_RESULTS_READY,p.onResultsReady,p),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_DROPPED,p.onReelsDropped,p),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL,p.onReelTease,p),a.Common.ApplicationBase.instance.on(c.EVENT_AUTO_SPIN_STOP,p.stopAutoSpinsukgc,p),a.Common.ApplicationBase.instance.on(c.EVENT_RE_SPIN_BUTTON_HIDE,p.disable,p),a.Common.ApplicationBase.instance.on(c.EVENT_BET_PANEL_CLOSE,p.removeBet,p),a.Common.ApplicationBase.instance.on(c.EVENT_AUTO_PANEL_CLOSE,p.removeAutoPanel,p),a.Common.ApplicationBase.instance.on(c.HIDE_PANEL_IN_BROKEN,p.hidePanelInBrokenPopUp,p),a.Common.ApplicationBase.instance.on(c.SHOW_PANEL_IN_BROKEN,p.showPanelInBrokenPopUp,p),a.Common.ApplicationBase.instance.on(c.AUTO_SPINS_BUTTON_ENABLE,p.enableButtonAutoSpins,p),a.Common.ApplicationBase.instance.on(h.ON_PLAYER_PROMPT,p.onPlayerPrompt,p),a.Common.ApplicationBase.instance.on(c.DIV_POINTER,p.divpointer,p),a.Common.ApplicationBase.instance.on(h.UPDATE_BALACE,p.updateBalance,p),a.Common.ApplicationBase.instance.on(h.ON_CONTINUE_GAME,p.onContinueGame,p),a.Common.ApplicationBase.instance.on(h.SPIN_BUTTON_ANIMATION_START,p.playAnimation,p),a.Common.ApplicationBase.instance.on(h.SPIN_BUTTON_ANIMATION_STOP,p.stopAnimation,p),a.Common.ApplicationBase.instance.on(a.Slots.ControlPanel.EVENT_DISABLE,function(a){a?p.disable():p.enable()}),p.spinButtonAnimation=$("#button_spin_animation"),p.stopAnimation(),$("#settings_wrapper").css("display","none"),a.Common.ApplicationBase.instance.on(a.Core.Events.ON_APP_EXCEPTION,function(){p._juggler._isActive=!1}),a.Common.ApplicationBase.instance.on(c.EVENT_SHOW_WIN,function(a){a&&(p._$textWin.text(k.format(a)),p._$textWin.show(),p._$winWrapper.css("visibility","visible"),p._$textWin.addClass("win_update_throb"))}),a.Common.ApplicationBase.instance.on(c.EVENT_QUIT_GAME,function(){a.Common.ApplicationBase.instance.emit(g.SEND_LOBBY_REQUEST);var b=decodeURIComponent(a.Core.Environment.launchVariables.homeUrl);if(b&&!a.Core.Environment.launchVariables.preventRedirect)if(a.Core.Environment.launchVariables.redirectTarget)switch(a.Core.Environment.launchVariables.redirectTarget){case"parent":window.parent.location.href=b;break;case"top":window.top.location.href=b;break;default:window.location.href=b}else window.location.href=b;else window===window.parent&&window.close()}),a.Common.ApplicationBase.instance.on(c.EVENT_NO_TOUCHES,p.onNoTouches,p),a.Common.ApplicationBase.instance.on(c.CLOSE_SPLASH_SCREEN,p.splashClose,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,p.onSettingsClosed,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_OPEN,p.onSettingsOpen,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_DISPLAY_FORMAT_CHANGE,function(b){p._$textBalance.text(k.format(q.current.getBalance())),q.current&&q.current.getTotalWin()&&p._$textWin.text(k.format(q.current.getTotalWin())),p._$textBet.text(k.format(a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))}),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_START,function(){a.Core.Time.juggler.setTimeout(function(){p.onDisplayWin()},q.current.getAction().includes(g.BONUS)?100:2250)}),a.Common.ApplicationBase.instance.on(h.ON_GAME_CHANGED,p.onGameChanged,p),a.Common.ApplicationBase.instance.on(h.ON_GAME_READY,p.onGameReady,p),a.Common.ApplicationBase.instance.on(h.ON_GET_GAME_RESULTS,p.disable,p),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,function(b){f.isDesktop()&&p._$autoSettingsPanel.hide(),f.isMobile()&&!a.Common.Server.isbetSelect&&p._$textBet.text(k.format(b.totalBet)),f.isDesktop()&&p._$textBet.text(k.format(b.totalBet)),a.Common.ApplicationBase.instance.emit(g.SEND_UPDATE_STAKE,b.totalBet)}),e.coreEvents.on(j.EVENT_SET_MUTE,function(a){a?(p.soundON=!1,$(document).find("#button_audio").removeClass("audio_on"),$(document).find("#button_audio").addClass("audio_off"),$(document).find("#button_audio_screen").removeClass("audio_on_screen"),$(document).find("#button_audio_screen").addClass("audio_off_screen")):(p.soundON=!0,$(document).find("#button_audio").removeClass("audio_off"),$(document).find("#button_audio").addClass("audio_on"),$(document).find("#button_audio_screen").removeClass("audio_off_screen"),$(document).find("#button_audio_screen").addClass("audio_on_screen"))}),$(document).on("click","#fullScreen",function(a){j.globalSounds.playCue("GENERIC_CLICK"),document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_LEFT_HANDED_MODE,function(a){p._isLeftHanded=a,p.onResize()}),a.Common.ApplicationBase.instance.on(g.HANDLE_INIT_RESPONSE,function(){$("#info_bar .left-info .right_text_title").text(i.getPhrase("game_title")),"UKGC"!==q.current.getGameConfig().getJurisdiction()||a.Common.ApplicationBase.getAppValue("splashScreen")&&f.defaultSettings.isSplashScreen&&!q.current.isBrokenGameSate()&&!q.current.getFreeRounds()||(p.sessionStartTime=Date.now(),p.startTimer(),q.current&&q.current.getGameConfig()&&$("#net_position_wrapper").css("display","block"),$("#elapsed_time_wrapper .elapsed_time").text(i.getPhrase("elapsed_time",{etime:"00:00:00"})),$("#elapsed_time_wrapper").css("display","block"),$("#control_panel").css("opacity","1"))}),$(document).on("click touchend",function(b){"click"!=b.type||"renderer_canvas"!=b.target.id&&"banner1"!=b.target.id&&"control_panel"!=b.target.id||(f.isDesktop()?"block"==$("#cp_bet_settings_panel").css("display")&&"click"==b.type&&a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE):"visible"!=$("#mobileBetPanel").css("visibility")&&"visible"!=$("#green-base").css("visibility")||($("#green-base").css("visibility","hidden"),f.isMobile()&&p._$div.css("pointer-events","none"),p._$buttonWrapper.show(),p._$betbtnWrapper.show(),p._$buttonSettings.show(),p.$_showBetPanel.show(),p.removeBet(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled"),j.globalSounds.playCue("GENERIC_CLICK"))),"click"!==b.type&&"touchend"!==b.type&&"renderer_canvas"!==b.target.id||"button_bett"===b.target.id||!isNaN(Number(b.target.id))||"button_auto_cp"===b.target.id||"checkbox_splash"===b.target.id||"quick_spin"===b.target.id||"checkbox_stop_on_any"===b.target.id||"cp_auto_total_win_limit"===b.target.id||"cp_auto_loss_limit"===b.target.id||"slider_autospin_count"===b.target.id||"settings_autospin_inputs"===b.target.id||"cp_auto_single_win_limit"===b.target.id||"cp_auto_settings_panel"===b.target.id||"settings_pays"===b.target.id||"cp_bet_settings"===b.target.id||"settings_icon_holder"===b.target.id||"bet-frame"===b.target.id||"mobileBetPanel"===b.target.id||"settings_wrapper"===b.target.id||"settings_page_rules"===b.target.id||"settings_pages"===b.target.id||"renderer_canvas_loader"===b.target.id||"button_settings"===b.target.id||"settings_page_general"===b.target.id||"settings_page_pays"===b.target.id||"settings_general"===b.target.id||"settings_rules"===b.target.id||"checkbox_quickspin"===b.target.id||"checkbox_music"===b.target.id||"checkbox_soundeffects"===b.target.id||b.target.id.toString().includes("symbol-pays_")||b.target.id.toString().includes("pay")||p.stopClickAnyWhere||p.closeAllPanels()}),$(document).on("click","#menu_mobile",function(b){var c=document.getElementById("green-base");f.isMobile()&&!f.isDesktop()&&$(p._$div).find(".local_time").css("z-index","100000"),"hidden"==c.style.visibility||""==c.style.visibility?(a.Core.Environment.playVibrate(),c.style.visibility="visible",f.isMobile()&&p._$div.css("pointer-events","all"),p._$buttonWrapper.hide(),p._$betbtnWrapper.hide(),p._$buttonSettings.hide(),p.$_showBetPanel.hide(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.hide(),$(document).find("#menu_mobile").removeClass("disabled"),$(document).find("#button_help").removeClass("disabled"),a.Core.Environment.launchVariables.homeEnabled||($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),$("#button_exit_settings").css("pointer-events","all"),j.globalSounds.playCue("GENERIC_CLICK")):(c.style.visibility="hidden",$("#info_bar").css("z-index","9"),f.isMobile()&&p._$div.css("pointer-events","none"),p._$buttonWrapper.show(),p._$betbtnWrapper.show(),p._$buttonSettings.show(),p.$_showBetPanel.show(),q.current.getGameConfig().isAutoPlayDisplay()&&p._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled"),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all")),j.globalSounds.playCue("GENERIC_CLICK"))}),$(document).on("click","#gen_setting",function(){f.isMobile()&&$("#info_bar").css("z-index","9"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.isPaytableVisible=!0,$("#button_bet_button").addClass("disabled"),$("#settings_general").trigger("click"),$("#checkbox_quickspin").css("pointer-events","all"),$("#checkbox_left_handed").css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),$("#settings_general").hide(),$("#settings_pays").hide(),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase(" ")),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")}),$(document).on("click","#button_history",function(){a.Core.Environment.playVibrate(),$("#button_history").css("pointer-events","none"),$("#button_history").addClass("disabled"),j.globalSounds.playCue("GENERIC_CLICK"),$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),document.getElementById("historyData").innerHTML="",document.getElementById("history_info").innerHTML="",document.getElementById("history_info").style.display="none",document.getElementById("historyData").style.display="block",a.Common.ApplicationBase.instance.emit(g.SEND_HISTORY_REQUEST),a.Core.Time.juggler.setTimeout(function(){a.Core.HTML.getPageManager("MAIN").showOverlay("settings")},200),$("#settings_history").trigger("click"),$("#settings_page_history").show()}),$(document).on("click","#button_help",function(b){a.Core.Environment.playVibrate(),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.Server.isPaytableVisible=!0,a.Core.HTML.getPageManager("MAIN").showOverlay("settings"),$("#settings_rules").trigger("click"),$(document).find("#button_help").addClass("disabled"),$("#button_bet_button").addClass("disabled"),f.isMobile()&&$("#info_bar").css("z-index","9"),p._$buttonSpin.addClass("disabled_settings_item"),p._$buttonSpin.css("pointer-events","none"),q.current.getGameConfig().isAutoPlayDisplay()&&p._$buttonAuto.addClass("disabled_settings_item"),$("#button_settings").addClass("disabled_settings_item"),$("#settings_rules").show(),$("#settings_general").hide(),$("#settings_pays").hide()}),$.getJSON("./package.json?v=1.0.0",function(a){$("#info_bar .version").text("V "+a.version),$(".right_text").text("V "+a.version)}),p._$buttonSettings=$("#menu_mobile"),p._$settingPanel=$("#green-base"),p._$paytableButton=$("#button_settings"),p._$historyButton=$("#button_history"),p._$removeBetPanel=$(".close-bet"),p.$_betPanelMobile=$("#mobileBetPanel"),$("#button_settings").css("visibility","visible"),p._$buttonNext=$(p._$div.find(".button_next")),p._$buttonPrev=$(p._$div.find(".button_prev")),$(document).on("click","#button_home",function(){$("#settings_page_history").hide(),"visible"==$("#mobileBetPanel").css("visibility")?a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE):"block"==$("#cp_auto_settings_panel").css("display")&&p.removeAutoPanel(),$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),j.globalSounds.playCue("GENERIC_CLICK"),a.Core.Environment.playVibrate(),window.vex.dialog.buttons.YES.text=i.getPhrase("yes"),window.vex.dialog.buttons.NO.text=i.getPhrase("no"),window.vex.dialog.confirm({message:i.getPhrase("confirm_exit"),callback:function(b){b&&a.Common.ApplicationBase.instance.emit(c.EVENT_QUIT_GAME)}})}),p._$paytableButton.on("click",p.onButtonSettings.bind(p)),p._$removeBetPanel.on("click",p.removeBet.bind(p)),p._$buttonSpin=$("#button_spin"),p._$betMobile=$("#dot"),p._$buttonSpin.on("click",p.onButtonSpin.bind(p)),p._$buttonbet=$("#settings_bets1"),p._$buttonbet.on("click",p.onButtonBet.bind(p)),p._$btnautoplayouter=$("#Autoplay_btn"),
p._$btnautoplayouter.on("click",p.onAutoplay.bind(p)),p._$gameWrapper=$("#game_wrapper"),p._$footer=$("#footer"),p._$info_bar=$("#info_bar"),p.$_showBetPanel=$(".button_bett"),p._$betWrapper=$("#bet_wrapper"),p.$_showBetPanel.on("click",p.onBetDisplay.bind(p)),p._$betWrapper.on("click",p.onBetDisplay.bind(p)),$("#button_exit_settings").on("click",p.closeSettingsClick.bind(p)),f.isDesktop()&&p._$gameWrapper.append($("#control_panel")),$(document).on("click",".show-bet",function(a){p.selectedBet(a.target.id)}),p._$buttonStopAutoSpin=$("#button_stop_autospin"),p._$buttonStopAutoSpin.on("click",function(){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_INTERRUPT_SPIN),p.stopAutoSpins(),$("#info_bar").css("z-index","")}),p._$buttonStopSpin=$("#button_stop_spin"),p._$buttonStopSpin.on("click",function(){j.globalSounds.isMuted||p._$buttonStopSpin.hasClass("disabled")||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_INTERRUPT_SPIN),p._autoSpins?p._$buttonStopSpin.addClass("disabled"):(p._$buttonStopSpin.hide(),p._$buttonSpin.show(),p._$buttonSpin.addClass("disabled"),p._$buttonSpin.css("pointer-events","none")),p.stopAnimation()}),p._$buttonWrapper=$("#main_button_wrapper"),p._$betbtnWrapper=$("#bet_button_wrapper"),p._$autoWrapper=$("#Autoplay_button_wrapper"),p._$buttonMax=$("#button_max"),p._$buttonBuyCredit=$("#button_buy_credit"),p._$featurePanel=$("#feature_panel"),p._$panelBackground=$("#panel_background"),p._$panelBackground2=$("#panel_background2"),p._$panelBgShape=$("#panel_bg_shape"),$(document).on("click","#button_audio",function(){j.globalSounds.setVolumeMusic(j.globalSounds.isMuted),j.globalSounds.setVolumeFX(j.globalSounds.isMuted),e.coreEvents.emit(j.EVENT_SET_MUTE,!j.globalSounds.isMuted),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK")}),$(document).on("click","#button_audio_screen",function(){j.globalSounds.setVolumeMusic(j.globalSounds.isMuted),j.globalSounds.setVolumeFX(j.globalSounds.isMuted),e.coreEvents.emit(j.EVENT_SET_MUTE,!j.globalSounds.isMuted),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK")}),p._$buttonAuto=$("#button_auto_cp"),p._$buttonBet=$("#button_bet_button"),p._$buttonAuto.on("click",function(){p.showAutoplayDialog()}),$(document).on("click","#autoplay_exit",function(){p.removeAutoPanel()}),p._$buttonBetSettings=f.isDesktop()?$("#button_bet_button"):$(".bet_mobile"),p._$autoSettingsPanel=$("#cp_auto_settings_panel"),$("#cp_auto_settings_panel").css("display","none"),p._$featureSpinsWrapper=$("#feature_spins_wrapper"),p._$scatterWrapper=$("#scatter_wrapper"),p._$extraSpinWrapper=$("#extraSpin_wrapper"),p._$freeSpinWrapper=$("#freespin_wrapper"),p._$winWrapper=$("#win_wrapper"),p._$balanceWrapper=$("#balance_wrapper"),p._$accumulatedWrapper=$("#accumulatedWin_wrapper"),p._$uiButtons=$("#ui_buttons"),p._$textBalance=$("#cp_balance"),p._$accumulatedBalance=$("#accumulated_amount"),p._$textWin=$("#cp_win"),p._$freeSpintextWin=$("#free_spin_win"),p._$textBet=$("#cp_bet"),p._$textAutoSpins=$("#cp_autocount_label"),p._$featureSpins=$("#cp_feature_spins"),p._$extraSpin=$("#extraSpin_collect"),p._$fscollect=$("#freespin_collect"),p._$featureWin=$("#cp_feature_win"),f.defaultSettings.preLoadPanelImages&&f.defaultSettings.preLoadPanelImages.length>0&&f.defaultSettings.preLoadPanelImages.forEach(function(a){(new Image).src=a}),f.launchVariables.isReplay&&p._$balanceWrapper.css("visibility","hidden"),p.onNoTouches(!0),p}return __extends(t,d),t.prototype.playAnimation=function(b){var c=this;this.spinButtonAnimation.show(),a.Core.Time.juggler.setTimeout(function(){c._autoSpins?c.spinButtonAnimation.css("animation","playX 1.2s steps(15), playY 1.2s steps(2)"):c.spinButtonAnimation.css("animation","playX 1.8s steps(15), playY 1.8s steps(2)")},2),document.getElementById("button_spin_animation").addEventListener("animationend",function(){c.stopAnimation()},!1)},t.prototype.stopAnimation=function(){this.spinButtonAnimation.css("animation","none")},t.prototype.showAutoplayDialog=function(){q.current.getGameConfig().isUKGC()&&$("#settings_autospin_inputs").show(),this._$textWin.text(" "),$("#settings_page_history").hide(),$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),j.globalSounds.playCue("GENERIC_CLICK"),$(".currencyData").text(a.Common.Currency.currencyCode),this._$betWrapper.css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),this.$_showBetPanel.addClass("disabled"),this.$_showBetPanel.css("pointer-events","none"),"none"==this._$autoSettingsPanel.css("display")?(this._$div.css("pointer-events","all"),this.autoSettingsPanel.reset(),this._$autoSettingsPanel.show(),this._$buttonSpin.addClass("disabled"),this._$buttonSettings.css("pointer-events","none"),this._$buttonBetSettings.css("pointer-events","none"),this._$buttonSpin.css("pointer-events","none"),this._$buttonPrev.addClass("disabled"),this._$buttonPrev.css("pointer-events","none"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),$("#autoplayStartButton").css("pointer-events","none"),$("#autoplayStartButton").addClass("disabled_settings_item"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTOPLAY_EVENT_OUTER)):($("#control_panel").css("background-color",""),this._$div.css("pointer-events","none"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),this._$buttonSpin.removeClass("disabled"),this._$buttonBet.removeClass("disabled"),this._$buttonSettings.css("pointer-events","all"),this._$buttonBetSettings.css("pointer-events","all"),this._$buttonSpin.css("pointer-events","all"),this._$buttonBet.css("pointer-events","all"))},t.prototype.startRealityCheckTimer=function(){var b=this;this.realityCheckInterval||(this.isRealityCheckActive=!0,this.realityCheckInterval=a.Core.Time.juggler.setInterval(function(){b.isRealityCheckActive&&($("#control_panel").css("opacity","0"),a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.REALITY_CHECK_TIMER_RESET))},1e3))},t.prototype.stopRealityCheckTimer=function(){this.realityCheckInterval&&(this.isRealityCheckActive=!1,a.Core.Time.juggler.remove(this.realityCheckInterval),this.realityCheckInterval=null,$("#control_panel").css("opacity","1"))},t.prototype.closeSettingsClick=function(){this.stopClickAnyWhere=!1,!q.current.getFreeRounds()||a.Common.Server.isReelSpinning||q.current.getNextAction()!=g.BASE||q.current.getAction()===g.FREE_SPINS||q.current.getAction().includes(g.HOLD_FREE_SPINS)||a.Common.ApplicationBase.getAppValue("splashScreen")&&f.defaultSettings.isSplashScreen||(a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1),this.stopRealityCheckTimer()),a.Common.ApplicationBase.getAppValue("splashScreen")&&f.defaultSettings.isSplashScreen||$("#control_panel").css("opacity","1"),$("#game_wrapper").css("display","block")},t.prototype.splashClose=function(){this.stopRealityCheckTimer(),"UKGC"===q.current.getGameConfig().getJurisdiction()&&(q.current&&q.current.getGameConfig()&&$("#net_position_wrapper").css("display","block"),$("#elapsed_time_wrapper .elapsed_time").text(i.getPhrase("elapsed_time",{etime:"00:00:00"})),$("#elapsed_time_wrapper").css("display","block"),this.sessionStartTime=Date.now(),this.startTimer())},t.prototype.onResultsReady=function(){q.current.getAction()==g.BASE&&this._$textWin.text(" "),this.isSpinStarted=!1,q.current.getAction()!=g.BASE||this._autoSpins&&!f.isDesktop()?this._autoSpins?q.current.getGameConfig().isSlamStopAllowed()&&(this._$buttonStopSpin.show(),this._$buttonSpin.hide(),this._$buttonStopSpin.css("pointer-events","all")):(this._$buttonStopSpin.fadeOut(),this._$betMobile.fadeOut()):q.current.getGameConfig().isSlamStopAllowed()&&(this._$buttonStopSpin.show(),this._$buttonSpin.hide(),this._$buttonStopSpin.css("pointer-events","all"))},t.prototype.onBigWinEnd=function(){this.disable(),this._$buttonWrapper.hide()},t.prototype.onReelTease=function(){this._$buttonStopSpin.hide(),q.current.getAction()===g.FREE_SPINS||q.current.getAction().includes(g.HOLD_FREE_SPINS)||this._$buttonSpin.show()},t.prototype.onGetGameResults=function(){},t.prototype.closeAllPanels=function(){"visible"==$("#mobileBetPanel").css("visibility")&&this.removeBet(),"block"==$("#cp_auto_settings_panel").css("display")&&this.removeAutoPanel(),"block"==$("#settings_wrapper").css("display")&&a.Common.ApplicationBase.instance.emit(r.ON_INFO_PAGE_CLOSED),this._$buttonBetSettings.removeClass("contract_icon"),this._$buttonBetSettings.css("pointer-events","all")},t.prototype.onUpdateFeatureDisplay=function(a){"NONE"==a.label?($("#feature_spins_wrapper").hide(),$("#cp_feature_win").hide()):($("#feature_spins_wrapper").show(),$("#cp_feature_win").show(),a.label&&(this._$featureSpinsWrapper.find(".meter_title").text(a.label),this._$scatterWrapper.find(".meter_title").text(a.label),this._$extraSpinWrapper.find(".meter_title").text(a.label),this._$freeSpinWrapper.find(".meter_title").text(a.label))),(a.spins||0==a.spins)&&(this._$featureSpins.text(a.spins),this._$fscollect.text(a.spins)),(a.extraSpin||0==a.extraSpin)&&this._$extraSpin.text(a.extraSpin),(a.win||0==a.win)&&this._$featureWin.text(k.format(a.win))},t.prototype.onNoTouches=function(a,b){a?(this._$div.css("pointer-events","none"),this.disable(),$(document).find("#button_settings").css("pointer-events","all"),$(document).find("#button_audio").css("pointer-events","all"),$(document).find("#button_audio_screen").css("pointer-events","all")):(this._$div.css("pointer-events","none"),this.enable())},t.prototype.onGameReady=function(b){var c=this;if("BR"!==q.current.getGameConfig().getJurisdiction()||q.current.isBrokenGameSate()||"start"!==q.current.getData().action||(this.stopClickAnyWhere=!0,$("#game_wrapper").css("display","none"),a.Core.Time.juggler.setTimeout(function(){$("#control_panel").css("opacity","0")},900),this.startRealityCheckTimer()),"UKGC"===q.current.getGameConfig().getJurisdiction()&&"start"===q.current.getData().action&&a.Common.ApplicationBase.getAppValue("splashScreen")&&f.defaultSettings.isSplashScreen&&!q.current.isBrokenGameSate()&&!q.current.getFreeRounds()&&this.startRealityCheckTimer(),"DEMO"===a.Core.Environment.launchVariables.gameMode&&($("#demo_text_wrapper").css("display","block"),$("#demo_text_wrapper .demo_text").text(i.getPhrase("demo_text"))),"en"!==a.Core.Environment.launchVariables.language.toLowerCase()&&$(".paytableScreenShot").css("display","none"),q.current.getGameConfig().getDisplayRTP())if("DE"===q.current.getGameConfig().getJurisdiction()){$("#german-info").css("display","block");var d=i.getPhrase("rtp_max_odd",{rtp:q.current.getGameConfig().getRTP()+"%",max_win:"1:"+q.current.getGameConfig().getMaxWinProbability()});q.current.getGameConfig().getMaxWinProbability()||(d=d.split("|")[0]),$("#german-info .rtp_version").text(d)}else{$("#german-info").css("display","block");var d=i.getPhrase("rtp_only",{rtp:q.current.getGameConfig().getRTP()+"%"});$("#german-info .rtp_version").text(d)}else $("#german-info").css("display","none");q.current.getAction()==g.BASE&&(this._$featureSpins.text(""),this._$extraSpin.text(""),this._$fscollect.text(""),this._$featureWin.text(""));var e=q.current.getGameConfig().getJurisdiction();q.current.getGameConfig();if("BR"!==e||q.current.isBrokenGameSate()||"start"!==q.current.getData().action||a.Core.Time.juggler.setTimeout(function(){c.onButtonSettings()},600),"BR"===e){[{id:"#demoMin",value:k.format(n.betLevels[0]*n.fixedBet),search:"minBet"},{id:"#demoMax",value:k.format(n.betLevels[n.betLevels.length-1]*n.fixedBet),search:"maxBet"}].forEach(function(a){var b=a.id,c=a.value,d=a.search;$(b).html(function(){return $(this).html().replace(d,c)}).show()})}else $("#demoMin, #demoMax").hide()},t.prototype.startTimer=function(){var a=this;this.timerInterval=setInterval(function(){var b=Date.now()-a.sessionStartTime,c=a.padZero(Math.floor(b/36e5)),d=a.padZero(Math.floor(b%36e5/6e4)),e=a.padZero(Math.floor(b%6e4/1e3)),f=c+":"+d+":"+e;$("#elapsed_time_wrapper .elapsed_time").text(i.getPhrase("elapsed_time",{etime:f}))},1e3)},t.prototype.padZero=function(a){return(a<10?"0":"")+a},t.prototype.onGameChanged=function(a){this.onResize(),q.current.getNextAction()==g.BASE||q.current.getNextAction()==g.RE_SPIN?(this._$footer.hide(),this._$featurePanel.fadeOut(),this._$buttonWrapper.fadeIn(),this._$betWrapper.fadeIn(),this.$_showBetPanel.fadeIn(),this._$info_bar.removeClass("bright"),f.isDesktop()&&(this._$panelBackground.show(),this._autoSpins?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$textAutoSpins.show(),this._$panelBgShape.css("width","104%")):(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.fadeIn(),this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$panelBgShape.css("width","100%")))):(this._$footer.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.show(),this.onNoTouches(!0),this._$featurePanel.fadeIn(),this._$featureSpinsWrapper.fadeIn(),this._$scatterWrapper.fadeIn(),this._$extraSpinWrapper.fadeIn(),this._$freeSpinWrapper.fadeIn(),this._$info_bar.addClass("bright"),f.isDesktop()?(this._$buttonStopAutoSpin.hide(),this._$textAutoSpins.hide(),this._$featureSpinsWrapper.hide(),this._$panelBgShape.css("width","100%"),$("#bet_button_wrapper").addClass("disabled"),$("#bet_button_wrapper").css("pointer-events","none"),$(".button_bett").addClass("disabled"),$(".button_bett").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#menu_mobile").addClass("disabled"),$("#menu_mobile").css("pointer-events","none"),$("#main_button_wrapper").addClass("disabled"),$("#main_button_wrapper").css("pointer-events","none"),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),q.current.getGameConfig().isAutoPlayDisplay()&&($("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"))):($("#bet_button_wrapper").addClass("disabled"),$("#bet_button_wrapper").css("pointer-events","none"),$(".button_bett").addClass("disabled"),$(".button_bett").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#menu_mobile").addClass("disabled"),$("#menu_mobile").css("pointer-events","none"),$("#main_button_wrapper").addClass("disabled"),$("#main_button_wrapper").css("pointer-events","none"),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),q.current.getGameConfig().isAutoPlayDisplay()&&($("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none")))),e.coreEvents.emit(j.EVENT_SET_MUTE,j.globalSounds.isMuted)},t.prototype.onReelsDropped=function(a){this._autoSpins>1||(this._$buttonStopSpin.hide(),q.current.getAction()===g.FREE_SPINS||q.current.getAction().includes(g.HOLD_FREE_SPINS)||this._$buttonSpin.show(),this.stopAutoSpins())},t.prototype.onSettingsOpen=function(a){f.isDesktop()&&(this._$info_bar.addClass("bright"),$("div#settings").prepend($("#control_panel")),this.onResize())},t.prototype.onSettingsClosed=function(b){this.showPanel(),f.isDesktop()?($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$info_bar.removeClass("bright"),this.onResize()):($(document).find("button_help").removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),b.autoSpins&&"number"==typeof b.autoSpins?this._$textAutoSpins.text(b.autoSpins.toString()):this._$textAutoSpins.text("8"),this._$textAutoSpins.show()),this._autoSpins=b.autoSpins,this._autoSpins?(a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_START),a.Common.Server.isAutoplay=!0,this.onButtonSpin()):this._$textAutoSpins.hide()},t.prototype.onContinueGame=function(b){var d=this;(q.current.getAction()==g.BASE||q.current.getAction()==g.RE_SPIN||!a.Common.Server.stopContinueCallRespin&&q.current.getNextAction()==g.RE_SPIN)&&("number"!=typeof this._autoSpins?(a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPIN,this._autoSpins),this.onButtonSpin(),this.onPlayerPrompt(i.getPhrase("n_autospins_remaining",{spins:this._autoSpins})),this._$textAutoSpins.text("8")):this._autoSpins>0?this._autoSpins?("RE_SPIN"!=q.current.getNextAction()&&(--this._autoSpins,this._$textAutoSpins.text(this._autoSpins)),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPIN,d._autoSpins),0!=d._autoSpins&&(d._autoSpins<=5&&a.Core.Environment.playVibrate(),a.Core.Time.juggler.setTimeout(function(){d.onButtonSpin()},100)),d.onPlayerPrompt(i.getPhrase("n_autospins_remaining",{spins:d._autoSpins})),0==d._autoSpins&&(d.enable(),d._$buttonSpin.css("pointer-events","all"),d._$buttonSpin.fadeIn(),d.stopAutoSpins(),d._$buttonStopSpin.removeClass("disabled"),a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END),a.Common.ApplicationBase.instance.emit(h.ON_BUY_INTERACT_GAME))},750)):(this._$buttonSpin.fadeIn(),this.stopAutoSpins(),q.current.getAction()==g.BASE&&a.Core.Time.juggler.setTimeout(function(){d.enable()},750),this._$buttonSpin.css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END)):q.current.getNextAction()!=g.RE_SPIN||q.current.isBrokenGameSate()?(this._$buttonStopSpin.hide(),q.current.getNextAction()==g.BASE&&this._$textBalance.text(k.format(q.current.getBalance()))):a.Core.Time.juggler.setTimeout(this.startSpin.bind(this),250))},t.prototype.stopAutoSpinsukgc=function(){this.stopAutoSpins()},t.prototype.stopAutoSpins=function(){a.Common.ApplicationBase.instance.emit(c.EVENT_AUTO_SPINS_END),this._autoSpins=0,a.Common.Server.isAutoplay=!1,m.reset(),this._$textAutoSpins.hide(),this._$buttonStopAutoSpin.hide(),q.current.getAction()===g.BASE&&this._$buttonSpin.show(),this._$div.css("pointer-events","none"),m.reset(),f.isMobile()&&(this._$buttonStopSpin.hide(),$("#info_bar").css("z-index","9")),f.isDesktop()&&(this._$buttonStopSpin.hide(),this._$panelBgShape.css("width","100%")),q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide())},t.prototype.onButtonSpin=function(b){this.isSpinStarted=!0,j.globalSounds.stopCue("TickUp_Sound"),this.winUpdateTween&&this.winUpdateTween.kill(),f.isDesktop()&&($("#cp_auto_start_button").css("background-color",f.defaultSettings.auto_Start_Button_disable_Color),$("#cp_auto_start_button").css("box-shadow",""),$("#control_panel").css("background-color","")),this._juggler.purge(),this._$winWrapper.css("visibility","visible"),q.current.getNextAction()===g.BASE&&(this._$textWin.fadeOut(),this._$textWin.text(" ")),this._autoSpins||m.reset(),this._$buttonSpin.css("pointer-events","none"),f.isMobile()?a.Core.Time.juggler.setTimeout(this.startSpin.bind(this),250):this.startSpin()},t.prototype.onButtonBet=function(b){j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_EVENT_OUTER)},t.prototype.onBetDisplay=function(){$("#settings_page_history").hide(),$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled");var b=document.getElementById("mobileBetPanel");"hidden"==b.style.visibility||""==b.style.visibility?(j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),$("#menu_mobile").addClass("disabled"),$("body").append($("#mobileBetPanel")),$("#mobileBetPanel").css("visibility","visible"),$("#mobileBetPanel_background").css("visibility","visible"),this._$buttonSpin.css("pointer-events","none"),this._$buttonMax.css("pointer-events","none"),this._$betWrapper.css("pointer-events","none"),$("#Autoplay_btn").css("pointer-events","none"),$("#menu_mobile").css("pointer-events","none"),a.Core.Environment.launchVariables.homeEnabled||$("#button_home").css("pointer-events","none"),this._$removeBetPanel.css("pointer-events","all"),this._$buttonAuto.css("pointer-events","none"),this.$_showBetPanel.css("pointer-events","none"),f.isPortrait()&&($("#menu_button_wrapper").css("z-index","0"),$("#auto_button_wrapper").css("z-index","0")),this.showBet()):($("#main_button_wrapper").show(),$("#menu_mobile").addClass("disabled"),$("#mobileBetPanel").css("visibility","hidden"),$("#mobileBetPanel_background").css("visibility","hidden"))},t.prototype.showBet=function(){if(a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0),0===$("#bet-frame").length){for(var c="",d=q.current.getGameConfig().getBetValues(),e=(a.Slots.SettingsPages.BettingSetup.currentBetLevel,q.current.getGameConfig().getFixedBet(),0);e<d.length;e++)c+='<div class="show-bet" id="'+e+'">'+k.format(d[e]*q.current.getGameConfig().getFixedBet())+"</div>";var g="<div class ='bet-frame' id='bet-frame'>"+c+"</div>";document.getElementById("tb-total").insertAdjacentHTML("afterend",g),$("#betPanelValue").append($("#"+q.current.getGameConfig().getDefaultBetIndex()).text()),$("#"+q.current.getGameConfig().getDefaultBetIndex()).addClass("current-bet")}f.isMobile()&&f.isPortrait()&&this.adjustBetFrameHeight()},t.prototype.adjustBetFrameHeight=function(){var a=document.querySelectorAll(".show-bet"),b=0;Array.from(a).forEach(function(a){b+=a.offsetHeight+parseFloat(window.getComputedStyle(a).marginTop)}),b+=15;var c=document.getElementById("bet-frame");c&&(c.style.height=b/3.45+"px")},t.prototype.onAutoplay=function(b){a.Core.Environment.playVibrate(),$("#settings_page_history").hide(),$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),$(".keypad_currency").text(a.Common.Currency.currencyCode),$(".currencyData").text(a.Common.Currency.currencyCode),$("#info_bar").css("z-index","9"),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),$("#autoplayStartButton").css("pointer-events","all"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTOPLAY_EVENT_OUTER)},t.prototype.startSpin=function(){$("#settings_page_history").hide(),a.Common.Server.isReelSpinning=!0,$("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),g.freeRoundActive?a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{bet:n.currentBetLevel,freeRoundActive:!0}):q.current.getBalance()>=n.getTotalBetCash()||q.current.getNextAction()===g.RE_SPIN?(q.current.getNextAction()!=g.RE_SPIN&&a.Common.ApplicationBase.instance.emit(g.SEND_ROUND_START),a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{bet:n.currentBetLevel,freeRoundActive:!1})):(a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_DEPOSIT_REQUEST),a.Common.ApplicationBase.instance.emit(m.INSUFFICIENT_FUND,i.getPhrase("err_insufficient_funds"))),this._autoSpins?("number"!=typeof this._autoSpins?this._$textAutoSpins.text("8"):this._$textAutoSpins.text(this._autoSpins-1),this._$textAutoSpins.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"),this._$panelBgShape.css("width","104%"),f.isDesktop()?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"),this._$panelBgShape.css("width","104%")):(this._$buttonStopAutoSpin.fadeIn(),this._$buttonStopAutoSpin.show(),this._$buttonStopSpin.removeClass("disabled"))):f.isDesktop()?(q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.show(),this._$buttonStopAutoSpin.hide(),this._$panelBgShape.css("width","100%")):this._$buttonStopAutoSpin.fadeOut()},t.prototype.updateBalance=function(b){this._$textBalance.text(k.format(b)),a.Common.ApplicationBase.instance.emit(g.SEND_UPDATE_BALANCE,b),this._$accumulatedWrapper.css("visibility","hidden"),q.current.getGameConfig().isSweepStakeGame()&&(this._$accumulatedWrapper.css("visibility","visible"),this._$accumulatedBalance.text(k.format(q.current.getAccumulatedWin()))),this.updateProfitPosition()},t.prototype.updateProfitPosition=function(){if(q.current&&q.current.getGameConfig()&&"UKGC"===q.current.getGameConfig().getJurisdiction()){if(f.isMobile()&&f.isPortrait()){var a=i.getPhrase("net_position",{net:k.format(m.getNetPosition())});a=a.split("|")[1],$("#net_position_wrapper .net_position").text(a)}else $("#net_position_wrapper .net_position").text("         "+i.getPhrase("net_position",{net:k.format(m.getNetPosition())}))}},t.prototype.pushBalance=function(a){var b=100*Number(a);this._$textBalance.text(k.format(b))},t.prototype.updateTimeDisplay=function(){var a=l.getFormattedTime(),b=$(this._$div).find(".local_time");f.isMobile()&&f.isLandscape()?b.html('<span id="local-time-land">'+a+"</span>"):b.text(a)},t.prototype.onButtonSettings=function(){$("body").append($("#settings_wrapper")),$("#settings_wrapper").show(),$("#settings_wrapper").css("display","block"),$("#settings_page_history").hide(),a.Core.Environment.playVibrate(),"0"===f.launchVariables.mode&&(f.launchVariables.hasCheatTool?this.removeCheatPanel():this.showCheatPanel()),j.globalSounds.isMuted||j.globalSounds.playCue("GENERIC_CLICK"),q.current.getGameConfig().isBuyoutAllowed()?$("#buy_page").show():$("#buy_page").hide(),f.isMobile()&&!f.isDesktop()&&($(this._$div).find(".local_time").css("z-index","100000"),$("#info_bar").css("z-index","9")),f.isDesktop()?(a.Common.Server.isPaytableVisible=!0,$("#button_bet_button").addClass("disabled"),$("#button_bet_button").css("pointer-events","none"),this._$paytableButton.addClass("disabled"),this._$paytableButton.css("pointer-events","none"),$("#balance_wrapper, #bet_wrapper, #win_wrapper").css("color","gray"),$("#settings_pays").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),$("#settings_general").show(),$("#settings_pays").show(),$("#settings_rules").show(),$(document).find("#button_help").addClass("disabled"),this._$buttonSettings.addClass("disabled"),this._$buttonBetSettings.css("pointer-events","none"),this._$buttonMax.addClass("disabled"),this._$buttonMax.css("pointer-events","none"),this._$buttonBuyCredit.addClass("disabled"),this._$buttonBuyCredit.css("pointer-events","none"),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings")):(f.isMobile()&&!f.isDesktop()&&$(this._$div).find(".local_time").css("z-index","100000"),$("#settings_pays").trigger("click"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.OPTION_STATUS_CHANGED,!0),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.PAYTABLE_STATUS_CHANGED,!1),a.Core.HTML.getPageManager("MAIN").toggleOverlay("settings"))},t.prototype.removeCheatPanel=function(){f.launchVariables.hasCheatTool=!1,$("#force_select").css("visibility","hidden"),$(".cheat_style").css("visibility","hidden"),$("#addCheat").css("visibility","hidden"),$("#myText").css("visibility","hidden")},t.prototype.showCheatPanel=function(){f.launchVariables.hasCheatTool=!0,$("#force_select").css("visibility","visible"),$(".cheat_style").css("visibility","visible"),$("#addCheat").css("visibility","visible"),$("#myText").css("visibility","visible")},t.prototype.removeBet=function(){j.globalSounds.playCue("GENERIC_CLICK"),this._$removeBetPanel.css("pointer-events","none"),this._$betWrapper.css("pointer-events","all"),this.$_showBetPanel.css("pointer-events","all"),this._$buttonAuto.css("pointer-events","all"),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonMax.removeClass("disabled"),this._$buttonMax.css("pointer-events","all"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.removeClass("disabled"),$("#Autoplay_btn").removeClass("disabled"),$("#Autoplay_btn").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all"),$("#mobileBetPanel").css("visibility","hidden"),$("#mobileBetPanel_background").css("visibility","hidden"),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").removeClass("disabled"),$("#button_home").css("pointer-events","all"))},t.prototype.removeAutoPanel=function(){$("#settings_autospin_inputs").hide(),this._$div.css("pointer-events","none"),this._$betWrapper.css("pointer-events","all"),this._$autoSettingsPanel.hide(),j.globalSounds.playCue("GENERIC_CLICK"),this.$_showBetPanel.removeClass("disabled"),this.$_showBetPanel.css("pointer-events","all"),this._$buttonSpin.removeClass("disabled"),this._$buttonSettings.removeClass("disabled"),this._$buttonSettings.css("pointer-events","all"),this._$buttonBetSettings.css("pointer-events","all"),this._$buttonSpin.css("pointer-events","all"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),$("#cp_auto_start_button").css("background-color",f.defaultSettings.auto_Start_Button_disable_Color),$("#cp_auto_start_button").css("box-shadow",""),$("#cp_auto_settings_panel").css("display","none"),$("#control_panel").css("background-color","")},t.prototype.selectedBet=function(b){var c=b,d=$(".current-bet")[0].id;$("#"+d).removeClass("current-bet"),$("#"+c).addClass("current-bet"),$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty();var e=Number($("#"+c)[0].innerText.split(" ")[1]);$("#betPanelValue").append($("#"+c)[0].innerText);var f=Number($(".current-bet")[0].id),g=n.betLevels[f];a.Common.Server.isbetSelect=!0,j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:g,totalBet:e}),$("#confirmBet").addClass("selectedConfirmButton")},t.prototype.onDisplayWin=function(){var b=this;if(!this.isSpinStarted&&q.current.getTotalWin()>0){var c=this._autoSpins?.25:.5,d=q.current.getGameRoundWin()-q.current.getTotalWin();j.globalSounds.playCue("TickUp_Sound");var e=this.getWinBand(q.current.getTotalWin());a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.UPDATE_WIN_AMOUNT,q.current.getTotalWin(),q.current.getTotalBet(),e),this._$textWin.show(),this._$textWin.css("display","block"),this._$winWrapper.css("visibility","visible"),this._$textWin.addClass("win_update_throb"),q.current.getAction()===g.BASE?this._$textWin.text(""):q.current.getAction()===g.FREE_SPINS&&this._$freeSpintextWin.addClass("win_update_throb");var f={win:d};this.winUpdateTween=TweenLite.to(f,c,{win:q.current.getGameRoundWin(),onUpdate:function(){b._$textWin.text(k.format(f.win)),q.current.getAction()==g.FREE_SPINS&&b._$freeSpintextWin.text(k.format(f.win))},onComplete:function(){b._$textWin.removeClass("win_update_throb"),j.globalSounds.stopCue("TickUp_Sound"),q.current.isMaxWinCapped()&&a.Common.ApplicationBase.instance.emit(m.EVENT_CHECK_MAX_CAP)}})}},t.prototype.getWinBand=function(b){var c=(s(b),null);for(var d in this._winBandSetup){if(!(b>=this._winBandSetup[d]*a.Slots.SettingsPages.BettingSetup.getTotalBetCash()))break;c=d}return c},t.prototype.setupWinTypes=function(a){this._winBandSetup=a},t.prototype.hasValue=function(a,b){return a.hasOwnProperty(b)},t.prototype.onPlayerPrompt=function(a){
var b=$(this._$div).find(".prompt");b.html(a),b.show()},t.prototype.disable=function(){g.isIdleMode=!1,this._$buttonSettings.addClass("disabled"),$(document).find("#button_help").addClass("disabled"),$("#button_history").css("pointer-events","none"),$("#button_history").addClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonPrev.addClass("disabled"),a.Core.Environment.launchVariables.homeEnabled||($(document).find("#button_home").addClass("disabled"),$(document).find("#button_home").css("pointer-events","none")),a.Core.Environment.launchVariables.homeUrl&&($(document).find("#button_home").addClass("disabled"),$(document).find("#button_home").css("pointer-events","none")),this._$buttonBet.addClass("disabled"),this._$buttonBet.css("pointer-events","none"),q.current&&q.current.getGameConfig()&&q.current.getGameConfig().isAutoPlayDisplay()&&(this._$buttonAuto.addClass("disabled"),this._$buttonAuto.css("pointer-events","none")),this._$buttonSpin.addClass("disabled"),this._$buttonSpin.css("pointer-events","none"),this._$buttonMax.addClass("disabled"),this._$buttonMax.css("pointer-events","none"),this._$buttonBuyCredit.addClass("disabled"),this._$buttonBuyCredit.css("pointer-events","none"),this._$betbtnWrapper.css("pointer-events","none"),this._$buttonBetSettings.css("pointer-events","none"),this._$buttonSettings.css("pointer-events","none"),this._$btnautoplayouter.addClass("disabled"),this._$btnautoplayouter.css("pointer-events","none"),this._$buttonPrev.addClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","none"),this.$_showBetPanel.addClass("disabled"),this.$_showBetPanel.css("pointer-events","none"),this._$betWrapper.css("pointer-events","none")},t.prototype.enableButtonAutoSpins=function(){$("#main_button_wrapper").show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.removeClass("disabled")},t.prototype.enable=function(b){k.format(1).split("�")[0].length>1&&$("#settings_page_pays .symbol_pays .oak_pays").css("font-size","0.7em"),q.current.getGameConfig().isDisplayClock()?$(this._$div).find(".local_time").css("display","block"):$(this._$div).find(".local_time").css("display","none"),g.freeRoundActive?(this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all")):(this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled"),this._$buttonBetSettings.css("pointer-events","all"),this._$buttonMax.removeClass("disabled"),this._$buttonMax.css("pointer-events","all"),this._$buttonBuyCredit.removeClass("disabled"),this._$buttonBuyCredit.css("pointer-events","all"),this._autoSpins||($("#button_history").css("pointer-events","all"),$("#button_history").removeClass("disabled"),this.$_showBetPanel.css("pointer-events","all"),this._$betWrapper.css("pointer-events","all"),this.$_showBetPanel.removeClass("disabled"),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$paytableButton.removeClass("disabled"),this._$paytableButton.css("pointer-events","all"),this._$buttonSettings.css("pointer-events","all"),this._$buttonSettings.removeClass("disabled")),this._$betbtnWrapper.removeClass("disabled"),this._$betbtnWrapper.css("pointer-events","all"),$(document).find("#button_help").removeClass("disabled"),a.Core.Environment.launchVariables.homeEnabled&&0===this._autoSpins&&($(document).find("#button_home").removeClass("disabled"),$(document).find("#button_home").css("pointer-events","all")),a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[a.Slots.SettingsPages.BettingSetup.betLevels.length-1]?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","all")):a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[0]?(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled")),q.current.getGameConfig().isAutoPlayDisplay()?0===this._autoSpins&&(this._$buttonAuto.removeClass("disabled"),this._$autoWrapper.removeClass("disabled"),this._$buttonAuto.show(),this._$btnautoplayouter.removeClass("disabled")):this._$buttonAuto.hide(),f.isMobile()&&0===this._autoSpins&&(this._$btnautoplayouter.removeClass("disabled"),this._$btnautoplayouter.css("pointer-events","all")),this._$buttonSpin.removeClass("disabled"),this._$buttonSpin.css("pointer-events","all"),this._$buttonBetSettings.removeClass("disabled"),q.current.getGameConfig().isAutoPlayDisplay()&&0===this._autoSpins&&(this._$buttonAuto.removeClass("disabled"),this._$buttonAuto.css("pointer-events","all")),a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[a.Slots.SettingsPages.BettingSetup.betLevels.length-1]?(this._$buttonPrev.removeClass("disabled"),this._$buttonNext.addClass("disabled"),this._$buttonNext.css("pointer-events","none"),this._$buttonPrev.css("pointer-events","all"),this._$buttonBet.css("pointer-events","none"),this._$buttonBet.addClass("disabled")):a.Slots.SettingsPages.BettingSetup.currentBetLevel===a.Slots.SettingsPages.BettingSetup.betLevels[0]?(this._$buttonPrev.addClass("disabled"),this._$buttonNext.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","none"),this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled")):(this._$buttonNext.removeClass("disabled"),this._$buttonPrev.removeClass("disabled"),this._$buttonNext.css("pointer-events","all"),this._$buttonPrev.css("pointer-events","all"),this._$buttonBet.css("pointer-events","all"),this._$buttonBet.removeClass("disabled"))),g.isIdleMode=!0},t.prototype.hidePanelInBrokenPopUp=function(){this._$panelBackground.hide()},t.prototype.showPanelInBrokenPopUp=function(){this._$panelBackground.show()},t.prototype.hidePanel=function(){this._$div.hide(),$("#panel_background").hide(),$("#info_bar").hide(),f.isMobile()&&($("#button_audio_screen").css("z-index","-1"),$("#button_settings").css("z-index","-1"),$("#main_button_wrapper").css("z-index","-1"),$("#button_spin_animation").css("z-index","-1"),$("#bett_button_wrapper").css("z-index","-1"),$("#button_auto_cp").css("z-index","-1"))},t.prototype.divpointer=function(){this._$div.css("pointer-events","none")},t.prototype.showPanel=function(){this._$div.fadeIn(),$("#panel_background").show(),$("#info_bar").show(),f.isMobile()&&($("#button_audio_screen").css("z-index","1"),$("#button_settings").css("z-index","1"),$("#main_button_wrapper").css("z-index","1"),$("#button_spin_animation").css("z-index","5"),$("#bett_button_wrapper").css("z-index","1"),$("#button_auto_cp").css("z-index","1"))},t.prototype.onAnyWinAlarm=function(){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_any_win")),this.stopAutoSpins()},t.prototype.onFeatureStopAlarm=function(){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_feature_stop")),this.stopAutoSpins(),f.isDesktop&&q.current.getGameConfig().isAutoPlayDisplay()&&this._$buttonAuto.hide()},t.prototype.onSingleWinAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_single_win")),this.stopAutoSpins()},t.prototype.onTotalWinAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_total_win")),this.stopAutoSpins()},t.prototype.onCashLossAlarm=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert(i.getPhrase("auto_play_limit_loss")),this.stopAutoSpins()},t.prototype.onRealityCheck=function(b){window.vex.dialog.buttons.YES.text=i.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("home_caps"),window.vex.dialog.confirm({message:i.getPhrase("reality_check_msg",{minutes:p(b)}),callback:function(b){b?a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.REALITY_CHECK_TIMER_RESET):(a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.REALITY_CHECK_TIMER_RESET),a.Common.ApplicationBase.instance.emit(c.EVENT_QUIT_GAME))}})},t.prototype.paytableShowHidePanel=function(a){"visible"==a?(f.isMobile()&&this._$div.css("pointer-events","all"),this._$buttonWrapper.hide(),this.$_showBetPanel.hide(),this._$betbtnWrapper.hide(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.hide(),$(document).find("#menu_mobile").removeClass("disabled")):"hidden"==a?(f.isMobile()&&this._$div.css("pointer-events","none"),this._$buttonWrapper.show(),this._$betbtnWrapper.show(),this._$buttonSettings.show(),this.$_showBetPanel.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.show(),$(document).find("#menu_mobile").removeClass("disabled")):"close"==a&&(f.isMobile()&&this._$div.css("pointer-events","none"),this._$buttonWrapper.show(),this.$_showBetPanel.show(),this._$betbtnWrapper.show(),this._$buttonSettings.show(),q.current.getGameConfig().isAutoPlayDisplay()&&this._$autoWrapper.show(),f.isDesktop()||(document.getElementById("green-base").style.visibility="hidden"))},t.prototype.onMaxCap=function(){this._autoSpins&&this.stopAutoSpins(),window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert({message:i.getPhrase("msg_congratulation").concat(i.getPhrase("err_max_cap").replace("winvalue",""+k.format(q.current.getCappedWinAmount()))),callback:function(a){}})},t.prototype.oninsufficientFund=function(b){var d=this;window.vex.dialog.buttons.YES.text=i.getPhrase("continue_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("deposit"),window.vex.dialog.buttons.HOME.text=i.getPhrase("home_caps"),this.stopAutoSpins(),a.Common.ApplicationBase.instance.emit(c.EVENT_STOP_SPIN),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:b,callback:function(b){if($(".vex-dialog-button").css("cssText","display:none!important"),1==b){var f=(new Date).getTime();e.coreEvents.emit(a.Core.Events.ON_APP_GET_FOCUS,null,f),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT,i.getPhrase("START_GAME")),a.Common.ApplicationBase.instance.emit(h.ON_PLAYER_PROMPT_WIN,""),d._$buttonStopSpin.hide(),d.enable()}else"home"==b&&a.Common.ApplicationBase.instance.emit(c.EVENT_QUIT_GAME)}}),$(".vex-dialog-button").css("cssText","display:none"),$(".vex-first").css("cssText","display:block!important"),f.launchVariables.homeUrl?$(".vex-last").css("cssText","display:block!important"):$(".vex-last").css("cssText","display:none!important")},t.prototype.onBrokenAlarm=function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),e.coreEvents.emit(j.EVENT_SET_MUTE,j.globalSounds.isMuted),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,q.current.getBalance()),q.current.getAction()!=g.FREE_SPIN_SELECTION&&q.current.getAction()!=g.RE_SPIN&&q.current.getAction()!=g.BASE&&q.current.getNextAction()==g.BASE?a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.EVENT_SHOW_BROKEN_FEATURE_WIN_SUMMARY):f.launchVariables.isReplay?setTimeout(function(){a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{isReplay:!0})},1e3):(window.vex.dialog.buttons.YES.text=i.getPhrase("ok_caps"),window.vex.dialog.alert({message:i.getPhrase("msg_replay"),callback:function(b){1==b&&q.current.getAction()==g.FREE_SPIN_SELECTION&&q.current.getNextAction()==g.BASE||q.current.getAction()==g.FREE_SPIN_SELECTION&&q.current.getNextAction()==g.FREE_SPINS?a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay("WHEEL_BONUS")},100):1!=b||q.current.getAction().includes(g.BONUS)||q.current.getAction().includes(g.FREE_SPIN_SELECTION)?a.Common.ApplicationBase.instance.emit(h.ON_HANDLE_RESTORE_STATE):a.Common.ApplicationBase.instance.emit(h.ON_GET_GAME_RESULTS,{bet:n.currentBetLevel,isBroken:!0})}}))},t.prototype.onBetNotAvailable=function(){a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,q.current.getBalance()),window.vex.dialog.buttons.YES.text=i.getPhrase("reload_caps"),window.vex.dialog.alert({message:i.getPhrase("bet_not_available"),callback:function(b){1==b&&a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_RELOAD_REQUEST)}})},t.prototype.onResponsibleGamingError=function(a){window.vex.dialog.buttons.YES.text=i.getPhrase("home_caps"),window.vex.dialog.buttons.NO.text=i.getPhrase("deposit"),this.stopAutoSpins(),this._$buttonStopSpin.hide(),window.vex.dialog.confirm({message:a,callback:function(a){}})},t.prototype.onResize=function(){if(this._$gameWrapper)if(this.updateProfitPosition(),this.updateTimeDisplay(),f.isDesktop()||(f.isLandscape()?this._$gameWrapper.append($("#control_panel")):($("body").append($("#control_panel")),f.isMobile()&&f.isPortrait()&&this.adjustBetFrameHeight())),this._$div=$("#control_panel"),f.isMobile()&&this.spinButtonAnimation){var b=1;f.isPortrait()?screenfull&&screenfull.isFullscreen?(b=this._$div.height()/f.defaultSettings.height*.62,this.spinButtonAnimation.css("left","48.5%"),this.spinButtonAnimation.css("top","76%")):(b=this._$div.height()/f.defaultSettings.height*.76,this.spinButtonAnimation.css("left","48.8%"),this.spinButtonAnimation.css("top","76.4%")):(b=this._$div.height()/f.defaultSettings.height*1.16,this.spinButtonAnimation.css("left","85.3%"),this.spinButtonAnimation.css("top","83.6%")),this.spinButtonAnimation.css("transform","translate(-50%, -50%) scale("+b+")")}else if(f.isDesktop()){this.spinButtonAnimation&&(this.spinButtonAnimation.css("left","96.4%"),this.spinButtonAnimation.css("top","-55%"),this.spinButtonAnimation.css("transform","translate(-50%, -50%) scale(0.725)"));var c=this._$gameWrapper.height()/720,d={transform:"scale("+c+")","transform-origin":"top left",width:"1280px",height:"720px"};a.Slots.SettingsPages.SliderWidget.scaleFactor=c;var e=$("div#settings");e&&"block"==e.css("display")?(this._$div.attr("style",""),this._$div.css({width:d.width,height:d.height}),e.css(__assign({},this._$gameWrapper.css(["height","width","margin-left","position","left","top","margin-top"]),d))):this._$div.css(d)}},t}(d);c.ControlPanel=t;var u=function(){function b(c){var d=this;this.AUTO_SPIN_VALUES=[],this._autoSpinsCountSliderChange=0,this._state=x.COLLAPSED,this.changeAutoPlayButtonState=function(c){void 0!=c&&(d._autoSpinsCountSliderChange=c),b._lossLimitValue>0&&d._autoSpinsCountSliderChange&&($("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')")),(0==(d._spinMultiselect.value()+"").localeCompare("NoLimit")||d._spinMultiselect.value()>0)&&!q.current.getGameConfig().isUKGC()?(d._$startButton.removeClass("disabled"),c&&(d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow)),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("NoLimit")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()?(d._$startButton.removeClass("disabled"),d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow),d._$lossLimit.removeClass("flash-item")):!(d._spinMultiselect.value()+"").localeCompare("8")&&parseFloat(d._$lossLimit[0].value)>=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()?(d._$startButton.removeClass("disabled"),d._$startButton.css("background-color",f.defaultSettings.auto_Start_Button_Enable_Color),d._$startButton.css("box-shadow",f.defaultSettings.auto_Start_Button_Shadow),d._$lossLimit.removeClass("flash-item")):d._$startButton.addClass("disabled"),d._noOfAutoPlaySpin=d._spinMultiselect.value().toString()},this.updateToggleButton=function(a){if(f.isDesktop()){d._$toggleContainer.html(),i.getPhrase(d.isChecked?"settings_autoplay_advanced":"settings_autoplay_basic"),i.getPhrase(d.isChecked?"settings_autoplay_basic":"settings_autoplay_advanced");d.isChecked?$("#cp_auto_toggle_button").removeClass("down"):$("#cp_auto_toggle_button").addClass("down")}},this._$div=$(c),this.AUTO_SPIN_VALUES=q.current.getGameConfig().getAutoPlayValues(),this._$singleWinLimit=$("#cp_auto_single_win_limit"),this._$totalWinLimit=$("#cp_auto_total_win_limit"),this._$lossLimit=$("#cp_auto_loss_limit"),this._$stopOnFeatureWin=$("#cp_auto_stop_on_feature_win"),this._$stopOnAnyWin=$("#cp_auto_stop_on_any_win"),this._$startButton=$("#cp_auto_start_button"),this._$toggleContainer=$(".cp_auto_toggle_container"),this._$advancedInputs=$("#cp_auto_advanced"),q.current.getGameConfig().isAutoPlayDisplay()||($("#button_auto_cp").css("display","none"),$("#Autoplay_button_wrapper").css("display","none"));var e=q.current.getGameConfig().isUKGC();e&&(this._state=x.EXPANDED,this.updateToggleButton(!0)),this._state==x.COLLAPSED?(this._$advancedInputs.css("height","0"),$("#cp_auto_toggle_button").addClass("down")):this._$toggleContainer.on("click",function(a){a.stopImmediatePropagation(),a.preventDefault(),d._state=d.isChecked?x.EXPANDED:x.COLLAPSED,d._$advancedInputs.css("height",d.isChecked?"0":""),d.updateToggleButton()}),this._$singleWinLimit.attr("placeholder",""),this._$totalWinLimit.attr("placeholder",""),this._$lossLimit.attr("placeholder",""),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,this.changeAutoPlayButtonState,this),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_FEATURE_WIN_CHANGE,this.changeAutoPlayButtonState,this),a.Common.ApplicationBase.instance.on(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,this.changeAutoPlayButtonState,this),this._singleWinLimit=new z(this._$singleWinLimit,function(b){d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SINGLE_WIN_LIMIT_CHANGE,b)}),this._totalWinLimit=new z(this._$totalWinLimit,function(b){d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_TOTAL_WIN_LIMIT_CHANGE,b)}),this._lossLimit=new z(this._$lossLimit,function(c){b._lossLimitValue=isNaN(c)?0:c,c?(d._$lossLimit.removeClass("flash-item"),d._autoSpinsCountSliderChange&&q.current.getGameConfig().isAutoplayLossLimitRequired()&&($("#autoplayStartButton").removeClass("disabled_settings_item"),$("#autoplayStartButton").css("pointer-events","all"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_enable+"')")),d.changeAutoPlayButtonState(),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,c),d._$startButton.removeClass("disabled"),d._$lossLimit.removeClass("flash-item")):0===c?a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_LOSS_LIMIT_CHANGE,c):isNaN(c)||c<a.Slots.SettingsPages.BettingSetup.getTotalBetCash()?(d._$startButton.addClass("disabled"),d._$lossLimit.addClass("flash-item"),q.current.getGameConfig().isAutoplayLossLimitRequired()&&($("#autoplayStartButton").css("pointer-events","none"),$("#autoplayStartButton").addClass("disabled_settings_item"),$("#autoplayStartButton").css("background-image","url('"+f.defaultSettings.autoplayStartButton_disable+"')"))):d._$lossLimit.addClass("flash-item")}),this._spinMultiselect=new y($("#spin_count_chooser"),this.AUTO_SPIN_VALUES,function(b){b>0?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):"NoLimit"==b?parseFloat(d._$lossLimit.val())>0||!e?d._$lossLimit.removeClass("flash-item"):(d._$lossLimit.addClass("flash-item"),d._$startButton.addClass("disabled")):d._$startButton.addClass("disabled"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_AUTO_SPIN_COUNT_CHANGE,!0)}),this._$stopOnAnyWin.on("click",function(b){var c=this.checked;m.setWinStop(c),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_STOP_ON_ANY_WIN,c)}),this._$startButton.on("click",function(b){a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_SETTINGS_CLOSED,{autoSpins:d._spinMultiselect.value()}),j.globalSounds.playCue("GENERIC_CLICK")})}return Object.defineProperty(b.prototype,"isChecked",{get:function(){return this._state==x.COLLAPSED},enumerable:!0,configurable:!0}),b.prototype.reset=function(){this._$lossLimit.removeClass("flash-item"),this._spinMultiselect.reset(),this._lossLimit.reset(),this._singleWinLimit.reset(),this._totalWinLimit.reset(),this._$stopOnAnyWin.attr("checked",!1),this._$stopOnFeatureWin.attr("checked",!1)},b}();c.AutoSettingsPanel=u;var v=function(){function b(a){var b=this;$(document).on("mouseover",".winLInfoRow",function(a){return b.winHover(a,!0)}),$(document).on("mouseout",".winLInfoRow",function(a){return b.winHover(a,!1)}),this.showHistoryMainTable(a),this.showSpinInfo(a),$("#button_history").css("pointer-events","none"),$("#button_history").addClass("disabled")}return b.prototype.showHistoryMainTable=function(b){for(var c=[[""+i.getPhrase("time"),""+i.getPhrase("betHistory"),""+i.getPhrase("Total_Win"),""+i.getPhrase("currency"),""+i.getPhrase("info")]],d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hh">'+c[e][g]+"</div>";d+='<div class="rr">'+f+"</div>"}for(var h=new Array,e=0;e<b.gameRoundList.length;e++)h.push([b.gameRoundList[e].timestamp,a.Common.Currency.format(q.amountValue(b.gameRoundList[e].bet)),a.Common.Currency.format(q.amountValue(b.gameRoundList[e].won)),b.gameRoundList[e].currency,this.getimage(),b.gameRoundList[e].id]);for(var j="",k=0;k<h.length;k++){for(var l="",m=0;m<h[k].length-1;m++){l+='<div id="cell-'+(k+""+m)+'" class="cellData">'+h[k][m]+"</div>"}j+='<div class="spinInfo" data-id="'+k+'" style="background-color: '+(k%2==0?"#323232":"#040C00")+'">'+l+"</div>"}var n='<div class="spinData">'+j+"</div>";$("#historyData").append(d),$("#historyData").append(n)},b.prototype.showSpinInfo=function(b){$(".spinData").on("click",".spinInfo",function(b){var c=$(this).data("id");$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove(),a.Common.ApplicationBase.instance.emit(g.SEND_ROUND_HISTORY_REQUEST,{id:Number(c)}),$("#exit_btn").on("click",function(){$("#history_table_wrapper")[0].children.length>0&&$(".tableOuter").remove()})})},b.prototype.getimage=function(){return'<img class="symbolInfo" src = "../common/images/settings/info_icon.webp" >'},b.prototype.showGrid=function(a,b){var c=(a[b].transactions[0].response.game.grid,this.transPoseGrid(a[b].transactions[0].response.game.grid));console.log(c);for(var d="",e=0,f=0;f<c.length;f++){for(var g="",h=0;h<c[f].length;h++){var i=e++;g+='<div id="symb-'+i+'" >'+this.imageConversion(c[f][h],i)+"</div>"}d+="<div class='row' id=\"rowsymb-"+f+'" >'+g+"</div>"}return'<div class="symbolGridL">'+d+"</div>"},b.prototype.createWinHeading=function(a,b){var c=new Array;c.push([""+i.getPhrase("payline"),""+i.getPhrase("symbol"),""+i.getPhrase("win")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hrr">'+c[e][g]+"</div>";d+='<div class="wHead">'+f+"</div>"}return'<div id="leftWinHead">'+d+"</div>"},b.prototype.showGridwin=function(a,b){var c=[],d="",e=a[b].transactions[0].response.game.winDetails;if(console.log("all win details",e),e.length>0){console.log("yes i a greater");for(var f="",g=0;g<e.length;g++)f=e[g].symbol,c.push([e[g].paylineId,this.convertWinSymb(f),e[g].win]),console.log("Left grid win",c);for(var h=0;h<c.length;h++){for(var i="",j=0;j<c[h].length;j++)i+='<div   class="winInfo" >'+c[h][j]+"</div>";d+='<div class="winLInfoRow" data="'+e[h].positions+'"  id="winLine-'+j+'" >'+i+"</div>"}}return'<div class="gridLWinInfo">'+d+"</div>"},b.prototype.bgClose=function(){console.log("from bg close");var a=document.createElement("button");a.id="clsBtn",a.innerHTML="X",a.onclick=function(){$("#allSpinsRecord").remove(),$("#allSpinsRecord").hide(),$(".tableOuter").show()},$(".closeBtnCont").append(a)},b.prototype.transPoseGrid=function(a){for(var b=[],c=0;c<a[0].length;c++){for(var d=[],e=0;e<a.length;e++)d.push(a[e][c]);b.push(d)}return b},b.prototype.imageConversion=function(a,b){return'<img id="symbol-img" class="symbb-'+b+'"  src = "./assets/html/images/settings/symbols/'+{WW:"W1",AA:"H1",BB:"H2",CC:"H3",DD:"M1",EE:"M2",FF:"M3",GG:"L1",HH:"L2",JJ:"L3",KK:"L4",FG:"B1"}[a]+'.webp" >'},b.prototype.showTransactionTable=function(a,b){$(".tableOuter").hide();var c=new Array;c.push([""+i.getPhrase("time"),""+i.getPhrase("info"),""+i.getPhrase("bet"),""+i.getPhrase("win"),""+i.getPhrase("closing balance"),""+i.getPhrase("currency")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hh">'+c[e][g]+"</div>";d+='<div class="fgrr">'+f+"</div>"}for(var h=new Array,e=a[b].transactions.length-1;e>=0;e--)h.push([a[b].transactions[e].time,this.getimage(),a[b].transactions[e].response.game.totalBet,a[b].transactions[e].response.game.totalWin,a[b].transactions[e].response.balance,a[b].currency]);for(var j=h.length-1,k="",l=0;l<h.length;l++){for(var m="",n=0;n<h[l].length;n++){m+='<div id="cell-'+(l+""+n)+'" class="cellData">'+h[l][n]+"</div>"}k+='<div id="'+j--+'" class="fgSpinInfo">'+m+"</div>"}var o='<div class="fgSpinData">'+k+"</div>",p="";p+='<div class="fgTableClsBtn"></div>'+d+o;var q='<div id="fgtableOuter">'+p+"</div>";$("#history_table_wrapper").append(q),this.fgTableClose()},b.prototype.showTransactionInfo=function(a,b){var c=this;$(".fgSpinData .fgSpinInfo").on("click",function(d){var e=d.currentTarget.id;if($("#fgtableOuter").hide(),console.log("in free game clicked id"+e),a[b].transactions[e].response.game.hasOwnProperty("reSpinState")){var f="";f+='<div class="fgInfoCloseBtnCont"></div><div class="gameRoundInfoHead"><p>'+i.getPhrase("respin")+'</p></div><div class="gameBasicInfo"><pre><p>'+i.getPhrase("gameroundid")+"   "+a[b].gameRoundId+"</p>\n                       <p>"+i.getPhrase("game")+"  "+a[b].game+"</p>\n                       <p>"+i.getPhrase("time")+"  "+a[b].transactions[e].time+'</p>\n                       </pre></div><div class="gameTransactionInfo"><pre><h3>'+i.getPhrase("transactions")+"</h3>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("action")+"  "+a[b].transactions[e].request.action+"</p>\n                       <p>"+i.getPhrase("bet")+" "+a[b].transactions[e].response.game.totalBet+"</p>\n                       "+c.showReSpinGrid(a,b,e)+'\n                       <div id="expendingWildGrid"></div>\n                       '+c.createLWinHeading(a,b)+"\n                       "+c.showReSpinGamewin(a,b,e)+"\n                       <hr>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+'</p>\n\n                       </pre></div><div class="gameSummaryInfo"><pre>\n                       <h3>'+i.getPhrase("summary")+"</h3>\n                       <p>"+i.getPhrase("bet")+"  "+a[b].transactions[0].response.game.totalBet+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+"</p>\n                       <p>"+i.getPhrase("closing balance")+"   "+a[b].transactions[e].response.balance+"</p>\n                       <p>"+i.getPhrase("currency")+"  "+a[b].currency+"</p>\n                       </pre></div>";var g='<div id="freeGameData">'+f+"</div>";$("#history_table_wrapper").append(g);var h=a[b].transactions[e].response.game.reSpinState.reelModifiers;h.forEach(function(a){var b=(a.symbol,a.position);$(".symbb-"+b).attr("src","./assets/html/images/settings/symbols/W1.webp")}),c.fgInfoClose()}else{var f="";f+='<div class="fgInfoCloseBtnCont"></div><div class="gameRoundInfoHead"><p>'+i.getPhrase("free game")+'</p></div><div class="gameBasicInfo"><pre><p>'+i.getPhrase("gameroundid")+"   "+a[b].gameRoundId+"</p>\n                       <p>"+i.getPhrase("game")+"  "+a[b].game+"</p>\n                       <p>"+i.getPhrase("time")+"  "+a[b].transactions[e].time+'</p>\n                       </pre></div><div class="gameTransactionInfo"><pre><h3>'+i.getPhrase("transactions")+"</h3>\n                       <p>"+a[b].transactions[e].time+"</p>\n                       <p>"+i.getPhrase("action")+"  "+a[b].transactions[e].request.action+"</p>\n                       <p>"+i.getPhrase("bet")+" "+a[b].transactions[e].response.game.totalBet+"</p>\n                       "+c.showFgGrid(a,b,e)+'\n                       <div id="replaceGrid"></div>\n                       '+c.createLWinHeading(a,b)+"\n                       "+c.showFreeGamewin(a,b,e)+"\n                       <hr>\n                       <p>"+a[b].transactions[e].time+"</p>\n                        <P>"+i.getPhrase("spin left")+" "+a[b].transactions[e].response.game.freeSpinState.spinsLeft+"</P>\n                         <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+'</p>\n\n                       </pre></div><div class="gameSummaryInfo"><pre>\n                       <h3>'+i.getPhrase("summary")+"</h3>\n                       <p>"+i.getPhrase("bet")+"  "+a[b].transactions[0].response.game.totalBet+"</p>\n                       <p>"+i.getPhrase("win")+"   "+a[b].transactions[e].response.game.totalWin+"</p>\n                       <p>"+i.getPhrase("closing balance")+"   "+a[b].transactions[e].response.balance+"</p>\n                       <p>"+i.getPhrase("currency")+"  "+a[b].currency+"</p>\n                       </pre></div>";var g='<div id="freeGameData">'+f+"</div>";$("#history_table_wrapper").append(g);var h=a[b].transactions[e].response.game.freeSpinState.reelModifiers;h.forEach(function(a){var b=(a.symbol,a.position);$(".symbb-"+b).attr("src","./assets/html/images/settings/symbols/W1.webp")}),c.fgInfoClose()}})},b.prototype.fgTableClose=function(){var a=document.createElement("button");a.id="fgTableBtn",a.innerHTML="X",a.onclick=function(){$("#fgtableOuter").remove(),$("#fgtableOuter").hide(),$(".tableOuter").show()},$(".fgTableClsBtn").append(a)},b.prototype.fgInfoClose=function(){var a=document.createElement("button");a.id="fgTableBtn",a.innerHTML="X",a.onclick=function(){$("#freeGameData").remove(),$("#freeGameData").hide(),$("#fgtableOuter").show()},$(".fgInfoCloseBtnCont").append(a)},b.prototype.showFgGrid=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am free game grid"+d);for(var e="",f=0,g=0;g<d.length;g++){for(var h="",i=0;i<d[g].length;i++){var j=f++;h+='<div id="symb-'+j+'" >'+this.imageConversion(d[g][i],j)+"</div>"}e+="<div class='row'  id=\"rowsymb-"+g+'" >'+h+"</div>"}return'<div class="symbolGridL">'+e+"</div>"},b.prototype.newGrid=function(a,b,c,d){for(var e=this.transPoseGrid(a[b].transactions[c].response.game.grid),f="",g=0,h=0;h<e.length;h++){for(var j="",k=0;k<e[h].length;k++){for(var l=0;l<d.length;l++)e[h][k]==d[l]&&(e[h][k]=a[b].transactions[c].response.game.freeSpinState.convertedToSymbol);var m=g++;j+='<div id="symbl-'+m+'" >'+this.imageConversion(e[h][k],m)+"</div>"}f+="<div class='row' id=\" rowsymb-"+h+'" >'+j+"</div>"}var n="<div><p>"+i.getPhrase("grid after symbol replacement")+"</p></div>",o='<div class="symbolGridN">'+f+"</div>";$("#replaceGrid").append(n),$("#replaceGrid").append(o)},b.prototype.showReSpinGrid=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am respin game grid"+d)
;for(var e="",f=0,g=0;g<d.length;g++){for(var h="",i=0;i<d[g].length;i++){var j=f++;h+='<div id="symb-'+j+'" >'+this.imageConversion(d[g][i],j)+"</div>"}e+="<div class='row' id=\"rowsymb-"+g+'" >'+h+"</div>"}return'<div class="symbolGridL">'+e+"</div>"},b.prototype.showReSpinGrid2=function(a,b,c){var d=this.transPoseGrid(a[b].transactions[c].response.game.grid);console.log("I am respin game grid"+d);for(var e="",f=0,g=0;g<d.length;g++){for(var h="",j=0;j<d[g].length;j++){var k=f++;h+='<div id="symb-'+k+'" >'+this.imageConversion(d[g][j],k)+"</div>"}e+="<div class='row' id=\"rowsymb-"+g+'" >'+h+"</div>"}var l="<div><p>"+i.getPhrase("updated grid with expending wild")+"</p></div>",m='<div class="symbolGridN">'+e+"</div>";$("#expendingWildGrid").append(l),$("#expendingWildGrid").append(m)},b.prototype.createLWinHeading=function(a,b){var c=new Array;c.push([""+i.getPhrase("payline"),""+i.getPhrase("symbol"),""+i.getPhrase("win")]);for(var d="",e=0;e<c.length;e++){for(var f="",g=0;g<c[e].length;g++)f+='<div class="hrr">'+c[e][g]+"</div>";d+='<div class="wHead">'+f+"</div>"}return'<div id="leftWinHead">'+d+"</div>"},b.prototype.showFreeGamewin=function(a,b,c){var d=[],e="",f=a[b].transactions[c].response.game.winDetails;if(console.log("all win details",f),f.length>0){console.log("yes i a greater");for(var g="",h=0;h<f.length;h++)g=f[h].symbol,d.push([f[h].paylineId,this.convertWinSymb(g),f[h].win]),console.log("Left grid win",d);for(var i=0;i<d.length;i++){for(var j="",k=0;k<d[i].length;k++)j+='<div   class="winInfo" >'+d[i][k]+"</div>";e+='<div class="winLInfoRow" data="'+f[i].positions+'"  id="winLine-'+k+'" >'+j+"</div>"}}return'<div class="gridLWinInfo">'+e+"</div>"},b.prototype.showReSpinGamewin=function(a,b,c){var d=[],e="",f=a[b].transactions[c].response.game.winDetails;if(f.length>0){console.log("yes i a greater");for(var g="",h=0;h<f.length;h++)g=f[h].symbol,d.push([f[h].paylineId,this.convertWinSymb(g),f[h].win]),console.log("Left grid win",d);for(var i=0;i<d.length;i++){for(var j="",k=0;k<d[i].length;k++)j+='<div   class="winInfo" >'+d[i][k]+"</div>";e+='<div class="winLInfoRow" data="'+f[i].positions+'"  id="winLine-'+k+'" >'+j+"</div>"}}return'<div class="gridLWinInfo">'+e+"</div>"},b.prototype.convertWinSymb=function(a){return'<img class="symbolWin-img" src = "./assets/html/images/settings/symbols/'+{WW:"W1",AA:"H1",BB:"H2",CC:"H3",DD:"M1",EE:"M2",FF:"M3",GG:"L1",HH:"L2",JJ:"L3",KK:"L4",FG:"B2"}[a]+'.webp" >'},b.prototype.winHover=function(a,b){var c=a.currentTarget.getAttribute("data").split(",");console.log(c),console.log("I am in wininfo",a),b?c.map(function(a){$("#symb-"+a).css("background-color","lightgreen"),console.log(a)}):c.map(function(a){return $("#symb-"+a).css("background-color","")})},b}();c.HistoryPanel=v;var w=function(){function d(c){this._$divId=$(c),a.Common.ApplicationBase.instance.emit(b.WinManager.STOP_SYMBOLS_ANIMATION,!0)}return d.prototype.maxBetClick=function(){a.Common.Server.isbetSelect=!0;var b=n.betLevels[n.betLevels.length-1],d=$("#"+n.betLevels.length),e=Number(d[0].innerText.split(" ")[1]);a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:b,totalBet:e}),$("#betPanelValue").empty(),$("#betPanelValue").append(d[0].innerText);var f=$(".current-bet")[0].id;$("#"+f).removeClass("current-bet"),d.addClass("current-bet"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE)},d.prototype.removeBet=function(){},d.prototype.selectedBet=function(b){var d=b.target.id,e=$(".current-bet")[0].id;$("#"+e).removeClass("current-bet"),$("#"+d).addClass("current-bet"),$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty();var f=Number($("#"+d)[0].innerText.split(" ")[1]);$("#betPanelValue").append($("#"+d)[0].innerText);var g=Number($(".current-bet")[0].id)-1,h=n.betLevels[g];a.Common.Server.isbetSelect=!0,a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_BET_CHANGE,{betLevel:h,totalBet:f}),$("#confirmBet").addClass("selectedConfirmButton"),j.globalSounds.playCue("GENERIC_CLICK"),a.Common.ApplicationBase.instance.emit(c.EVENT_BET_PANEL_CLOSE)},d.prototype.changeCurrentBet=function(a){$("#confirmBet").css("pointer-events","all"),$("#confirmBet").removeClass("selectedConfirmButton"),$("#betPanelValue").empty(),$("#betPanelValue").append(k.format(a.totalBet)),$("#confirmBet").addClass("selectedConfirmButton")},d}();c.BetSettingsPanel=w;var x;!function(a){a[a.COLLAPSED=0]="COLLAPSED",a[a.EXPANDED=1]="EXPANDED"}(x=c.AutoSettingsPanelState||(c.AutoSettingsPanelState={}));var y=function(){function a(a,b,c){void 0===c&&(c=null);var d=this;this._$div=a,this._values=b,this._changeHandler=c,this._idx=0,this._maxIdx=0,this._selectedIdx=-1,this._$prevBtn=a.find(".button_arrow.left"),this._$nextBtn=a.find(".button_arrow.right"),this._$items=a.find(".multiselect-items .panel_icon").toArray().map(function(a){return $(a)}),this._maxIdx=Math.floor((this._values.length-1)/this._$items.length),this._$prevBtn.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx-1)}),this._$nextBtn.on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),d.updatePage(d._idx+1)});var e=this;a.find(".multiselect-items .panel_icon").on("click",function(a){j.globalSounds.playCue("GENERIC_CLICK"),e._selectedIdx=e.getIdx(e._idx,$(this).index()),e.updateItems(),c&&c(e._values[e._selectedIdx])}),this.updatePage(this._idx)}return a.prototype.value=function(){return this._selectedIdx>-1?this._values[this._selectedIdx]:0},a.prototype.reset=function(){this._selectedIdx=-1,this.updatePage(0),this._changeHandler&&this._changeHandler(0)},a.prototype.updatePage=function(a){this._idx=Math.max(Math.min(a,this._maxIdx),0),this.updateButtons(),this.updateItems()},a.prototype.updateButtons=function(){0==this._idx?this._$prevBtn.addClass("disabled"):this._$prevBtn.removeClass("disabled"),this._idx==this._maxIdx?this._$nextBtn.addClass("disabled"):this._$nextBtn.removeClass("disabled")},a.prototype.updateItems=function(){var a=this;this._$items.forEach(function(b,c){var d=a.getIdx(a._idx,c),e=a._values[d],f=d==a._selectedIdx;f?b.addClass("selected"):b.removeClass("selected"),b.val(e),b.find("span").text(""+e),b.find("radio").prop("checked",f)})},a.prototype.getIdx=function(a,b){return Math.max(Math.min(a*this._$items.length,this._values.length-this._$items.length),0)+b},a.prototype.getValue=function(a,b){return this._values[this.getIdx(a,b)]},a}();c.Multiselect=y;var z=function(){function b(b,c){void 0===c&&(c=null);var d=this;this._$div=b,this._changeHandler=c,this._$div.on("keydown",function(b){var c=b.key,e=d._$div.val();if(!(-1!==$.inArray(b.keyCode,[8,9,13,27,46])||b.keyCode>=35&&b.keyCode<=39||b.ctrlKey||b.metaKey)){var f=a.Core.Environment.defaultSettings.currencyDecimalPlaces;if("."!==c&&","!==c&&190!==b.keyCode&&110!==b.keyCode){if(!/^[0-9]$/.test(c))return b.preventDefault(),!1;if(f>0&&e.includes(".")){var g=e.indexOf("."),h=e.substring(g+1).length;if(d.getCaretPosition()>g&&h>=f)return b.preventDefault(),!1}if(e.replace(".","").length>=12)return b.preventDefault(),!1;d.callChangeHandler()}else{if(0===f)return b.preventDefault(),!1;if(!/^\d+$/.test(e))return b.preventDefault(),!1;if(e.includes("."))return b.preventDefault(),!1}}}),this._$div.on("input",function(){var a=d.sanitizeInput(d._$div.val());a.replace(".","").length>12&&(a=a.substring(0,12)),d._$div.val(a),d.callChangeHandler()}),this._$div.on("paste",function(a){var b=(a.originalEvent||a).clipboardData.getData("text"),c=d.sanitizeInput(b);c!==b&&(a.preventDefault(),d._$div.val(c),d.callChangeHandler())})}return b.prototype.reset=function(){this._changeHandler&&this._changeHandler(0),this._$div.val("")},b.prototype.callChangeHandler=function(){var b=this;a.Core.Time.juggler.setTimeout(function(){if(b._changeHandler){var a=parseFloat(b._$div.val());b._changeHandler(isNaN(a)?0:a)}},1)},b.prototype.sanitizeInput=function(b){var c=a.Core.Environment.defaultSettings.currencyDecimalPlaces,d=b.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1").replace(/^0+(\d)/,"$1");if(0===c)d=d.split(".")[0];else if(d.includes(".")){var e=d.split("."),f=e[0],g=e[1].substring(0,c);d=f+"."+g}return d},b.prototype.getCaretPosition=function(){var a=this._$div.get(0);return a&&null!=a.selectionStart?a.selectionStart:this._$div.val().length},b}();c.MoneyInput=z}(b.ControlPanel||(b.ControlPanel={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=a.Common.GameEvents,e=a.Common.Server,f=a.Core.Environment,g=a.Core.Renderer.StageSetup,h=a.Core.Events,i=a.Core.Renderer.Stage,j=function(b){function c(c,d){var j=b.call(this,c,d)||this;return j.deviceMode="",j.isLoadingStarted=!1,a.Common.ApplicationBase.instance.on(e.HANDLE_ALERT_RESPONSE,j.onServerAlert,j),j.once(a.Core.Events.ON_CREATE,function(){j._stageSetup=new g,j._stageSetup.width=f.defaultSettings.width,j._stageSetup.height=f.defaultSettings.height,j._stageSetup.isTransparent=!0,j._stageSetup.resolution=1,j._stageSetup.divId="renderer_canvas_loader",j._stageSetup.fps=f.isDeviceMobile()?f.defaultSettings.mobileFPS:f.defaultSettings.desktopFPS,j._stage=new i,j._stage.init(j._stageSetup),j.resizeGameWrapper(j._stageSetup)}),h.coreEvents.on(h.ON_APP_RESIZE,function(){j.resizeGameWrapper(j._stageSetup)},j),j.loaderHolder=$(".loading"),j.on(a.Core.Events.ON_SHOWN,function(){j.startLoadingScreen(),j.isLoadingStarted=!0}),j.on(a.Core.Events.ON_HIDDEN,function(){a.Common.ApplicationBase.instance.emit(e.SEND_GAME_IS_READY),a.Common.ApplicationBase.instance.off(e.HANDLE_ALERT_RESPONSE,j.onServerAlert),$("#control_panel").show(),$("#loader_progress_bar").css("display","none"),$("#client_title_wrapper_loading").css("display","none"),j.loaderHolder.css("display","none")}),j}return __extends(c,b),c.prototype.startLoadingScreen=function(){var b=this;$("#client_title_wrapper_loading").css("display","block");var c=$("#loader_progress_bar");a.Common.ApplicationBase.instance.on(d.ON_LOAD_PROGRESS,function(a){$("#loader_progress_bar")[0].dataset.label=Math.round(100*a)+"%",a>0&&b.loaderHolder.css("visibility","visible"),a<1&&a>0&&$("#logo_holder").fadeIn(),TweenLite.to(c,.1,{value:100*a,ease:Linear.easeNone})},this),a.Common.ApplicationBase.instance.emit(d.ON_LOAD_PROGRESS,0)},c.prototype.resizeGameWrapper=function(a){if(f.updatedHeight=window.innerHeight,f.isMobile()){f.updatedHeight=window.innerHeight,this.deviceMode=f.currentMode;document.documentElement.style.setProperty("--app-height",f.updatedHeight+"px")}var b=$("#game_wrapper"),c=a.width/a.height,d=window.innerWidth,e=f.updatedHeight,g=d/e;if(g>c?(d=e*c,b.css("height",e+"px"),b.css("width",d+"px")):(f.isPortrait()&&!f.isDesktop()||(e=d/c),b.css("height",e+"px"),b.css("width",d+"px")),b.css("marginLeft",-d/2+"px"),b.css("position","absolute"),b.css("left","50%"),f.isPortrait()&&!f.isDesktop())b.css("top","0px"),b.css("marginTop","0px"),b.css("marginLeft","0px"),b.css("left","0%"),$("#client_title_wrapper_loading").css("transform","translateX(-50%) scale("+1.9*g+")"),$("#brand_icon_wrapper_loading")&&$("#brand_icon_wrapper_loading").css("transform","translateX(-50%) scale("+1.8*g+")");else if($("#client_title_wrapper_loading").css("transform","translateX(-50%) scale("+.42*g+")"),f.isDesktop()?$("#brand_icon_wrapper_loading")&&$("#brand_icon_wrapper_loading").css("transform","translateX(-50%) scale("+.55*g+")"):$("#brand_icon_wrapper_loading")&&$("#brand_icon_wrapper_loading").css("transform","translateX(-50%) scale("+.35*g+")"),"4:3"==f.getAspectRatio()){b.css("top","0px"),b.css("height","100%"),b.css("marginTop","0");var h=$("#renderer_canvas_loader");h.css("transform","translateX(-50%) scaleX(1.3)"),h.css("left","50%")}else{var h=$("#renderer_canvas_loader");h.css("transform","translateX(0) scaleX(1)"),h.css("left","0%"),b.css("top","50%"),"iOS"==f.getPlatformData().os.family&&$(window).height()!=window.innerHeight?b.css("marginTop",-e/2+25+"px"):b.css("marginTop",-e/2+"px")}window.scroll(0,1)},c.prototype.onServerAlert=function(){$("#instant_loader").hide()},c}(c);b.Loader=j}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.StageSetup,d=a.Core.Events,e=a.Core.HTML.Page,f=a.Core.Environment,g=a.Common.GameEvents,h=a.Core.Renderer.Stage,i=function(b){function e(e,i){var j=b.call(this,e,i)||this;j.deviceMode="",j.vw=document.createElement("div"),j.vw.style.position="fixed",j.vw.style.height="100vh",j.vw.style.width="0",j.vw.style.top="0",document.documentElement.appendChild(j.vw),j.once(a.Core.Events.ON_CREATE,function(){j._stageSetup=new c,j._stageSetup.width=f.defaultSettings.width,j._stageSetup.height=f.defaultSettings.height,j._stageSetup.isTransparent=!0,j._stageSetup.resolution=1,j._stageSetup.divId="renderer_canvas",j._stageSetup.fps=f.isDeviceMobile()?f.defaultSettings.mobileFPS:f.defaultSettings.desktopFPS,j._stage=new h,j._stage.init(j._stageSetup),j.resizeGameWrapper(j._stageSetup)}),d.coreEvents.on(d.ON_APP_RESIZE,function(){j.resizeGameWrapper(j._stageSetup)},j);var k=function(a){$(a.target).hasClass("no_fullscreen")||(f.goFullScreen(),$("body").off("mouseup",k))};return a.Common.ApplicationBase.instance.on(g.ON_GAME_INITIALIZED,function(){f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),d.coreEvents.on(f.EVENT_FULL_SCREEN,function(a){!a&&f.isFullScreenAvailable()&&f.isMobile()&&$("body").on("mouseup",k)}),j}return __extends(e,b),e.prototype.resizeGameWrapper=function(a){if(f.updatedHeight=window.innerHeight,f.isMobile()){""==this.deviceMode||this.deviceMode==f.currentMode?f.updatedHeight=window.innerHeight:f.updatedHeight=this.vw.offsetHeight,this.deviceMode=f.currentMode;document.documentElement.style.setProperty("--app-height",f.updatedHeight+"px")}var b=$("#game_wrapper"),c=a.width/a.height,d=window.innerWidth,e=f.updatedHeight;if(d/e>c?(d=e*c,b.css("height",e+"px"),b.css("width",d+"px")):(f.isPortrait()&&!f.isDesktop()||(e=d/c),b.css("height",e+"px"),b.css("width",d+"px")),b.css("marginLeft",-d/2+"px"),b.css("position","absolute"),b.css("left","50%"),f.isPortrait()&&!f.isDesktop())b.css("top","0px"),b.css("marginTop","0px"),b.css("marginLeft","0px"),b.css("left","0%");else if("4:3"==f.getAspectRatio()){b.css("top","0px"),b.css("height","100%"),b.css("marginTop","0");var g=$("#renderer_canvas");g.css("transform","translateX(-50%) scaleX(1.3)"),g.css("left","50%")}else{var g=$("#renderer_canvas");g.css("transform","translateX(0) scaleX(1)"),g.css("left","0%"),b.css("top","50%"),"iOS"==f.getPlatformData().os.family&&$(window).height()!=window.innerHeight?b.css("marginTop",-e/2+25+"px"):b.css("marginTop",-e/2+"px")}window.scroll(0,1)},e}(e);b.Main=i}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.HTML.Page,e=a.Core.Lang,f=a.Core.SoundManager,g=function(b){function d(d,g){var h=b.call(this,d,g)||this;return h.on(a.Core.Events.ON_SHOWN,function(b){a.Common.ApplicationBase.instance.emit(c.ON_FATAL_ERROR,b),f.globalSounds.playCue("Error_Appearance"),$("#control_panel").remove();var d;"reload_caps"==e.getPhrase("reload_caps")?(window.vex.dialog.buttons.YES.text="RELOAD",d="Generic Server Error."):(window.vex.dialog.buttons.YES.text=e.getPhrase("reload_caps"),d=b.getPlayerMessage()),window.vex.dialog.alert({message:d,callback:function(b){a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_RELOAD_REQUEST,b)}})}),h}return __extends(d,b),d}(d);b.Error=g}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){alert("DIALOG")}),e}return __extends(c,b),c}(c);b.Dialog=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.HTML.Page,d=function(b){function c(c,d){var e=b.call(this,c,d)||this;return e.on(a.Core.Events.ON_SHOWN,function(){var b=decodeURIComponent(a.Core.Environment.launchVariables.exit_url);b&&("close"===b?window.close():window.location.replace(b))}),e}return __extends(c,b),c}(c);b.GameOver=d}(a.HTMLPageClasses||(a.HTMLPageClasses={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.SceneProfile,f=a.Common.Server.SymbolPosition,g=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._lineSprites=[],e._winManager=a,e}return __extends(d,c),d.prototype.init=function(){if(this._sceneProfile=e.getSceneProfile(this._params.game_id),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete,this),this._lineContainer=new PIXI.Container,this._winManager.getAperture().addChild(this._lineContainer),this._sceneProfile.get().shawPayline&&this._sceneProfile.get().paylines)for(var c=this._sceneProfile.get().paylines,d=this,g=0;g<c.length;g++)!function(a){for(var b=[],e=0;e<c[a].length;e++)b.push(new f(e,c[a][e]));if(d._params.lineImages&&a<d._params.lineImages.length&&d._params.lineImages[a]){var g=d._winManager.getAperture().getPositionCentreList(b,d._winManager),h=g.slice(),i=(h.shift(),d._assets.getMovieClip(d._params.lineImages[a],!1));d._lineSprites.push(i)}else{var j=new PIXI.Graphics;d._winManager.getAperture().getPositionCentreList(b,d._winManager);d._lineSprites.push(j)}}(g)},d.prototype.destroy=function(){a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onShowWinSummary),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.onWinPresentationComplete)},d.prototype.onWinPresentationComplete=function(){this._lineContainer.removeChildren()},d.prototype.onShowWin=function(a){this._lineContainer.removeChildren(),this.addPaylineToContainer(a)},d.prototype.onShowWinSummary=function(a){var c=this;this._lineContainer.removeChildren(),a.applyToAllWins(function(a){a.getType()===b.SlotWin.TYPE_LINE&&c.addPaylineToContainer(a)})},d.prototype.addPaylineToContainer=function(a){if(a.getType()===b.SlotWin.TYPE_LINE){if(this._lineSprites&&this._lineSprites.length>0){var c=this._lineSprites[a.getLine()-1];c.position=new PIXI.Point(this._params.position.x,this._params.position.y),this._lineContainer.addChild(c),c.isSprite&&this._assets.playAnimation(c,!0)}this.drawLineMask(a)}},d.prototype.drawLineMask=function(a){var b=this._winManager.getAperture().getPositionCentreList(a.getPositions(),this._winManager),c=b.slice(),d=new PIXI.Graphics;d.beginFill(this._sceneProfile.get().symbolMask.color,0);for(var e=this._sceneProfile.get().symbolMask.x,f=this._sceneProfile.get().symbolMask.y,g=this._sceneProfile.get().symbolMask.w,h=this._sceneProfile.get().symbolMask.h,i=0;i<b.length;i++){var j=c.shift();d.drawRect(j.x-e,j.y-f,g,h)}d.endFill(),this._lineContainer.addChild(d)},d}(d);c.PaylineRenderer=g}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(c){var d=a.Core.Renderer.ComponentPlugin,e=a.Common.SceneProfile,f=a.Common.GameEvents,g=a.Core.SoundManager,h=function(c){function d(a,b,d){var e=c.call(this,a,b,d)||this;return e._winManager=a,e._sounds=d.getSoundManager(),e}return __extends(d,c),d.prototype.init=function(){this._sceneProfile=e.getSceneProfile(this._params.game_id),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),a.Common.ApplicationBase.instance.on(f.ON_GET_GAME_RESULTS,this.onGetGameResults,this),a.Common.ApplicationBase.instance.on(f.ON_GAME_CHANGED,this.clear,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL,this.teaseReel,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_TEASE_REEL_END,this.clear,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(b.Aperture.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(f.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults,this),a.Common.ApplicationBase.instance.on(f.ON_REMOVE_SYMBOL_IN_HOLD,this.animateSymbolRemove,this),a.Common.ApplicationBase.instance.on(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim,this),a.Common.ApplicationBase.instance.on(b.WinManager.EVENT_REMOVE_WIN_SYMBOLS,this.onRemoveWinningSymbols,this)},d.prototype.destroy=function(){a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_WIN_PRESENTATION_END,this.clear),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(f.ON_GET_GAME_RESULTS,this.onGetGameResults),a.Common.ApplicationBase.instance.off(f.ON_GAME_CHANGED,this.clear),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_TEASE_REEL,this.teaseReel),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_TEASE_REEL_END,this.clear),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_SYMBOL_DROPPED,this.onSymbolDrop),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REELS_DROPPED,this.onReelsDropped),a.Common.ApplicationBase.instance.off(b.Aperture.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(f.ON_GET_CLEAR_ALL_SCREEN,this.onGetGameResults),a.Common.ApplicationBase.instance.off(b.WinManager.STOP_SYMBOLS_ANIMATION,this.stopSymbolAnim),a.Common.ApplicationBase.instance.off(b.WinManager.EVENT_REMOVE_WIN_SYMBOLS,this.onRemoveWinningSymbols),a.Common.ApplicationBase.instance.off(f.ON_REMOVE_SYMBOL_IN_HOLD,this.animateSymbolRemove)},d.prototype.clear=function(){this._movieLayer&&this._movieLayer.removeChildren(),this._teaseBackground&&this._winManager.getAperture().getBackContainer().removeChild(this._teaseBackground)},d.prototype.onGetGameResults=function(){this._movieLayer||(this._movieLayer=this._winManager.getSceneObject().getLayout().getComponent(this._params.anim_container)),this._movieLayer.visible=!0,this.clear()},d.prototype.onReelsDropped=function(){this.clear()},d.prototype.onReelDropped=function(a,b){var c=this;if(!b){a.getVisibleSymbols().forEach(function(a,b){if(a.getSymbolProfile().getReelDropClipId()){var d=c._assets.getMovieClip(a.getSymbolProfile().getReelDropClipId(),!0);d&&(d.position=a.getLocalCoords(c._movieLayer),c._movieLayer.addChild(d),c._assets.playAnimation(d,!1,function(){d.visible=!1}))}})}},d.prototype.onSymbolDrop=function(a){if(a.getSymbolProfile().getDropClipId()){var b=this._assets.getMovieClip(a.getSymbolProfile().getDropClipId(),!0);b&&(b.position=a.getLocalCoords(this._movieLayer),this._movieLayer.addChild(b),this._assets.playAnimation(b,!1,function(){b.visible=!1}))}},d.prototype.teaseReel=function(a,b){if(this._params.tease){var c=this._params.tease[b.getId()];if(c){if(c.frame&&(this._teaseFrame=this._teaseFrame||this._assets.getMovieClip(c.frame.movieclip,!0),this._teaseFrame)){this._teaseFrame.visible=!0,this._teaseFrame.position=a.getCentroid(this._movieLayer),a._setup.top_margin&&a._setup.top_margin>0&&(this._teaseFrame.position.y+=a._setup.top_margin);var d=c.frame.offsets;d&&(this._teaseFrame.position.x+=d.x||0,this._teaseFrame.position.y+=d.y||0),a._setup.anticipation_scale&&this._teaseFrame.scale.set(a._setup.anticipation_scale.x,a._setup.anticipation_scale.y),this._movieLayer.addChild(this._teaseFrame),this._assets.playAnimation(this._teaseFrame,!0)}if(c.background&&(this._teaseBackground=this._teaseBackground||this._assets.getMovieClip(c.background.movieclip,!0),this._teaseBackground)){this._teaseBackground.position=a.getCentroid(this._winManager.getAperture().getBackContainer()),a._setup.top_margin&&a._setup.top_margin>0&&(this._teaseBackground.position.y+=a._setup.top_margin);var d=c.background.offsets;d&&(this._teaseBackground.position.x+=d.x||0,this._teaseBackground.position.y+=d.y||0),a._setup.anticipation_scale&&this._teaseBackground.scale.set(a._setup.anticipation_scale.x,a._setup.anticipation_scale.y),this._winManager.getAperture().getBackContainer().addChild(this._teaseBackground),this._assets.playAnimation(this._teaseBackground,!0),this._teaseBackground.visible=!0}}}},d.prototype.onWinSummary=function(a){this._winManager.getAperture().getAllSymbols().forEach(function(a){a.alpha=this._params.noWinSymbolAlpha||.5}.bind(this)),a.applyToAllWins(function(a){this._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(a){this.animateSymbol(a)}.bind(this))}.bind(this))},d.prototype.onCoinSymbolDrop=function(a){if(a&&a.length>0){var b=this._winManager.getAperture().getSymbols(a);b.forEach(function(a){this.animateSymbol(a)}.bind(this)),b[0].getSymbolProfile().getAudioWinId()&&g.globalSounds.playCue(b[0].getSymbolProfile().getAudioWinId(),void 0,!1)}},d.prototype.animateSymbolRemove=function(b,c){var d=this;void 0===c&&(c=0),this._movieLayer||this.onGetGameResults();var e,f=b.symbolRemoveAnimate();if(f){if(f.position=b.getLocalCoords(this._movieLayer),this._movieLayer.addChild(f),b.visible=!1,this._assets.playAnimation(f,!1),f.x+=b.getSymbolProfile().getMovieClipOffsets().x,f.y+=b.getSymbolProfile().getMovieClipOffsets().y,this._params.blankSymbol&&b.setSymbol(this._params.blankSymbol),b.getSymbolProfile().getCoinValue()>0){var g=c>0?c:b.getSymbolProfile().getCoinValue();for(g*=a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),e=new PIXI.Text(a.Common.Currency.format(g,!0),this._winManager.getAperture()._setup.coin_value_data.disable_font),e.position.set(f.position.x+this._winManager.getAperture()._setup.coin_value_data.offset.x,f.position.y+this._winManager.getAperture()._setup.coin_value_data.offset.y),e.anchor.set(.5,.5);e.width>.57*b.width;)e.scale.x-=.05,e.scale.y-=.05;this._movieLayer.addChild(e)}else if(b.getSymbolPrize()&&""!=b.getSymbolPrize()){for(e=new PIXI.Text(b.getSymbolPrize(),this._winManager.getAperture()._setup.coin_value_data.disable_font),e.position.set(f.position.x+this._winManager.getAperture()._setup.coin_value_data.offset.x,f.position.y+this._winManager.getAperture()._setup.coin_value_data.offset.y),e.anchor.set(.5,.5);e.width>.57*b.width;)e.scale.x-=.05,e.scale.y-=.05;this._movieLayer.addChild(e)}f.onComplete=function(){d._movieLayer.removeChild(f),e&&d._movieLayer.removeChild(e)}}else TweenLite.to(b,.25,{alpha:0,onComplete:function(){d._params.blankSymbol&&b.setSymbol(d._params.blankSymbol),b.visible=!1,b.alpha=1}})},d.prototype.animateSymbol=function(b){var c=b.animate();if(c.frameClip&&(c.frameClip.position=b.getLocalCoords(this._movieLayer),this._params.win_frame_scale&&c.frameClip.scale.set(this._params.win_frame_scale||1),this._movieLayer.addChild(c.frameClip),this._assets.playAnimation(c.frameClip,!0)),c.animationClip){if(c.animationClip.position=b.getLocalCoords(this._movieLayer),this._movieLayer.addChild(c.animationClip),c.animationClip instanceof PIXI.AnimatedSprite||c.animationClip instanceof PIXI.spine.Spine)this._assets.playAnimation(c.animationClip,!1);else{c.animationClip.anchor.set(.5,.5);var d=!1,e=5,f=a.Core.Time.juggler.setInterval(function(){c.animationClip.alpha=d?1:.1,d=!d,0==e--&&a.Core.Time.juggler.clearTimeout(f)},250)}if(c.animationClip.x+=b.getSymbolProfile().getMovieClipOffsets().x,c.animationClip.y+=b.getSymbolProfile().getMovieClipOffsets().y,c.animationClip.alpha=.5,TweenLite.to(c.animationClip,.25,{alpha:1}),c.prizeText&&(c.prizeFrame&&(c.prizeFrame.visible=!0,c.prizeFrame.position.set(c.animationClip.x,c.animationClip.y),this._winManager.getAperture()._setup.coin_value_data.offsetF?(c.prizeFrame.x+=this._winManager.getAperture()._setup.coin_value_data.offsetF.x,c.prizeFrame.y+=this._winManager.getAperture()._setup.coin_value_data.offsetF.y):(c.prizeFrame.x+=this._winManager.getAperture()._setup.coin_value_data.offset.x,c.prizeFrame.y+=this._winManager.getAperture()._setup.coin_value_data.offset.y),c.prizeFrame.scale.set(c.prizeFrameScale,c.prizeFrameScale),c.prizeFrame.anchor.x=.5,c.prizeFrame.anchor.y=.5,this._movieLayer.addChild(c.prizeFrame)),c.prizeText.visible=!0,c.prizeText.position.set(c.animationClip.x,c.animationClip.y),c.prizeText.x+=this._winManager.getAperture()._setup.coin_value_data.offset.x,c.prizeText.y+=this._winManager.getAperture()._setup.coin_value_data.offset.y,this._movieLayer.addChild(c.prizeText)),this._params.popout){var g=c.animationClip.position,h=c.animationClip.scale;this._params.popout.offsets&&TweenLite.to(c.animationClip,this._params.popout.duration||.5,{x:c.animationClip.x+this._params.popout.offsets.x||-5,y:c.animationClip.y+this._params.popout.offsets.y||-5,ease:Power1.easeInOut,onComplete:function(){c.animationClip.position=g}}),this._params.popout.scale&&this._params.popout.scale!=h&&TweenLite.to(c.animationClip.scale,this._params.popout.duration||.5,{x:this._params.popout.scale,y:this._params.popout.scale,ease:Power1.easeInOut,onComplete:function(){c.animationClip.scale=h}})}}},d.prototype.onShowWin=function(a){var b=this;this._winManager.getAperture().getAllSymbols().forEach(function(a){a.stopAnimation(),a.alpha=this._params.noWinSymbolAlpha||.3}.bind(this)),
this._movieLayer.removeChildren();var c=this._winManager.getAperture().getSymbols(a.getPositions());c.forEach(function(a){b.animateSymbol(a)});var d=c.filter(function(b){return b.symbolId===a.getSymbolId()});d.length>0&&d[0].getSymbolProfile().getAudioWinId()&&g.globalSounds.playCue(d[0].getSymbolProfile().getAudioWinId(),void 0,!1)},d.prototype.onRemoveWinningSymbols=function(a){var b=this;g.globalSounds.playCue("symbol_remove"),a.applyToAllWins(function(a){b._winManager.getAperture().getSymbols(a.getPositions()).forEach(function(a){b.animateSymbolRemove(a)})})},d.prototype.stopSymbolAnim=function(){this.clear()},d}(d);c.SymbolAnimator=h}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=function(b){function c(a,c,d){var e=b.call(this,a,c,d)||this;return e._winManager=a,e}return __extends(c,b),c.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer)},c.prototype.addExpandingSymbolReels=function(b,c){var e=this;d.globalSounds.playCue("Wild_Expanding"),b.forEach(function(a){var b=e._winManager.getAperture().getReel(a.getReelIndex()),c=e._assets.getMovieClip(e._params.symbols[a.getSymbol()]);c&&(c.pivot.x=c.width/2,c.pivot.y=c.height/2,c.position.x=b.x+e._params.position.x,c.position.y=b.y+e._params.position.y+1.5*b._symbolHeight,c.scale.set(e._params.scale.x,e._params.scale.y),e._animationLayer.addChild(c),e._assets.playAnimation(c,!1))}),c&&a.Core.Time.juggler.setTimeout(function(){c()},2e3)},c.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},c}(c);b.ExpandingReelAnimator=e}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._winManager=b,e}return __extends(b,a),b.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer)},b.prototype.addModifierSymbols=function(a,b){var c=this;d.globalSounds.playCue("Random_Wild"),a.forEach(function(a){var b=c._winManager.getAperture().getReel(a.getPosition().getReelIndex()),d=c._assets.getMovieClip(c._params.symbols[a.getSymbol()]);d&&(d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=b.x+c._params.position.x,d.position.y=b._symbolHeight*(a.getPosition().getRowIndex()+.5)+b._setup.top_margin+c._params.position.y,d.scale.set(c._params.scale.x,c._params.scale.y),c._animationLayer.addChild(d),c._assets.playAnimation(d,!1))}),b&&b()},b.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},b}(c);b.ModifierSymbolAnimator=e}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){!function(b){var c=a.Core.Renderer.ComponentPlugin,d=a.Core.SoundManager,e=PIXI.Graphics,f=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._winManager=b,e}return __extends(b,a),b.prototype.init=function(){this._animationLayer=new PIXI.Container,this._winManager.getAperture().addChild(this._animationLayer),this._animationLayer.mask=new e,this._animationLayer.mask.beginFill(16777215),this._animationLayer.mask.drawRect(this._winManager.getAperture().x,this._winManager.getAperture().y,this._winManager.getAperture().width+(this._params.position.maskOffsetX||0),this._winManager.getAperture().height+(this._params.position.maskOffsetY||0)),this._animationLayer.mask.endFill(),this._animationLayer.mask.pivot.set(.5,.5),this._winManager.getAperture().addChild(this._animationLayer.mask)},b.prototype.addMovingWildSymbol=function(a){var b=this;d.globalSounds.playCue("Wild_Moving"),a.forEach(function(a){var c=b._winManager.getAperture().getReel(a.getPosition().getReelIndex()),d=b._assets.getMovieClip(b._params.symbols[a.getSymbol()]);d.pivot.x=d.width/2,d.pivot.y=d.height/2,d.position.x=c.x+b._params.position.x,d.position.y=c._symbolHeight*(a.getPosition().getRowIndex()+.5)+c._setup.top_margin+b._params.position.y,d.scale.set(b._params.scale.x,b._params.scale.y),b._animationLayer.addChild(d),TweenLite.to(d.position,.5,{y:d.position.y+b._params.move.y,x:d.position.x+b._params.move.x,ease:Cubic.easeIn,onStart:function(){b._assets.playAnimation(d,!1)},onComplete:function(){}})})},b.prototype.removeAnimations=function(){this._animationLayer.removeChildren()},b}(c);b.MovingWildAnimator=f}(b.Plugins||(b.Plugins={}))}(a.Slots||(a.Slots={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.SceneManager,d=a.Core.Renderer.Scene,e=a.Core.Environment,f=a.Core.Events,g=a.Core.SoundManager,h=a.Common.Server.ResponseResult,i=function(b){function d(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.pos=1,f}return __extends(d,b),d.prototype.onCreate=function(){var d=this;b.prototype.onCreate.call(this),this.pages=1,this.updateComponentData(),this.pages=this._layout.getLayoutParams().pages,this.pages>1&&this.rotateSplashScreen(),$("#button_history").css("display","none"),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_HIDE),this.on(f.ON_INTERACTION,function(a,b){"splash_button_continue"===b&&d.closeSplashScreen()}),this._layout.getComponent("splash_button_continue").visible=!0;var e=this._layout.getComponent("button1");if(e){e.interactive=!1;var h=this._layout.getComponent("screen_text_1");this._layout.getComponent("splash_button_continue"),this._layout.getComponent("splash_show_again_toggle");e.setState(!0),h.visible=!0;var i=this._layout.getComponent("splash_screen_1"),j=this._layout.getComponent("button2");j.interactive=!1;var k=this._layout.getComponent("screen_text_2"),l=this._layout.getComponent("splash_screen_2"),m=this._layout.getComponent("button3");m.interactive=!1;var n=this._layout.getComponent("screen_text_3"),o=this._layout.getComponent("splash_screen_3");l.visible=!1,o.visible=!1,k.visible=!1,n.visible=!1,this.on(f.ON_TOGGLE_INTERACTION,function(b){if(b.name.includes("button_")){var c=b.name.split("_");d.pos=parseInt(c[c.length-1]),d.setSplashScreenState()}if(b.name.includes("splash_show_again_toggle")){g.globalSounds.playCue("GENERIC_CLICK");var e=!d._layout.getComponent("splash_show_again_toggle").getState();a.Common.ApplicationBase.saveAppValue("splashScreen",e)}}),this.on(f.ON_INTERACTION,function(b,d){var e=this;if("splash_button_continue"==d)g.globalSounds.playCue("GENERIC_CLICK"),this._tweenRollUp.kill(),c.closeOverlay();else if("splash_button_left"==d){g.globalSounds.playCue("GENERIC_CLICK"),1==e.pos?e.pos=this.pages:e.pos--;for(var f=1;f<=this.pages;++f)f!==e.pos?(e._layout.getComponent("splash_screen_"+f).visible=!1,e._layout.getComponent("screen_text_"+f).visible=!1,e._layout.getComponent("message_frame_"+f).visible=!1,e._layout.getComponent("button"+f).setState(!1)):(e._layout.getComponent("splash_screen_"+f).visible=!0,this.createSlideMovie(f,"rightSlide"),e._layout.getComponent("screen_text_"+f).visible=!0,e._layout.getComponent("message_frame_"+f).visible=!0,e._layout.getComponent("button"+f).setState(!0));a.Core.Time.juggler.setTimeout(function(){e._layout.getComponent("splash_button_left").interactive=!0,e._layout.getComponent("splash_button_right").interactive=!0}.bind(this),100)}else if("splash_button_right"==d){g.globalSounds.playCue("GENERIC_CLICK"),e.pos==this.pages?e.pos=1:e.pos++;for(var f=1;f<=this.pages;++f)f!==e.pos?(e._layout.getComponent("splash_screen_"+f).visible=!1,e._layout.getComponent("screen_text_"+f).visible=!1,e._layout.getComponent("message_frame_"+f).visible=!1,e._layout.getComponent("button"+f).setState(!1)):(e._layout.getComponent("splash_screen_"+f).visible=!0,e._layout.getComponent("screen_text_"+f).visible=!0,e._layout.getComponent("message_frame_"+f).visible=!0,this.createSlideMovie(f,"rightSlide"),e._layout.getComponent("button"+f).setState(!0));a.Core.Time.juggler.setTimeout(function(){e._layout.getComponent("splash_button_left").interactive=!0,e._layout.getComponent("splash_button_right").interactive=!0}.bind(this),100)}}.bind(this)),this.on(f.ON_TOGGLE_INTERACTION,function(a){switch(a.name){case"button1":j.setState(!1),m.setState(!1),l.visible=!1,o.visible=!1,i.visible=!0,h.visible=!0,k.visible=!1,n.visible=!1,this.pos=0;break;case"button2":e.setState(!1),m.setState(!1),i.visible=!1,o.visible=!1,l.visible=!0,h.visible=!1,k.visible=!0,n.visible=!1,this.pos=1;break;case"button3":e.setState(!1),j.setState(!1),i.visible=!1,l.visible=!1,o.visible=!0,h.visible=!1,k.visible=!1,n.visible=!0,this.pos=2}}.bind(this)),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){d.onResize(),d.visible=!0},100)}else this.on(f.ON_TOGGLE_INTERACTION,function(b){if(b.name.includes("button_")){var c=b.name.split("_");d.pos=parseInt(c[c.length-1]),d.setSplashScreenState()}if(b.name.includes("splash_show_again_toggle")){var e=!d._layout.getComponent("splash_show_again_toggle").getState();a.Common.ApplicationBase.saveAppValue("splashScreen",e)}}),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){d.onResize(),d.visible=!0},100)},d.prototype.rotateSplashScreen=function(){var b=this;this._tweenRollUp=new TimelineLite({onComplete:function(){b.pos==b.pages&&(b.pos=0),b.pos++,this.restart()}}),this._layout.getComponent("button1")&&this._tweenRollUp.to("",a.Core.Environment.defaultSettings.splashTime,{onStart:function(){for(var a=1;a<=b.pages;++a)a!==b.pos?(b._layout.getComponent("splash_screen_"+a).visible=!1,b._layout.getComponent("screen_text_"+a).visible=!1,b._layout.getComponent("message_frame_"+a).visible=!1,b._layout.getComponent("button"+a).setState(!1)):(b._layout.getComponent("splash_screen_"+a).visible=!0,b._layout.getComponent("screen_text_"+a).visible=!0,b._layout.getComponent("message_frame_"+a).visible=!0,b.createSlideMovie(a,"rightSlide"),b._layout.getComponent("button"+a).setState(!0))}})},d.prototype.createSlideMovie=function(a,b){var c=this,d=a,f=this._layout.getComponent("splash_screen_"+d),h=0,i=0;if(g.globalSounds.playCue("Splash_Screen_Slide"),"rightSlide"===b){h=+d-1,0==h&&(h=this.pages);var j=this._layout.getComponent("splash_screen_"+h);j.visible=!0,this._layout.getComponent("screen_text_"+h).visible=!0,this._layout.getComponent("message_frame_"+h).visible=!0,j.position.x=20,TweenLite.to(j.position,.3,{x:-2e3,ease:"power4.out",onComplete:function(){c._layout.getComponent("splash_screen_"+h).visible=!1,c._layout.getComponent("screen_text_"+h).visible=!1,c._layout.getComponent("message_frame_"+h).visible=!1}}),f.position.x=1200,e.isPortrait()&&e.isMobile()&&(i=130),TweenLite.to(f.position,.4,{x:-50,ease:"power4.inOut",onComplete:function(){TweenLite.to(f.position,.2,{x:i+20,ease:"expo.out"})}})}},d.prototype.updateComponentData=function(){},d.prototype.setSplashScreenState=function(){for(var a=1;a<=this.pages;a++){var b=this.pos===a,c=this._layout.getComponent("screen_btn_"+a);c.visible=b,c.setState(b)}},d.prototype.closeSplashScreen=function(){a.Core.Environment.launchVariables.displayHistory&&$("#button_history").css("display","block"),g.globalSounds.playCue("GENERIC_CLICK"),this._tweenRollUp&&this._tweenRollUp.kill(),"BR"===h.current.getGameConfig().getJurisdiction()&&$("#control_panel").css("opacity","1"),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.CLOSE_SPLASH_SCREEN),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_SHOW),c.closeOverlay()},d.prototype.updateOnOrientationChange=function(){b.prototype.updateOnOrientationChange.call(this),e.isLandscape()?(this._layout.getComponent("splash_bg").visible=!0,this._layout.getComponent("splash_bg_portrait").visible=!1):(this._layout.getComponent("splash_bg").visible=!1,this._layout.getComponent("splash_bg_portrait").visible=!0)},d}(d);b.SplashScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Slots.Aperture,d=a.Slots.WinManager,e=a.Common.GameEvents,f=a.Slots.SpinResults,g=a.Core.Utils.Queue,h=a.Core.SoundManager,i=a.Core.Renderer.SceneManager,j=a.Core.Lang,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Common.CommonSceneBase,o=a.Common.Currency.format,p=a.Slots.ControlPanel,q=function(b){function n(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.idleMsgIndex=-1,f.idleAnimCounter=0,f}return __extends(n,b),n.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),l.current.isBrokenGameSate()?(h.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500),l.current.isFreeRoundsActive()&&l.current.getBet()==l.current.getFreeRoundsBet()&&l.current.getFreeRoundsLeft()<l.current.getFreeRoundsAwarded()&&this.onFreeRoundFeatureStart()):(m.isIdleMode=!0,a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,l.current.getBalance()),l.current.getFreeRounds()&&!l.current.isFreeRoundsActive()&&l.current.getAction()===m.BASE?a.Core.Time.juggler.setTimeout(function(){i.showPopupScene("FREE_ROUNDS_INTRO")},1e3):l.current.getFreeRounds()&&l.current.isFreeRoundsActive()&&this.onFreeRoundFeatureStart())},n.prototype.onCreate=function(){var f=this;b.prototype.onCreate.call(this),k.isDesktop()&&h.globalSounds.stopMusic(),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this._mainMovieLayer=new PIXI.Container,this.addChild(this._mainMovieLayer),a.Common.ApplicationBase.instance.on(e.EVENT_ROUND_END_RECEIVED,this.onEndRoundReceived,this),a.Common.ApplicationBase.instance.on(c.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(c.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(c.EVENT_TEASE_REEL,this.onReelTease,this),a.Common.ApplicationBase.instance.on(c.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_WIN,this.onShowWin,this),a.Common.ApplicationBase.instance.on(d.EVENT_WIN_PRESENTATION_END,this.onWinsShown.bind(this)),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd,this),a.Common.ApplicationBase.instance.on(p.EVENT_AUTO_SPIN,this.onAutoSpin,this),a.Common.ApplicationBase.instance.on(p.EVENT_INTERRUPT_SPIN,this.onInterruptSpin,this),a.Common.ApplicationBase.instance.on(p.EVENT_STOP_SPIN,this.onInterruptSpinError,this),a.Common.ApplicationBase.instance.on(e.ON_PLAYER_PROMPT_WIN,this.onPlayerWinPrompt,this),a.Common.ApplicationBase.instance.on(d.EVENT_SHOW_FEATURE_WIN_SUMMARY,this.showFeatureWinSummary,this),a.Common.ApplicationBase.instance.on(d.SHOW_BUY_FEATURE_UI,this.showBuyFeatureUI,this),a.Common.ApplicationBase.instance.on(d.HIDE_BUY_FEATURE_UI,this.hideBuyFeatureUI,this),a.Common.ApplicationBase.instance.on(m.FREE_ROUND_STARTED,this.onFreeRoundFeatureStart,this),a.Common.ApplicationBase.instance.on(m.FREE_ROUND_ENDED,this.onFreeRoundFeatureEnd,this),a.Common.ApplicationBase.instance.on(e.ON_BUY_INTERACT_GAME,this.buttonInteractive,this),this.updateComponentData(),this._layout.triggerFX("scene_start"),l.current&&(!l.current.isBrokenGameSate()&&l.current.getTriggeredGrid()?this._aperture.restoreAperture(l.current.getTriggeredGrid()):l.current.isBrokenGameSate()&&this._aperture._setup.isCascadeSpin&&l.current.getAction()==m.RE_SPIN&&this._aperture.restoreAperture(l.current.getGridAfterCascadeWin())),l.current.getGameConfig().isAutoPlayDisplay()||($("#auto1").css("display","none"),$("#auto2").css("display","none"),$("#auto3").css("display","none")),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){f.onResize(),f.visible=!0,"BR"!==l.current.getGameConfig().getJurisdiction()||l.current.isBrokenGameSate()||a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),h.globalSounds.startMusic(f._layout.getLayoutParams().audio.music.ambient,1500)},100),a.Core.Time.juggler.setTimeout(function(){f.setHTMLBackground(k.defaultSettings.baseGameBlurBGImgURL)},1e3)},n.prototype.updateComponentData=function(){this._layout.getComponent("buy_bonus_btn")&&(a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.HIDE_BUY_FEATURE_UI),l.current.getGameConfig().isBuyoutAllowed()?this._layout.getComponent("buy_bonus_btn").visible=!0:this._layout.getComponent("buy_bonus_btn").visible=!1),this.freeRoundsCounter=this._layout.getComponent("free_rounds_count"),this.freeRoundsTotalWin=this._layout.getComponent("free_rounds_total_win")},n.prototype.updateOnOrientationChange=function(){var c=this;if(this._layout){b.prototype.updateOnOrientationChange.call(this);var d=this._layout.getComponent("win_amount");k.isLandscape()?(this._layout.getComponent("ui_base").visible=!1,this._layout.getComponent("background").visible=!0,this._layout.getComponent("portrait_bg").visible=!1,d.position=new PIXI.Point(d.getParams().startPosDL.x,d.getParams().startPosDL.y)):(this._layout.getComponent("ui_base").visible=!1,a.Core.Time.juggler.setTimeout(function(){c.setHTMLBackground(k.defaultSettings.baseGameBlurBGImgURL)},1e3),this._layout.getComponent("background").visible=!1,this._layout.getComponent("portrait_bg").visible=!0,d.position=new PIXI.Point(d.getParams().startPosP.x,d.getParams().startPosP.y))}},n.prototype.onResize=function(){b.prototype.onResize.call(this),k.isDesktop()&&$("#fullScreen").css("pointer-events","all")},n.prototype.onInterruptSpinError=function(){this._aperture.onStopReelSpinning()},n.prototype.onResultsRequested=function(c){b.prototype.onResultsRequested.call(this,c),this._layout.getComponent("win_amount").visible=!1,l.current.getNextAction()===m.BASE&&a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.SPIN_BUTTON_ANIMATION_START,c.isBroken),this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!1),!c.isBroken&&m.freeRoundActive&&this.freeRoundsCounter&&l.current.getNextAction()==m.BASE&&this.freeRoundsCounter.setText((l.current.getFreeRoundsLeft()-1).toString()),this._aperture.startSpin(c.isBroken),m.isIdleMode=!1},n.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.lastResults=new f(l.current),this.lastResults.getBuyoutFeature()?this.showBuyoutFeature(this.lastResults):this.dropSymbols(this.lastResults)},n.prototype.showBuyoutFeature=function(b){var c=this,f=new g;b.getNextAction().includes(m.FREE_SPIN_SELECTION)?f.add(function(b){a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay("WHEEL_BONUS")},1e3)}):b.getNextAction().includes(m.FREE_SPINS)?f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showFreeSpinsIntro(b.getNextAction())},1e3)}):b.getNextAction().includes(m.BONUS)&&f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showBonusIntro(b.getNextAction())},1e3)}),f.start(function(){a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,b.getResult())})},n.prototype.dropSymbols=function(b){var c=this,f=new g;f.add(function(a){c.addModifySymbolBeforeReelStop(b,a)}),f.add(function(a){c._aperture.dropSymbols(b,a)}),f.add(function(a){c.updateGridAfterReelStop(b,a)}),f.add(function(a){c._winManager.displaySpinResults(b,a)}),b.getNextAction().includes(m.FREE_SPIN_SELECTION)?f.add(function(b){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.showSceneAsOverlay("WHEEL_BONUS")},1e3)}):b.getNextAction().includes(m.FREE_SPINS)?f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showFreeSpinsIntro(b.getNextAction())},1e3)}):b.getNextAction().includes(m.BONUS)?f.add(function(e){a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPIN_STOP),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Core.Time.juggler.setTimeout(function(){c.showBonusIntro(b.getNextAction())},1e3)}):l.current.getNextAction()!=m.RE_SPIN||this._aperture._setup.isCascadeSpin||f.add(function(b){a.Core.Time.juggler.setTimeout(function(){l.current.getAction()==m.BASE&&h.globalSounds.playCue("RESPIN_TRIGGER"),c.onPlayerPrompt(j.getPhrase(j.getPhrase("@respin_message"))),b()},1e3)}),f.start(function(){b.getNextAction()==m.BASE?(m.isIdleMode=!0,c.onPlayerPrompt("")):a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,b.getResult())})},n.prototype.onHideAnnouncer=function(){a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1)},n.prototype.onEndRoundReceived=function(){a.Common.Server.isReelSpinning=!1,l.current.getNextAction()===m.BASE&&a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,l.current.getBalance()),l.current.getAction()!==m.BASE&&l.current.getAction()!==m.RE_SPIN||a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,this.lastResults.getResult()),a.Common.Server.isAutoplay||l.current.getFreeRounds()&&!l.current.isFreeRoundsActive()||a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.HIDE_BUY_FEATURE_UI),m.freeRoundActive&&this.freeRoundsTotalWin||0===l.current.getFreeRoundsLeft()?(this.freeRoundsTotalWin.setText(a.Common.Currency.format(l.current.getFreeRoundsWin())),l.current.getFreeRounds()&&!l.current.isFreeRoundsActive()?(a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),i.showPopupScene("FREE_ROUNDS_SUMMARY")},2500)):a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1)):a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1)},n.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(c.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(e.EVENT_ROUND_END_RECEIVED,this.onEndRoundReceived),a.Common.ApplicationBase.instance.off(c.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(c.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(c.EVENT_REELS_DROPPED,this.onReelsDropped),a.Common.ApplicationBase.instance.off(c.EVENT_TEASE_REEL,this.onReelTease),a.Common.ApplicationBase.instance.off(c.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_WIN,this.onShowWin),a.Common.ApplicationBase.instance.off(d.EVENT_WIN_PRESENTATION_END,this.onWinsShown),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPINS_START,this.onAutoSpinsStart),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPINS_END,this.onAutoSpinsEnd),a.Common.ApplicationBase.instance.off(p.EVENT_AUTO_SPIN,this.onAutoSpin),a.Common.ApplicationBase.instance.off(d.EVENT_SHOW_FEATURE_WIN_SUMMARY,this.showFeatureWinSummary),a.Common.ApplicationBase.instance.off(e.ON_PLAYER_PROMPT_WIN,this.onPlayerWinPrompt),a.Common.ApplicationBase.instance.off(d.SHOW_BUY_FEATURE_UI,this.showBuyFeatureUI),a.Common.ApplicationBase.instance.off(d.HIDE_BUY_FEATURE_UI,this.hideBuyFeatureUI),a.Common.ApplicationBase.instance.off(m.FREE_ROUND_STARTED,this.onFreeRoundFeatureStart),a.Common.ApplicationBase.instance.off(m.FREE_ROUND_ENDED,this.onFreeRoundFeatureEnd),a.Common.ApplicationBase.instance.off(e.ON_BUY_INTERACT_GAME,this.buttonInteractive)},n.prototype.onSpinStart=function(){h.globalSounds.playCue("SPIN_BUTTON"),this._teaseCount=0,this._scatterCount=0},n.prototype.onReelsDropped=function(a){h.globalSounds.stopCue("RESPIN_SPIN")},n.prototype.onReelDropped=function(a,b){b||h.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,.6),this._aperture.getReelStopSequence().indexOf(a.reelIndex)==this._aperture.getReelStopSequence().length-1&&(h.globalSounds.stopCue("ReeL_spin"),h.globalSounds.stopCue("TEASE"))},n.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();c.getAudioDropId()&&(h.globalSounds.stopCue(c.getAudioDropId()),h.globalSounds.playCue(c.getAudioDropId()))},n.prototype.onInterruptSpin=function(){},n.prototype.onPlayerWinPrompt=function(a){a&&a.getWinCash()>0&&this._promptMsgPanel&&this._promptMsgPanel.showWinMessagePanel(a.getSymbolId(),a.getDescription())},n.prototype.onReelTease=function(a,b){h.globalSounds.stopCue("TEASE"),h.globalSounds.playCue("TEASE"),"BN"==b.getId()?this._promptMsgPanel.showWinMessagePanel(b.getId(),j.getPhrase("@bonus_promtmsg")):"SC"==b.getId()&&this._promptMsgPanel.showWinMessagePanel(b.getId(),j.getPhrase("@scatter_promtmsg"))},n.prototype.onReelTeaseEnd=function(a,b){h.globalSounds.stopCue("TEASE")},n.prototype.onWinSummary=function(a){1===a.getWinCount()&&h.globalSounds.playCue(this._aperture.getSymbolProfile(a.getSingleWin().getSymbolId()).getAudioWinId()),a.getTotalWin()>0&&this.showWinTextAnimation(a.getTotalWin())},n.prototype.showWinTextAnimation=function(b){var c=this._layout.getComponent("win_amount");c.visible=!0,c.setText(a.Common.Currency.format(b,!0)),k.isPortrait()?c.position=new PIXI.Point(c.getParams().startPosP.x,c.getParams().startPosP.y):c.position=new PIXI.Point(c.getParams().startPosDL.x,c.getParams().startPosDL.y);var d=new PIXI.Point(c.position.x,c.position.y),e=new TimelineLite;if(c.scale.x=.2,c.scale.y=.2,h.globalSounds.playCue("line_win"),k.isDesktop()){var f=c.getParams().endPos;e.add(TweenLite.to(c.scale,1.75,{x:1,y:1,ease:Cubic.easeOut})),e.add([TweenLite.to(c.position,.4,{x:f.x,y:f.y,ease:Cubic.easeIn}),TweenLite.to(c.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1}})])}else e.add(TweenLite.to(c.scale,1.75,{x:1,y:1,ease:Cubic.easeOut,onComplete:function(){c.position=d,c.visible=!1}}))},n.prototype.onShowWin=function(b,c){if(b.getWinCash()>0){var d=this._layout.getComponent("win_amount");if(k.isPortrait()?d.position=new PIXI.Point(d.getParams().startPosP.x,d.getParams().startPosP.y):d.position=new PIXI.Point(d.getParams().startPosDL.x,d.getParams().startPosDL.y),c){d.setText(o(b.getWinCash(),!0)),d.visible=!0;var e=new g,f=new PIXI.Point(d.x,d.y);d.scale.x=.5,d.scale.y=.5,e.add(function(b){d.scale.x=.3,d.scale.y=.3,TweenLite.to(d.scale,.5,{x:1,y:1,ease:Cubic.easeOut,onComplete:function(){a.Core.Time.juggler.setTimeout(b,1e3)}})}),e.add(function(a){d.position=f,d.visible=!1,a()}),e.start()}else{d.setText(o(b.getWinCash()));var h=new PIXI.Point(d.x,d.y);d.scale.x=.5,d.scale.y=.5,d.visible=!0,a.Core.Time.juggler.setTimeout(function(){d.position=h,d.visible=!1},1500)}}},n.prototype.onWinsShown=function(){!l.current.getGameConfig().isAutoPlayDisplay()||l.current.getAction()===m.FREE_SPINS&&l.current.getNextAction()===m.BASE||$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show(),b.prototype.onWinsShown.call(this)},n.prototype.onInteraction=function(c,d){b.prototype.onInteraction.call(this,c,d),"start_button"!==d&&(this._layout.getComponent(d).interactive=!1),m.isIdleMode=!1,h.globalSounds.playCue("GENERIC_CLICK"),this._announcer&&(this._announcer.visible=!1),"buy_bonus_btn"==d&&($("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!0),a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.SHOW_BUY_FEATURE_UI)),k.isMobile()&&(a.Common.ApplicationBase.instance.emit(e.ON_RESULTS_DISPLAYED,this.result),"bet_plus_btn"==d?(a.Common.Server.isBetClickOnce=!0,$(".button_next").trigger("click"),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!1)):"bet_minus_btn"==d&&(a.Common.Server.isBetClickOnce=!0,$(".button_prev").trigger("click"),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!1)))},n.prototype.onContinueGame=function(a){a&&this._aperture.startSpin()},n.prototype.onAutoSpinsEnd=function(){l.current.getGameConfig().isAutoPlayDisplay()&&$("#Autoplay_button_wrapper").show(),$("#bet_button_wrapper").show()},n.prototype.buttonInteractive=function(){!a.Common.Server.isAutoplay&&this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!0)},n.prototype.onAutoSpinsStart=function(){h.globalSounds.setMusicRestorePoint(this._layout.getLayoutParams().audio.music.spin,0)},n.prototype.onAutoSpin=function(b){a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.EVENT_FREE_SPINS_END),1===b&&a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_SPINS_ENDS)},n.prototype.stopAnim=function(){this._layout.getComponent("fx_container").removeChildren()},n.prototype.showFeatureWinSummary=function(){var b=this,c=new g,e=l.current.getGameRoundWin();$("#allbutton_wapper").show(),l.current.getGameConfig().isAutoPlayDisplay()&&($("#Autoplay_button_wrapper").show(),$("#button_auto_cp").show()),$("#button_history").css("pointer-events","none"),$("#button_history").addClass("disabled"),$("#button_spin").css("display","block"),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show(),$(".button_bett").show(),$("#button_spin_animation").show(),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),$("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#button_bett").addClass("disabled"),$("#button_bett").css("pointer-events","none"),this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!1),a.Core.Time.juggler.setTimeout(function(){
e>0?(l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():$("#Autoplay_button_wrapper").hide(),b._winManager.addCelebrationAnimations(e,c),c.add(function(c){a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(d.EVENT_WIN_PRESENTATION_START),b.showWinTextAnimation(e),c()},200)})):c.add(function(c){b.onPlayerPrompt(j.getPhrase("player_wins_x_caps",{win:a.Common.Currency.format(e)})),c()}),c.start(function(){l.current.getNextAction()==m.BASE&&(a.Common.ApplicationBase.instance.emit(m.SEND_ROUND_END),l.current.isFreeRoundsActive()&&this.onFreeRoundFeatureStart(!1),k.launchVariables.isReplay&&a.Common.ApplicationBase.instance.emit(m.SEND_CLOSE_REPLAY_REQUEST)),a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.EVENT_CHECK_ALARMS_AT_FS),h.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500),this.isIdleMode=!0}.bind(b))},1e3)},n.prototype.showFreeSpinsIntro=function(a){i.showPopupScene(a.includes(m.HOLD_FREE_SPINS)?"HOLD_FREE_SPINS_INTRO":"FREE_SPINS_INTRO")},n.prototype.showBonusIntro=function(a){i.showPopupScene(a==m.MULTI_LEVEL_BONUS?"MULTI_LEVEL_BONUS_INTRO":"BONUS_INTRO")},n.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},n.prototype.createAnimationInterval=function(){var a=this;this._animationInterval=setInterval(function(){m.isIdleMode&&k.gameConfig.playerMessages&&a.idleAnimCounter>=2&&(a.idleAnimCounter=0,a.idleMsgIndex++,a.idleMsgIndex>=k.gameConfig.playerMessages.length&&(a.idleMsgIndex=0),a.onPlayerPrompt(j.getPhrase(k.gameConfig.playerMessages[a.idleMsgIndex]))),a.idleAnimCounter++,a.playSceneAnimation()},5e3)},n.prototype.showBuyFeatureUI=function(){$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!0),a.Common.ApplicationBase.instance.emit(d.STOP_SYMBOLS_ANIMATION,!0),a.Common.ApplicationBase.instance.emit(p.EVENT_BET_PANEL_CLOSE),a.Common.ApplicationBase.instance.emit(p.EVENT_AUTO_PANEL_CLOSE),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!0),$("#cp_win").text(""),$("#button_settings").addClass("disabled_settings_item"),$(document).find("#button_settings").css("pointer-events","none"),i.showSceneAsOverlay("BUY_FEATURE")},n.prototype.hideBuyFeatureUI=function(){m.freeRoundActive||(a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!1),$(document).find("#button_settings").css("pointer-events","all"),$("#button_settings").removeClass("disabled_settings_item"),this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!0))},n.prototype.onFreeRoundFeatureStart=function(b){void 0===b&&(b=!0),m.freeRoundActive=!0,a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!0),$("#main_button_wrapper").removeClass("disabled"),$("#main_button_wrapper").css("pointer-events","all"),b&&($("#button_spin").removeClass("disabled"),$("#button_spin").css("pointer-events","all")),this._layout.getComponent("free_rounds_left").visible=!0,this._layout.getComponent("free_rounds_win").visible=!0,this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!1),this.freeRoundsCounter.setText(l.current.getFreeRoundsLeft().toString()),this.freeRoundsTotalWin.setText(a.Common.Currency.format(l.current.getFreeRoundsWin()))},n.prototype.onFreeRoundFeatureEnd=function(){m.freeRoundActive=!1,h.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500),a.Common.ApplicationBase.instance.emit(p.EVENT_DISABLE,!1),this._layout.getComponent("free_rounds_left").visible=!1,this._layout.getComponent("free_rounds_win").visible=!1,this._layout.getComponent("buy_bonus_btn")&&(this._layout.getComponent("buy_bonus_btn").interactive=!0)},n.prototype.updateGridAfterReelStop=function(a,b){b()},n}(n);b.BaseScene=q}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.SceneManager,h=a.Common.Server,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.CommonSceneBase,l=a.Slots.WinManager,m=a.Core.Utils.Queue,n=function(b){function k(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.selectedOptions={},f.isPickOptionsEnabled=!1,f.lastPickId=0,f}return __extends(k,b),k.prototype.updateOnOrientationChange=function(){this._layout&&(b.prototype.updateOnOrientationChange.call(this),i.isLandscape()?(this._layout.getComponent("bonus_bg").visible=!0,this._layout.getComponent("bonus_bg_portrait").visible=!1):(this._layout.getComponent("bonus_bg").visible=!1,this._layout.getComponent("bonus_bg_portrait").visible=!0,this.setHTMLBackground(i.defaultSettings.portraitBonusBgImgURL)))},k.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._layout.triggerFX("create"),this.updateComponentData(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.msg_text=this._layout.getComponent("pick_option_text"),this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase("@pick_icon")),a.Core.Time.juggler.setTimeout(function(){c.setHTMLBackground(i.defaultSettings.bonusBlurBGImgURL)},1e3),a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.playBonusGameSound(),c.visible=!0,c.isPickOptionsEnabled=!0},100)},k.prototype.onResize=function(){b.prototype.onResize.call(this)},k.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),this.lastPickId=0,this.selectedOptions={},this.isPickOptionsEnabled=!1,this.bonus_win_amount.setText(" ")},k.prototype.updateComponentData=function(){this.bonus_win_amount=this._layout.getComponent("bonus_win_amount"),this.bonus_win_amount.setText(" ")},k.prototype.onInteraction=function(a,c){if(b.prototype.onInteraction.call(this,a,c),this.isPickOptionsEnabled){var d=c.split("_"),e=parseInt(d[d.length-1]);this.sendBonusPickRequest(e)}},k.prototype.sendBonusPickRequest=function(b){void 0===b&&(b=1),this.isPickOptionsEnabled=!1,d.globalSounds.playCue("pickem_reveal"),this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase(""));for(var e=1;e<=this._layout.getLayoutParams().totalPickOptions;e++)this._layout.getComponent("pick_option_"+e).interactive=!1;a.Common.ApplicationBase.instance.emit(c.ON_GET_GAME_RESULTS,{pickId:b})},k.prototype.onGameReady=function(){var a=this;b.prototype.onGameReady.call(this),f.current.getAwardedBonusPrizes()&&(this.selectedOptions=f.current.getAwardedBonusPrizes()),f.current.isBrokenGameSate()?($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),$("#control_panel").css("pointer-events","none"),this.restoreBonusState()):i.launchVariables.isReplay&&setTimeout(function(){a.sendBonusPickRequest()},1e3)},k.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.selectedOptions=f.current.getAwardedBonusPrizes(),this.showBonusOption()},k.prototype.showBonusOption=function(){var b=this;if(!(this.selectedOptions&&Object.keys(this.selectedOptions).length>0))throw"[BonusScene] Wrong Selected Bonus Option;";this.lastPickId=f.current.getFeatureGameData().pickId;var c=this._layout.getComponent("pick_option_text_"+this.lastPickId);c.visible=!1;var d=" ",k=!1,n=this.selectedOptions[this.lastPickId];n&&!isNaN(+n)&&+n>0?(d=e.format(parseFloat(n)),k=!0):j.getPhrase(n+"")!=n?d=j.getPhrase(n):"bonus_collect"!=j.getPhrase("bonus_collect")&&(d=j.getPhrase("bonus_collect"));var o=new m;o.add(function(a){b.playAnimationBeforePick(k,a)}),o.add(function(a){b._layout.getComponent("pick_option_"+b.lastPickId).onShowPrize(k,function(){c.setText(d),c.visible=!0,a()})}),f.current.getTotalWin()>0&&(o.add(function(a){var d=b._layout.getComponent("bonus_win_holder");TweenLite.to(c.position,.4,{x:d.x+d.x/2,y:d.y,delay:1,ease:Cubic.easeIn}),TweenLite.to(c.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,delay:1,onComplete:function(){c.visible=!1,a()}})}),o.add(function(c){b.bonus_win_amount.setText(""),b.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin())),a.Common.ApplicationBase.instance.emit(l.EVENT_WIN_PRESENTATION_START),c()})),o.add(function(c){var d=Object.keys(b.selectedOptions);if(f.current.getNextAction()===h.BONUS){b.isPickOptionsEnabled=!0;for(var e=1;e<=b._layout.getLayoutParams().totalPickOptions;e++)d.indexOf(e+"")<0&&(b._layout.getComponent("pick_option_"+e).interactive=!0);b.msg_text&&b.msg_text.setText(a.Core.Lang.getPhrase("@pick_again")),b.playAnimationAfterPick(k,c)}else{for(var i=0,e=1;e<=b._layout.getLayoutParams().totalPickOptions;e++)if(d.indexOf(e+"")<0){var j=b._layout.getComponent("pick_option_"+e);b._layout.getComponent("pick_option_text").visible=!1,j.onShowDisablePrize(),i++}a.Core.Time.juggler.setTimeout(function(){b.msg_text&&(b.msg_text.visible=!1),g.showPopupScene("BONUS_SUMMARY",{callback:function(){}})},2e3),c()}}),o.start(function(){f.current.getNextAction()===h.BONUS&&i.launchVariables.isReplay&&setTimeout(function(){b.sendBonusPickRequest()},1e3)})},k.prototype.restoreBonusState=function(){this.bonus_win_amount.setText(""),this.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin()));var b=Object.keys(this.selectedOptions);this.msg_text&&this.msg_text.setText(a.Core.Lang.getPhrase(b.length>0?"@pick_again":"@pick_icon"));for(var c=1;c<=this._layout.getLayoutParams().totalPickOptions;c++){var d=b.indexOf(c+""),g=this._layout.getComponent("pick_option_"+c);if(g.interactive=!1,g.visible=!0,d>=0){var i=" ",k=!1;this.selectedOptions[c]&&!isNaN(+this.selectedOptions[c])&&+this.selectedOptions[c]>0?(i=e.format(parseFloat(this.selectedOptions[c])),k=!0):j.getPhrase(this.selectedOptions[c]+"")!=this.selectedOptions[c]?i=j.getPhrase(this.selectedOptions[c]):"bonus_collect"!=j.getPhrase("bonus_collect")&&(i=j.getPhrase("bonus_collect")),g.onShowPrize(k);var l=this._layout.getComponent("pick_option_text_"+c);k?l.visible=!1:(l.setText(i),l.visible=!0)}else f.current.getNextAction()!=h.BONUS?g.onShowDisablePrize():g.interactive=!0}},k.prototype.onGameAccepted=function(){},k.prototype.playBonusGameSound=function(){d.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500)},k.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),this.msg_text&&(this.msg_text.visible=!1),a.Core.Renderer.SceneManager.showPopupScene("BONUS_SUMMARY")},k.prototype.playAnimationBeforePick=function(a,b){b()},k.prototype.playAnimationAfterPick=function(a,b){b()},k}(k);b.BonusScene=n}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.CommonSceneBase,d=a.Slots.Aperture,e=a.Slots.WinManager,f=a.Common.GameEvents,g=a.Slots.SpinResults,h=a.Core.Utils.Queue,i=a.Core.SoundManager,j=a.Common.Currency,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Core.Renderer.SceneManager,o=a.Core.Lang,p=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.audioProfile=null,f.freeReSpinActive=!1,f}return __extends(c,b),c.prototype.soundFreeGame=function(){i.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[0],1500)},c.prototype.updateOnOrientationChange=function(){if(this._layout){b.prototype.updateOnOrientationChange.call(this);var a=this._layout.getComponent("win_amount");k.isPortrait()?(a.position=new PIXI.Point(a.getParams().startPosP.x,a.getParams().startPosP.y),$("html").css("background-image","url('"+k.defaultSettings.portraitFreeSpinBgImgURL+"')").css("background-size"," cover").css(" background-repeat","no-repeat"),this._layout.getComponent("portrait_bg").visible=!0,this._layout.getComponent("free_spins_bg").visible=!1):(a.position=new PIXI.Point(a.getParams().startPosDL.x,a.getParams().startPosDL.y),this._layout.getComponent("free_spins_bg").visible=!0,this._layout.getComponent("portrait_bg").visible=!1)}},c.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),l.current.getFeatureSpinsLeft()==l.current.getFeatureTotalSpins()&&(this._aperture.visible=!0,l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():($("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"))),this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),this._layout.setComponentText("spins_count",l.current.getFeatureSpinsLeft().toString()),l.current.isBrokenGameSate()&&($("#button_auto_cp").show(),$("#bet_button_wrapper").addClass("disabled"),$("#bet_button_wrapper").css("pointer-events","none"),$("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"),$(".button_bett").addClass("disabled"),$(".button_bett").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#menu_mobile").addClass("disabled"),$("#menu_mobile").css("pointer-events","none"),$("#main_button_wrapper").addClass("disabled"),$("#main_button_wrapper").css("pointer-events","none"),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"))},c.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this.updateComponentData(),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_REEL_DROPPED,this.onReelDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_TEASE_REEL,this.onReelTease,this),a.Common.ApplicationBase.instance.on(d.EVENT_TEASE_REEL_END,this.onReelTeaseEnd,this),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_DROPPED,this.onReelsDropped,this),a.Common.ApplicationBase.instance.on(e.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary,this),this._layout.triggerFX("create"),a.Core.Time.juggler.setTimeout(function(){c._aperture.visible=!0,c.soundFreeGame(),c.setHTMLBackground(k.defaultSettings.freeSpinBlurBGImgURL),c.onGameAccepted()},1e3),a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.visible=!0},100)},c.prototype.onResize=function(){b.prototype.onResize.call(this)},c.prototype.updateComponentData=function(){this._mainMovieLayer=new PIXI.Container,this.addChild(this._mainMovieLayer)},c.prototype.onResultsRequested=function(a){b.prototype.onResultsRequested.call(this,a),l.current.isFreeReSpin()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString()),this._aperture.isSpinning||(null!==this.audioProfile&&(i.globalSounds.stopCue(this.audioProfile),this.audioProfile=null),this._aperture.startSpin())},c.prototype.onStateReady=function(){l.current.isFreeReSpin()||l.current.getFeatureAwardedSpins()===l.current.getFeatureSpinsLeft()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString())},c.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this);var a=new g(l.current);c.lastResults=a,this.dropSymbols(a)},c.prototype.dropSymbols=function(b){var c=this,d=new h;d.add(function(a){c.addModifySymbolBeforeReelStop(b,a)}),d.add(function(a){c._aperture.dropSymbols(b,a)}),d.add(function(a){c.updateGridAfterReelStop(b,a)}),d.add(function(a){c._winManager.displaySpinResults(b,a)}),l.current.isFreeReSpin()&&!this._aperture._setup.isCascadeSpin?d.add(function(b){a.Core.Time.juggler.setTimeout(function(){c.freeReSpinActive||(c.freeReSpinActive=!0,i.globalSounds.playCue("RESPIN_TRIGGER")),c.onPlayerPrompt(o.getPhrase(o.getPhrase("@respin_message"))),b()},1e3)}):this.freeReSpinActive=!1,d.start()},c.prototype.onInteraction=function(a,c){b.prototype.onInteraction.call(this,a,c),i.globalSounds.playCue("GENERIC_CLICK")},c.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(d.EVENT_TEASE_REEL,this.onReelTease),a.Common.ApplicationBase.instance.off(d.EVENT_TEASE_REEL_END,this.onReelTeaseEnd),a.Common.ApplicationBase.instance.off(e.EVENT_SHOW_WIN_SUMMARY,this.onWinSummary),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_DROPPED,this.onReelsDropped)},c.prototype.onReelsDropped=function(){i.globalSounds.stopCue("TEASE")},c.prototype.onGameAccepted=function(){this._aperture.visible=!0},c.prototype.startGame=function(){this._aperture.visible=!0,this.soundFreeGame(),l.current.isBrokenGameSate()?a.Common.ApplicationBase.instance.emit(m.FREE_SPINS_AWARDED):(l.current.isFreeReSpin()||this._layout.setComponentText("spins_count",(l.current.getFeatureSpinsLeft()-1).toString()),this._layout.setComponentText("total_win_value",j.format(l.current.getTotalWin())))},c.prototype.onSummaryAccepted=function(){b.prototype.onSummaryAccepted.call(this),this.soundFreeGame()},c.prototype.onSpinStart=function(){i.globalSounds.playCue("SPIN_BUTTON"),this._mainMovieLayer.removeChildren(),this._teaseCount=0},c.prototype.onContinueGame=function(){a.Core.Time.juggler.setTimeout(function(){l.current.getNextAction()==m.FREE_SPINS&&a.Common.ApplicationBase.instance.emit(f.ON_GET_GAME_RESULTS,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel})},l.current.getAction()!=m.FREE_SPINS?2e3:1e3)},c.prototype.onReelDropped=function(a,b){b||i.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,1),this._aperture.getReelStopSequence().indexOf(a.reelIndex)==this._aperture.getReelStopSequence().length-1&&(i.globalSounds.stopCue("ReeL_spin"),i.globalSounds.stopCue("TEASE"))},c.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();c.getAudioDropId()&&(i.globalSounds.stopCue(c.getAudioDropId()),i.globalSounds.playCue(c.getAudioDropId()))},c.prototype.onReelTease=function(a,b){i.globalSounds.stopCue("TEASE"),i.globalSounds.playCue("TEASE"),"BN"==b.getId()?this._promptMsgPanel.showWinMessagePanel(b.getId(),o.getPhrase("@bonus_promtmsg")):"SC"==b.getId()&&this._promptMsgPanel.showWinMessagePanel(b.getId(),o.getPhrase("@scatter_re_trigger_promtmsg"))},c.prototype.onReelTeaseEnd=function(a,b){i.globalSounds.stopCue("TEASE")},c.prototype.onWinSummary=function(a){if(this._layout.getComponent("fx_container").removeChildren(),a.getTotalWin()>0){var b=this._layout.getComponent("win_amount");k.isPortrait()?b.position=new PIXI.Point(b.getParams().startPosP.x,b.getParams().startPosP.y):b.position=new PIXI.Point(b.getParams().startPosDL.x,b.getParams().startPosDL.y),b.visible=!0,this.addChild(b),b.setText(j.format(a.getTotalWin(),!0));var c=new PIXI.Point(b.position.x,b.position.y),d=new TimelineLite;if(b.scale.x=.2,b.scale.y=.2,i.globalSounds.playCue("line_win"),k.isDesktop()){var e=b.getParams().endPos;d.add(TweenLite.to(b.scale,1.75,{x:1,y:1,ease:Cubic.easeOut})),d.add([TweenLite.to(b.position,.4,{x:e.x,y:e.y,ease:Cubic.easeIn}),TweenLite.to(b.scale,.4,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){b.position=c,b.visible=!1}})])}else d.add(TweenLite.to(b.scale,1.75,{x:1,y:1,ease:Cubic.easeOut,onComplete:function(){b.position=c,b.visible=!1}}))}},c.prototype.onWinsShown=function(){var b=this;this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),l.current&&l.current.getAction()===m.FREE_SPINS&&l.current.getNextAction()===m.BASE?0!==l.current.getFeatureTotalWin()?a.Core.Time.juggler.setTimeout(function(){n.showPopupScene("FREE_SPINS_SUMMARY")},1500):(a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(e.EVENT_SHOW_FEATURE_WIN_SUMMARY),$("#bet_button_wrapper").removeClass("disabled"),$("#bet_button_wrapper").css("pointer-events","all"),$("#Autoplay_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","all"),$(".button_bett").removeClass("disabled"),$(".button_bett").css("pointer-events","all"),$("#button_auto_cp").removeClass("disabled"),$("#button_auto_cp").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all"),$("#main_button_wrapper").removeClass("disabled"),$("#main_button_wrapper").css("pointer-events","all"),$("#button_spin").removeClass("disabled"),$("#button_spin").css("pointer-events","all")},600),a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults)):l.current.getFeatureReTriggeredSpins()>0?a.Core.Time.juggler.setTimeout(function(){i.globalSounds.playCue("INTRO");var d=b._layout.getComponent("retrigger_announcer");d.visible=!0,b._layout.getComponent("awarded_retrigger_count").setText("+"+l.current.getFeatureReTriggeredSpins().toString()),b._layout.setComponentText("spins_count",l.current.getFeatureSpinsLeft().toString()),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults),d.visible=!1},3500)},0):a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED,c.lastResults)},c.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},c.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("FREE_SPINS_SUMMARY")},c.prototype.updateGridAfterReelStop=function(a,b){b()},c}(c);b.FreeSpinsScene=p}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.SceneManager,h=a.Common.Server,i=a.Core.Environment,j=a.Core.Lang,k=a.Common.CommonSceneBase,l=a.Slots.WinManager,m=a.Core.Utils.Queue,n=function(b){function k(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.selectedOptions={},f.isPickOptionsEnabled=!1,f.lastPickId=0,f.lastLevelId=1,f}return __extends(k,b),k.prototype.updateOnOrientationChange=function(){this._layout&&(b.prototype.updateOnOrientationChange.call(this),i.isLandscape()?(this._layout.getComponent("bonus_bg").visible=!0,this._layout.getComponent("bonus_bg_portrait").visible=!1):(this._layout.getComponent("bonus_bg").visible=!1,this._layout.getComponent("bonus_bg_portrait").visible=!0,this.setHTMLBackground(i.defaultSettings.portraitMultiLevelBonusBgImgURL)))},k.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._layout.triggerFX("create"),this.updateComponentData(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.playBonusGameSound(),c.visible=!0,c.isPickOptionsEnabled=!0},100)},k.prototype.onResize=function(){b.prototype.onResize.call(this),this.setHTMLBackground(i.defaultSettings.multiLevelBonusBlurBGImgURL)},k.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),this.lastPickId=0,this.lastLevelId=1,this.selectedOptions={},this.isPickOptionsEnabled=!1,this.bonus_win_amount.setText(" ");for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions.length;a++){this._layout.getLayoutParams().isMultiScreen&&(this._layout.getComponent("bonus_holder_"+a).visible=!1);for(var c=1;c<=this._layout.getLayoutParams().totalPickOptions[a-1];c++)this._layout.getComponent("pick_option_"+a+"_"+c).interactive=!1}},k.prototype.updateComponentData=function(){this.bonus_win_amount=this._layout.getComponent("bonus_win_amount"),this.bonus_win_amount.setText(" ");for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions.length;a++){this._layout.getComponent("bonus_holder_"+a).visible=!this._layout.getLayoutParams().isMultiScreen;for(var b=1;b<=this._layout.getLayoutParams().totalPickOptions[a-1];b++)this._layout.getComponent("pick_option_"+a+"_"+b).interactive=!1}},k.prototype.onInteraction=function(e,f){if(b.prototype.onInteraction.call(this,e,f),this.isPickOptionsEnabled){this.isPickOptionsEnabled=!1,d.globalSounds.playCue("pickem_reveal");var g=f.split("_"),h=parseInt(g[g.length-1]);this.lastPickId=h;for(var i=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1],j=1;j<=i;j++)this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+j).interactive=!1;a.Common.ApplicationBase.instance.emit(c.ON_GET_GAME_RESULTS,{pickId:h})}},k.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),f.current.getAwardedBonusPrizes()&&(this.selectedOptions=f.current.getAwardedBonusPrizes()),f.current.getBonusNextLevel()&&(this.lastLevelId=f.current.getBonusNextLevel()),f.current.isBrokenGameSate()&&($("#allbutton_wapper").hide(),$("#button_settings").hide(),$("#Autoplay_button_wrapper").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide(),$("#control_panel").css("pointer-events","none"),this.restoreBonusState()),this._layout.getLayoutParams().isMultiScreen&&(this._layout.getComponent("bonus_holder_"+this.lastLevelId).visible=!0);for(var a=1;a<=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1];a++)this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+a).interactive=!0},k.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this),this.selectedOptions=f.current.getAwardedBonusPrizes(),this.showBonusOption()},k.prototype.showBonusOption=function(){var b=this;if(!this.selectedOptions||!this.selectedOptions[this.lastLevelId])throw"[BonusScene] Wrong Selected Bonus Option;";var c,d=!1,i=this._layout.getComponent("pick_option_text_"+this.lastLevelId+"_"+this.lastPickId);i.visible=!1;var k=this.selectedOptions[this.lastLevelId][this.lastPickId];k&&!isNaN(+k)&&+k>0?(c=e.format(parseFloat(k)),d=!0):c=j.getPhrase(k+"")!=k?j.getPhrase(k):j.getPhrase("collect_caps");var n=new m;n.add(function(a){b.playAnimationBeforePick(d,a)}),n.add(function(a){b._layout.getComponent("pick_option_"+b.lastLevelId+"_"+b.lastPickId).onShowPrize(d,function(){i.setText(c),i.visible=!0,a()})}),f.current.getTotalWin()>0&&n.add(function(c){b.bonus_win_amount.setText(""),b.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin())),a.Common.ApplicationBase.instance.emit(l.EVENT_WIN_PRESENTATION_START),c()}),n.add(function(a){b.playAnimationAfterPick(d,a)}),n.add(function(c){var d=f.current.getBonusNextLevel();b._layout.getLayoutParams().isMultiScreen&&b.lastLevelId!=d?(b.disableNotSelectedOption(),a.Core.Time.juggler.setTimeout(function(){b.changeBonusLevel(d,c)},2e3)):c()}),n.add(function(c){if(f.current.getNextAction()===h.MULTI_LEVEL_BONUS){var d=f.current.getBonusNextLevel(),e=b.selectedOptions[d],i=e?Object.keys(e):[];b.isPickOptionsEnabled=!0,b.lastLevelId=d;for(var j=1;j<=b._layout.getLayoutParams().totalPickOptions[b.lastLevelId-1];j++)i.indexOf(j+"")<0&&(b._layout.getComponent("pick_option_"+b.lastLevelId+"_"+j).interactive=!0)}else b.disableNotSelectedOption(),a.Core.Time.juggler.setTimeout(function(){g.showPopupScene("MULTI_LEVEL_BONUS_SUMMARY",{callback:function(){}})},2e3);c()}),n.start()},k.prototype.disableNotSelectedOption=function(){for(var a=this,b=this.selectedOptions[this.lastLevelId],c=b?Object.keys(b):[],d=[],e=Object.keys(this.selectedOptions[this.lastLevelId]).map(function(b){return a.selectedOptions[a.lastLevelId][b]}),g=f.current.getBonusPrizes(),h=0;h<g.length;h++)e.indexOf(g[h])<0&&d.push(g[h]);for(var i=0,h=1;h<=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1];h++)if(c.indexOf(h+"")<0){var j=this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+h);this._layout.getComponent("pick_option_text_"+this.lastLevelId+"_"+h).visible=!1,j.onShowDisablePrize(),i++}},k.prototype.changeBonusLevel=function(a,b){this._layout.getComponent("bonus_holder_"+this.lastLevelId).visible=!1,this._layout.getComponent("bonus_holder_"+a).visible=!0,b()},k.prototype.restoreBonusState=function(){this.bonus_win_amount.setText(""),this.bonus_win_amount.setText(e.format(f.current.getFeatureTotalWin()));for(var a=this._layout.getLayoutParams().totalPickOptions[this.lastLevelId-1],b=this.selectedOptions[this.lastLevelId],c=b?Object.keys(b):[],d=1;d<=a;d++){var g=c.indexOf(d+""),i=this._layout.getComponent("pick_option_"+this.lastLevelId+"_"+d);if(i.interactive=!1,i.visible=!0,g>=0){var k=void 0,l=!1;this.selectedOptions[d]&&!isNaN(+b[d])&&+b[d]>0?(k=e.format(parseFloat(b[d])),l=!0):k=j.getPhrase(b[d]+"")!=b[d]?j.getPhrase(b[d]):j.getPhrase("collect_caps"),i.onShowPrize(l);var m=this._layout.getComponent("pick_option_text_"+this.lastLevelId+"_"+d);l?m.visible=!1:(m.setText(k),m.visible=!0)}else f.current.getNextAction()!=h.MULTI_LEVEL_BONUS?i.onShowDisablePrize():i.interactive=!0}},k.prototype.onGameAccepted=function(){},k.prototype.playBonusGameSound=function(){var a=d.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient,1500);void 0!=a&&a.volume(.4)},k.prototype.showBrokenFeatureWinSummary=function(){b.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("MULTI_LEVEL_BONUS_SUMMARY")},k.prototype.playAnimationBeforePick=function(a,b){b()},k.prototype.playAnimationAfterPick=function(a,b){b()},k}(k);b.MultiLevelBonusScene=n}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.CommonSceneBase,d=a.Slots.Aperture,e=a.Slots.WinManager,f=a.Common.GameEvents,g=a.Slots.SpinResults,h=a.Core.Utils.Queue,i=a.Core.SoundManager,j=a.Common.Currency,k=a.Core.Environment,l=a.Common.Server.ResponseResult,m=a.Common.Server,n=a.Core.Renderer.SceneManager,o=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.audioProfile=null,f}return __extends(c,b),c.prototype.playFeatureMusic=function(){i.globalSounds.startMusic(this._layout.getLayoutParams().audio.music.ambient[0],1500)},c.prototype.updateOnOrientationChange=function(){if(this._layout){b.prototype.updateOnOrientationChange.call(this);var a=this._layout.getComponent("win_amount");k.isPortrait()?(a.position=new PIXI.Point(a.getParams().startPosP.x,a.getParams().startPosP.y),$("html").css("background-image","url('"+k.defaultSettings.portraitHoldFreeSpinBgImgURL+"')").css("background-size"," cover").css(" background-repeat","no-repeat"),this._layout.getComponent("portrait_bg").visible=!0,this._layout.getComponent("free_spins_bg").visible=!1):(a.position=new PIXI.Point(a.getParams().startPosDL.x,a.getParams().startPosDL.y),this._layout.getComponent("free_spins_bg").visible=!0,this._layout.getComponent("portrait_bg").visible=!1)}},c.prototype.onGameReady=function(){b.prototype.onGameReady.call(this),
l.current.getFeatureSpinsLeft()==l.current.getFeatureTotalSpins()&&(this._aperture.visible=!0,l.current.getGameConfig().isAutoPlayDisplay()?$("#Autoplay_button_wrapper").show():($("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"))),l.current.getAction()!==m.HOLD_FREE_SPINS&&l.current.getNextAction()!==m.HOLD_FREE_SPINS||this.showRespinNumber(l.current.getFeatureSpinsLeft()),l.current.isBrokenGameSate()&&($("#bet_button_wrapper").addClass("disabled"),$("#bet_button_wrapper").css("pointer-events","none"),$("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"),$(".button_bett").addClass("disabled"),$(".button_bett").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"),$("#menu_mobile").addClass("disabled"),$("#menu_mobile").css("pointer-events","none"),$("#main_button_wrapper").addClass("disabled"),$("#main_button_wrapper").css("pointer-events","none"),$("#button_spin").addClass("disabled"),$("#button_spin").css("pointer-events","none"))},c.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),this._aperture=this._layout.getComponent("aperture"),this._winManager=this._layout.getComponent("win_manager"),this.updateComponentData(),a.Common.ApplicationBase.instance.on(d.EVENT_REELS_SPIN_START,this.onSpinStart,this),a.Common.ApplicationBase.instance.on(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped,this),a.Common.ApplicationBase.instance.on(d.EVENT_REEL_DROPPED,this.onReelDropped,this),this._layout.triggerFX("create");for(var e=[],f=l.current.getFeatureReelModifiersSymbols()||[],g=0;g<this._aperture._setup.reels.length;g++){for(var h=[],i=0;i<this._aperture._setup.reels[g].symbols_per_reel+2;i++)h.push("BL");e.push(h)}f.forEach(function(a){e[a.getPosition().getReelIndex()][a.getPosition().getRowIndex()+1]=a.getSymbol()}),this._aperture.restoreAperture(e),a.Core.Time.juggler.setTimeout(function(){c._aperture.visible=!0,c.setHTMLBackground(k.defaultSettings.holdFreeSpinBlurBGImgURL),c.playFeatureMusic(),c.onGameAccepted()},1e3),a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.visible=!0},100)},c.prototype.onResize=function(){b.prototype.onResize.call(this)},c.prototype.updateGrid=function(){for(var a=[],b=l.current.getFeatureReelModifiersSymbols(),c=0;c<this._aperture._setup.reels.length;c++){for(var d=[],e=0;e<this._aperture._setup.reels[c].symbols_per_reel+2;e++)d.push("BL");a.push(d)}b.forEach(function(b){a[b.getPosition().getReelIndex()][b.getPosition().getRowIndex()+1]=b.getSymbol()}),this._aperture.restoreAperture(a)},c.prototype.updateComponentData=function(){this._mainMovieLayer=new PIXI.Container,this._animationLayer=new PIXI.Container,this.addChild(this._mainMovieLayer),this.addChild(this._animationLayer)},c.prototype.onResultsRequested=function(a){b.prototype.onResultsRequested.call(this,a),l.current.getAction()===m.HOLD_FREE_SPINS&&this.showRespinNumber(l.current.getFeatureSpinsLeft()-1),this._aperture.isSpinning||(null!==this.audioProfile&&(i.globalSounds.stopCue(this.audioProfile),this.audioProfile=null),this._aperture.startSpin())},c.prototype.onStateReady=function(){l.current.getFeatureAwardedSpins()!==l.current.getFeatureSpinsLeft()&&l.current.getAction()===m.HOLD_FREE_SPINS&&this.showRespinNumber(l.current.getFeatureSpinsLeft()-1)},c.prototype.onResultsReady=function(){b.prototype.onResultsReady.call(this);var a=new g(l.current);this.dropSymbols(a)},c.prototype.dropSymbols=function(a){var b=this,c=new h;c.add(function(c){b.addModifySymbolBeforeReelStop(a,c)}),c.add(function(c){b._aperture.dropSymbols(a,c)}),c.add(function(c){b.updateGridAfterReelStop(a,c)}),c.add(function(c){b._winManager.displaySpinResults(a,c)}),c.start()},c.prototype.onInteraction=function(a,c){b.prototype.onInteraction.call(this,a,c),i.globalSounds.playCue("GENERIC_CLICK")},c.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_SPIN_START,this.onSpinStart),a.Common.ApplicationBase.instance.off(d.EVENT_SYMBOL_DROPPED,this.onSymbolDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REEL_DROPPED,this.onReelDropped),a.Common.ApplicationBase.instance.off(d.EVENT_REELS_DROPPED,this.onReelsDropped)},c.prototype.onReelsDropped=function(){},c.prototype.onGameAccepted=function(){this._aperture.visible=!0},c.prototype.startGame=function(){this._aperture.visible=!0,this.playFeatureMusic(),l.current.isBrokenGameSate()||l.current.getAction()!==m.HOLD_FREE_SPINS||this.showRespinNumber(l.current.getFeatureSpinsLeft()-1)},c.prototype.showRespinNumber=function(a){this._layout.getComponent("respin_1").visible=!1,this._layout.getComponent("respin_2").visible=!1,this._layout.getComponent("respin_3").visible=!1,this._layout.getComponent("respin_4").visible=!1;var b=a.toString();0==a&&(b="4"),this._layout.getComponent("respin_"+b).visible=!0},c.prototype.onSummaryAccepted=function(){b.prototype.onSummaryAccepted.call(this),this.playFeatureMusic()},c.prototype.onSpinStart=function(){i.globalSounds.playCue("SPIN_BUTTON"),this._mainMovieLayer.removeChildren()},c.prototype.onContinueGame=function(){a.Core.Time.juggler.setTimeout(function(){l.current.getNextAction().includes(m.HOLD_FREE_SPINS)&&a.Common.ApplicationBase.instance.emit(f.ON_GET_GAME_RESULTS,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel})},800)},c.prototype.onReelDropped=function(a,b){b||i.globalSounds.playCue(this._layout.getLayoutParams().audio.fx.reel_drops[a.reelIndex],250,!1,.6),4==a.reelIndex&&i.globalSounds.stopCue("ReeL_spin")},c.prototype.onSymbolDropped=function(a,b){var c=a.getSymbolProfile();if(c&&c.getAudioDropId){var d=c.getAudioDropId();d&&(i.globalSounds.stopCue(d),i.globalSounds.playCue(d))}},c.prototype.onReelTease=function(a,b){},c.prototype.onReelTeaseEnd=function(a,b){},c.prototype.onWinsShown=function(){this._layout.setComponentText("total_win_value",j.format(l.current.getFeatureTotalWin())),l.current&&l.current.getAction().includes(m.HOLD_FREE_SPINS)&&l.current.getNextAction()===m.BASE?0!==l.current.getFeatureTotalWin()&&l.current.getAction()===m.HOLD_FREE_SPINS?this.playHoldFreeSpinsAnimation(l.current.getFeatureReelModifiersSymbols(),m.HOLD_FREE_SPINS,!0):0!==l.current.getFeatureTotalWin()&&l.current.getAction()===m.JACKPOT_HOLD_FREE_SPINS?this.playHoldFreeSpinsAnimation(l.current.getFeatureReelModifiersSymbols(),m.JACKPOT_HOLD_FREE_SPINS,!1):(a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(e.EVENT_SHOW_FEATURE_WIN_SUMMARY),$("#bet_button_wrapper").removeClass("disabled"),$("#bet_button_wrapper").css("pointer-events","all"),$("#Autoplay_button_wrapper").removeClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","all"),$(".button_bett").removeClass("disabled"),$(".button_bett").css("pointer-events","all"),$("#button_auto_cp").removeClass("disabled"),$("#button_auto_cp").css("pointer-events","all"),$("#menu_mobile").removeClass("disabled"),$("#menu_mobile").css("pointer-events","all"),$("#main_button_wrapper").removeClass("disabled"),$("#main_button_wrapper").css("pointer-events","all"),$("#button_spin").removeClass("disabled"),$("#button_spin").css("pointer-events","all")},600),a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED)):l.current.getFeatureReTriggeredSpins()>0&&l.current.getAction()===m.HOLD_FREE_SPINS?(this.showRespinNumber(l.current.getFeatureReTriggeredSpins().toString()),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED)},500)):a.Common.ApplicationBase.instance.emit(f.ON_RESULTS_DISPLAYED)},c.prototype.playHoldFreeSpinsAnimation=function(b,c,d){var e=this;l.current.getAction()===m.HOLD_FREE_SPINS&&(this._layout.getComponent("respin_4").visible=!1);var f=this._layout.getComponent("amount_collection_in");f.visible=!0;var g=this._layout.getComponent("amount_collection_loop");this._layout.getComponent("basegame_bg_amount_collect").visible=!0,new Promise(function(h,j){e._assets.playAnimation(f.clip,!1,function(){g.visible=!0,f.visible=!1});var k,l=e._layout.getComponent("amount_collected"),n=b.length,o=0,p=0,q=function(c,d){if(c<b.length){var f=b[c],g=e._layout.getComponent("amount_collect_row_"+f.getPosition().getReelIndex()+"_grid_"+f.getPosition().getRowIndex()),j=e._winManager.getAperture().getSymbols([f.getPosition()]);a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.ON_REMOVE_SYMBOL_IN_HOLD,j[0]),g.visible=!0,l.visible=!0,a.Core.Time.juggler.setTimeout(function(){a.Core.Time.juggler.setTimeout(function(){k=e._layout.getComponent("amount_collect_trail_hit_effect"),k.visible=!0,e._assets.playAnimation(k.clip,!1)},350),i.globalSounds.playCue("TRAIL_SOUND"),e._assets.playAnimation(g.clip,!1,function(){g.visible=!1,d+=parseFloat(f.getType()),l.setText(a.Common.Currency.format(d,!0)),q(c+1,d)})},50)}else k.visible=!1,e._layout.getComponent("basegame_bg_amount_collect").visible=!1,h()};d?q(0,0):function(){b.forEach(function(d){var f=e._layout.getComponent("amount_collect_row_"+d.getPosition().getReelIndex()+"_grid_"+d.getPosition().getRowIndex()),g=e._winManager.getAperture().getSymbols([d.getPosition()]);a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.ON_REMOVE_SYMBOL_IN_HOLD,g[0]),f.visible=!0,l.visible=!0,a.Core.Time.juggler.setTimeout(function(){a.Core.Time.juggler.setTimeout(function(){k=e._layout.getComponent("amount_collect_trail_hit_effect"),k.visible=!0,e._assets.playAnimation(k.clip,!1)},350),i.globalSounds.playCue("TRAIL_SOUND"),e._assets.playAnimation(f.clip,!1,function(){f.visible=!1,++o===n&&(c===m.HOLD_FREE_SPINS?p=b.reduce(function(a,b){return a+parseFloat(b.getType())},0):c===m.JACKPOT_HOLD_FREE_SPINS&&n>0&&(p=parseFloat(b[0].getType())),l.setText(a.Common.Currency.format(p,!0).toString()),k.visible=!1,e._layout.getComponent("basegame_bg_amount_collect").visible=!1,h())})},50)})}()}).then(function(){a.Core.Time.juggler.setTimeout(function(){n.showPopupScene("HOLD_FREE_SPINS_SUMMARY")},1500)})},c.prototype.addModifySymbolBeforeReelStop=function(a,b){this._winManager.addModifySymbolBeforeReelStop(a,b)},c.prototype.showBrokenFeatureWinSummary=function(){var c=this,d=l.current.getFeatureReelModifiersSymbols();d&&d.forEach(function(b){var d=c._winManager.getAperture().getSymbols([b.getPosition()]);a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.ON_REMOVE_SYMBOL_IN_HOLD,d[0])}),b.prototype.showBrokenFeatureWinSummary.call(this),a.Core.Renderer.SceneManager.showPopupScene("HOLD_FREE_SPINS_SUMMARY")},c.prototype.updateGridAfterReelStop=function(a,b){b()},c}(c);b.HoldFreeSpinsScene=o}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Renderer.Scene,f=a.Core.Lang,g=a.Common.Server.ResponseResult,h=a.Core.Utils.Queue,i=function(b){function e(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.prevJackpotValues={grand:0,major:0,minor:0,mini:0},f}return __extends(e,b),e.prototype.onCreate=function(){var c=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this)),this.sectionGraphic=new PIXI.Graphics,this.textContainer=new PIXI.Container,this.wheel=new PIXI.Container,this.rotateDuration=this._layout.getLayoutParams().rotateDuration||7,this.stopDuration=this._layout.getLayoutParams().stopDuration||4,this.stopDelayDuration=this._layout.getLayoutParams().stopDelayDuration||3,this.borderColor=this._layout.getLayoutParams().borderColor||16777215,this.sectionColors=this._layout.getLayoutParams().sectionColors||0,this.sectionTexts=this._layout.getLayoutParams().sectionTexts,this.radius=this._layout.getLayoutParams().radius||250,this.numberOfSectors=this._layout.getLayoutParams().numberOfSectors||8,this.piTwo=1.5*Math.PI,this.radiansPerSector=this.piTwo/this.numberOfSectors,this.updateComponentData(),g.current.getJackpotValues()&&(this.jackGrandMeter=this._layout.getComponent("jack_diamond_meter_value"),this.jackMajorMeter=this._layout.getComponent("jack_gold_meter_value"),this.jackMinorMeter=this._layout.getComponent("jack_silver_meter_value"),this.jackMiniMeter=this._layout.getComponent("jack_bronze_meter_value"),this.prevJackpotValues=g.current.getJackpotValues(),this.updateJackpotWheelMeterValues()),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){c.onResize(),c.visible=!0,a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0)},100),this.on(a.Core.Events.ON_INTERACTION,function(a,b){"spin_button_anim"==b&&(this.startWheelSpin(),this._layout.getComponent("spin_button_anim").interactive=!1)}.bind(this))},e.prototype.onResultDisplay=function(){d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this))},e.prototype.startWheelSpin=function(){var a=this;this._layout.getComponent("wheel_assets_normal").visible=!1,this._layout.getComponent("wheel_assets_glow").visible=!0,this.wheel=this._layout.getComponent("main_wheel_spin"),this.wheel.rotation=0;var b=5*(this.piTwo+this.finalPosition()),c=new TimelineMax;c.to(this.wheel,this.rotateDuration,{rotation:"+="+b,ease:Back.easeOut}),d.globalSounds.playCue("jackpot_wheel_sound"),TweenLite.to(c,this.stopDuration,{timeScale:0,ease:Linear.easeNone,delay:this.stopDelayDuration,onComplete:function(){var b=a._layout.getComponent("win_section");b.visible=!0,a._assets.playAnimation(b.clip,!1,function(){a.processJackpotLevel();var c=a._layout.getComponent("win_starting_glow");c.visible=!0,a._assets.playAnimation(c.clip,!1,function(){b.visible=!1,c.visible=!1,d.globalSounds.stopCue("jackpot_wheel_sound"),a.onWheelStopped()})})}})},e.prototype.handleJackpotLevel=function(a){var b=this._layout.getComponent(a);b&&(b.visible=!0,b.alpha=0,TweenLite.to(b,.5,{alpha:1,ease:Linear.easeIn,onComplete:function(){}}))},e.prototype.processJackpotLevel=function(){switch(g.current.getJackpotData().level){case"grand":this.handleJackpotLevel("JP_diamond_meters_win");break;case"major":this.handleJackpotLevel("JP_gold_meters_win");break;case"minor":this.handleJackpotLevel("JP_silver_meters_win");break;case"mini":this.handleJackpotLevel("JP_bronze_meters_win")}},e.prototype.onWheelStopped=function(){var a=new h;a.add(function(a){this.showFeatureWinSummary()}.bind(this)),a.start()},e.prototype.showFeatureWinSummary=function(){var b=this,d=new h,e=g.current.getJackpotData().win;e>0&&(a.Common.ApplicationBase.instance.emit(c.ADD_CELEBRATIONS,e,d),d.add(function(c){a.Core.Time.juggler.setTimeout(function(){b.showWinTextAnimation(e),c()},200)})),d.start(function(){var b=this;a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.closeOverlay(),a.Core.Time.juggler.setTimeout(function(){$("#allbutton_wapper").show(),$("#Autoplay_button_wrapper").show(),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show(),b.onFinish&&b.onFinish()},600)},2e3)}.bind(this))},e.prototype.showWinTextAnimation=function(b){var c=this._layout.getComponent("win_amount");c.visible=!0,c.setText(a.Common.Currency.format(b,!0)),a.Core.Environment.isPortrait()?c.position=new PIXI.Point(c.getParams().startPosP.x,c.getParams().startPosP.y):c.position=new PIXI.Point(c.getParams().startPosDL.x,c.getParams().startPosDL.y);var e=new PIXI.Point(c.position.x,c.position.y),f=new TimelineLite;if(c.scale.x=.2,c.scale.y=.2,d.globalSounds.playCue("counting_up_FreeGame"),a.Core.Environment.isDesktop()){var g=c.getParams().endPos;f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(c.position,.3,{x:g.x,y:g.y,ease:Cubic.easeIn}),TweenLite.to(c.scale,.3,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1,$("#cp_win").show(),$("#cp_win").text(a.Common.Currency.format(b)),$("#cp_win").css("display","block")}})])}else f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1,$("#cp_win").show(),$("#cp_win").text(a.Common.Currency.format(b)),$("#cp_win").css("display","block")}}))},e.prototype.updateJackpotWheelMeterValues=function(b){var c=this;if(this.jackGrandMeter&&g.current&&g.current.getJackpotValues()){var d=g.current.getJackpotValues(),e={win:Number(this.prevJackpotValues.grand)},f={win:Number(this.prevJackpotValues.major)},h={win:Number(this.prevJackpotValues.minor)},i={win:Number(this.prevJackpotValues.mini)};TweenLite.to(e,.5,{win:d.grand,ease:Cubic.easeOut,onUpdate:function(){c.jackGrandMeter.setText(a.Common.Currency.format(Number(e.win)))},onComplete:function(){c.jackGrandMeter.setText(a.Common.Currency.format(Number(d.grand)))}}),TweenLite.to(f,.5,{win:d.major,ease:Cubic.easeOut,onUpdate:function(){c.jackMajorMeter.setText(a.Common.Currency.format(Number(f.win)))},onComplete:function(){c.jackMajorMeter.setText(a.Common.Currency.format(Number(d.major)))}}),TweenLite.to(h,.5,{win:d.minor,ease:Cubic.easeOut,onUpdate:function(){c.jackMinorMeter.setText(a.Common.Currency.format(Number(h.win)))},onComplete:function(){c.jackMinorMeter.setText(a.Common.Currency.format(Number(d.minor)))}}),TweenLite.to(i,.5,{win:d.mini,ease:Cubic.easeOut,onUpdate:function(){c.jackMiniMeter.setText(a.Common.Currency.format(Number(i.win)))},onComplete:function(){c.jackMiniMeter.setText(a.Common.Currency.format(Number(d.mini)))}}),this.prevJackpotValues=d}b&&b()},e.prototype.updateComponentData=function(){$("#allbutton_wapper").hide(),$("#Autoplay_button_wrapper").hide(),$("#button_settings").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide();for(var a=0;a<this.numberOfSectors;a+=1){var b=a*this.radiansPerSector-this.radiansPerSector/2,c=b+this.radiansPerSector,d=void 0;d="number"==typeof this.sectionColors?0:this.sectionColors[a],this.sectionGraphic.beginFill(d),this.sectionGraphic.lineStyle(2,this.borderColor,1),this.sectionGraphic.moveTo(0,0),this.sectionGraphic.arc(0,0,this.radius,b,c),this.sectionGraphic.lineTo(0,0),this.createSectorText(a)}var e=new PIXI.Sprite(this._assets.getPIXITexture("wheel_back_idle"));e.anchor.set(.5),this.wheel.pivot.set(250,250),this.wheel.position.set(250,250),this.wheel.addChild(e),this.wheel.addChild(this.textContainer),this.wheel.buttonMode=!0,this.wheel.interactive=!0},e.prototype.createSectorText=function(a){var b="";this.sectionTexts&&a<this.sectionTexts.length&&(b=f.getPhrase(this.sectionTexts[a]));var c=new PIXI.Text(b,{fill:"#FFFFFF"});c.visible=!0;var d=a*this.radiansPerSector,e=(this.radius-30)/this.radius;c.anchor.set(0,.5),c.rotation=d+Math.PI,c.position.x=250+this.radius*e*Math.cos(d),c.position.y=250+this.radius*e*Math.sin(d),this.textContainer.addChild(c)},e.prototype.finalPosition=function(){var a=g.current.getJackpotData().level,b=this.getChoosenSectorAndAdjustmentFactor(a),c=b.choosenSector,d=b.anchorAdjustmentFactor;return this.calculateRotation(c)-this.wheel.rotation-d},e.prototype.getChoosenSectorAndAdjustmentFactor=function(a){var b,c;switch(a){case"grand":b=3,c=Math.PI/2.42;break;case"major":b=2,c=Math.PI/2.2;break;case"minor":b=1,c=Math.PI/1.99;break;case"mini":b=4,c=Math.PI/2.71;break;default:b=0,c=0}return{choosenSector:b,anchorAdjustmentFactor:c}},e.prototype.calculateRotation=function(a){return a*this.radiansPerSector+this.radiansPerSector/2},e}(e);b.WheelBonusScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Renderer.Scene,f=a.Core.Lang,g=a.Common.Server.ResponseResult,h=a.Core.Utils.Queue,i=a.Common.Server,j=a.Core.Renderer.SceneManager,k=function(b){function e(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.spinStarted=!1,f}return __extends(e,b),e.prototype.onCreate=function(){var d=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this)),this.sectionGraphic=new PIXI.Graphics,this.textContainer=new PIXI.Container,this.wheel=new PIXI.Container,this.rotateDuration=this._layout.getLayoutParams().rotateDuration||7,this.stopDuration=this._layout.getLayoutParams().stopDuration||4,this.stopDelayDuration=this._layout.getLayoutParams().stopDelayDuration||3,this.borderColor=this._layout.getLayoutParams().borderColor||16777215,this.sectionColors=this._layout.getLayoutParams().sectionColors||0,this.sectionTexts=this._layout.getLayoutParams().sectionTexts,this.radius=this._layout.getLayoutParams().radius||250,this.numberOfSectors=this._layout.getLayoutParams().numberOfSectors||8,this.piTwo=1.5*Math.PI,this.radiansPerSector=this.piTwo/this.numberOfSectors,this.updateComponentData(),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){d.onResize(),d.visible=!0},100),a.Common.Server.ResponseResult.current.isBrokenGameSate()&&!this.spinStarted&&a.Core.Time.juggler.setTimeout(function(){this.startWheelSpin()}.bind(this),1e3),this.on(a.Core.Events.ON_INTERACTION,function(b,d){"wheel_start_button"==d&&(a.Common.ApplicationBase.instance.emit(c.ON_GET_GAME_RESULTS,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel}),a.Core.Time.juggler.setTimeout(function(){this.startWheelSpin()}.bind(this),1e3),this._layout.getComponent("wheel_start_button").interactive=!1)}.bind(this))},e.prototype.onResultDisplay=function(){d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onResultDisplay.bind(this))},e.prototype.startWheelSpin=function(){var b=this;this.spinStarted=!0,this._layout.getComponent("wheel_idle").visible=!1,this._layout.getComponent("wheel_normal").visible=!1,this._layout.getComponent("anchor_idle").visible=!1,this._layout.getComponent("wheel_back_rays").visible=!0,this._layout.getComponent("wheel_shadow").visible=!0,this._layout.getComponent("wheel_spin").visible=!0,this._layout.getComponent("anchor_spin").visible=!0,this._layout.getComponent("back_particles").visible=!0,this._layout.getComponent("wheel_with_glow").visible=!0,this.wheel=this._layout.getComponent("wheel_spin"),this.wheel.rotation=0;var c=5*(this.piTwo+this.finalPosition()),e=new TimelineMax;e.to(this.wheel,this.rotateDuration,{rotation:"+="+c,ease:Back.easeOut}),d.globalSounds.playCue("selection_wheel_sound"),TweenLite.to(e,this.stopDuration,{timeScale:0,ease:Linear.easeNone,delay:this.stopDelayDuration,onComplete:function(){var c=b._layout.getComponent("wheel_win_section");c.alpha=1,b._assets.playAnimation(c.clip,!1,function(){a.Core.Time.juggler.setTimeout(function(){b.onWheelStopped()},200)})}})},e.prototype.onWheelStopped=function(){var b=this;if("FREE_SPINS"===g.current.getNextAction())a.Core.Renderer.SceneManager.closeOverlay(),this.showFreeSpinsIntro(g.current.getNextAction()),a.Core.Time.juggler.setTimeout(function(){b.onFinish&&b.onFinish()},600);else{var c=new h;c.add(function(a){this.spinStarted=!1,this.showFeatureWinSummary()}.bind(this)),c.start()}},e.prototype.showFreeSpinsIntro=function(a){j.showPopupScene(a==i.HOLD_FREE_SPINS?"HOLD_FREE_SPINS_INTRO":"FREE_SPINS_INTRO")},e.prototype.showFeatureWinSummary=function(){var b=this,c=new h,d=g.current.getTotalWin();d>0&&c.add(function(c){a.Core.Time.juggler.setTimeout(function(){b.showWinTextAnimation(d),c()},200)}),c.start(function(){var b=this;a.Core.Time.juggler.setTimeout(function(){a.Core.Renderer.SceneManager.closeOverlay(),a.Core.Time.juggler.setTimeout(function(){$("#allbutton_wapper").show(),$("#Autoplay_button_wrapper").show(),$("#button_settings").show(),$("#menu_mobile").show(),$("#main_button_wrapper").show(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!1),a.Common.ApplicationBase.instance.emit(i.SEND_ROUND_END),b.onFinish&&b.onFinish()},600)},2e3)}.bind(this))},e.prototype.showWinTextAnimation=function(b){var c=this._layout.getComponent("win_amount");c.visible=!0,c.setText(a.Common.Currency.format(b,!0)),a.Core.Environment.isPortrait()?c.position=new PIXI.Point(c.getParams().startPosP.x,c.getParams().startPosP.y):c.position=new PIXI.Point(c.getParams().startPosDL.x,c.getParams().startPosDL.y);var e=new PIXI.Point(c.position.x,c.position.y),f=new TimelineLite;if(c.scale.x=.2,c.scale.y=.2,d.globalSounds.playCue("counting_up_FreeGame"),a.Core.Environment.isDesktop()){var g=c.getParams().endPos;f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut})),f.add([TweenLite.to(c.position,.3,{x:g.x,y:g.y,ease:Cubic.easeIn}),TweenLite.to(c.scale,.3,{x:.2,y:.2,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1,$("#cp_win").show(),$("#cp_win").text(a.Common.Currency.format(b)),$("#cp_win").css("display","block")}})])}else f.add(TweenLite.to(c.scale,1.5,{x:.6,y:.6,ease:Cubic.easeOut,onComplete:function(){c.position=e,c.visible=!1,$("#cp_win").show(),$("#cp_win").text(a.Common.Currency.format(b)),$("#cp_win").css("display","block")}}))},e.prototype.updateComponentData=function(){$("#allbutton_wapper").hide(),$("#Autoplay_button_wrapper").hide(),$("#button_settings").hide(),$("#menu_mobile").hide(),$("#main_button_wrapper").hide();for(var a=0;a<this.numberOfSectors;a+=1){var b=a*this.radiansPerSector-this.radiansPerSector/2,c=b+this.radiansPerSector,d=void 0;d="number"==typeof this.sectionColors?0:this.sectionColors[a],this.sectionGraphic.beginFill(d),this.sectionGraphic.lineStyle(2,this.borderColor,1),this.sectionGraphic.moveTo(0,0),this.sectionGraphic.arc(0,0,this.radius,b,c),this.sectionGraphic.lineTo(0,0),this.createSectorText(a)}var e=new PIXI.Sprite(this._assets.getPIXITexture("wheel_back_idle"));e.anchor.set(.5),this.wheel.pivot.set(250,250),this.wheel.position.set(250,250),this.wheel.addChild(e),this.wheel.addChild(this.textContainer),this.wheel.buttonMode=!0,this.wheel.interactive=!0},e.prototype.createSectorText=function(a){var b="";this.sectionTexts&&a<this.sectionTexts.length&&(b=f.getPhrase(this.sectionTexts[a]));var c=new PIXI.Text(b,{fill:"#FFFFFF"});c.visible=!0;var d=a*this.radiansPerSector,e=(this.radius-30)/this.radius;c.anchor.set(0,.5),c.rotation=d+Math.PI,c.position.x=250+this.radius*e*Math.cos(d),c.position.y=250+this.radius*e*Math.sin(d),this.textContainer.addChild(c)},e.prototype.finalPosition=function(){var a=g.current.getFeatureAwardedSpins()||g.current.getMultiplier()+"x",b=this.getChoosenSectorAndAdjustmentFactor(a),c=b.choosenSector,d=b.anchorAdjustmentFactor;return this.calculateRotation(c)-this.wheel.rotation-d},e.prototype.getChoosenSectorAndAdjustmentFactor=function(a){var b,c;switch(a){case"30x":b=1,c=Math.PI/2.55;break;case"25x":b=2,c=Math.PI/2.56;break;case"20x":b=3,c=Math.PI/2.051;break;case"15x":b=4,c=Math.PI/8.75;break;case 25:b=5,c=Math.PI/2.85;break;case 20:b=6,c=Math.PI/2.25;break;case 15:b=7,c=Math.PI/5.99;break;case 10:b=8,c=Math.PI/3.78;break;default:b=0,c=0}return{choosenSector:b,anchorAdjustmentFactor:c}},e.prototype.calculateRotation=function(a){return a*this.radiansPerSector+this.radiansPerSector/2},e}(e);b.SelectionWheelScene=k}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Slots.WinManager,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Renderer.Scene,g=a.Core.Lang,h=a.Common.Server.ResponseResult,i=a.Common.GameEvents,j=a.Core.Renderer.SceneManager,k=function(f){function k(a,b,c,d){return f.call(this,a,b,c,d)||this}return __extends(k,f),k.prototype.onCreate=function(){var b=this;f.prototype.onCreate.call(this),d.globalSounds.stopMusic(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),d.globalSounds.playCue("SUMMARY",0,!0),this._layout.triggerFX("create"),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue.bind(this)),$("#button_settings").css("visibility","hidden"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_INFO_PAGE_CLOSED),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),this.updateComponentData(),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){b.onResize(),b.visible=!0},100)},k.prototype.onContinue=function(){d.globalSounds.playCue("GENERIC_CLICK"),d.globalSounds.stopCue("SUMMARY"),a.Core.Environment.playVibrate(),this.interactive=!1,this.interactiveChildren=!1,this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),$("#button_settings").css("visibility","visible"),a.Common.ApplicationBase.instance.emit(i.ON_OUTRO_CLOSE),a.Common.ApplicationBase.allAssetsLoaded?j.showSceneAsOverlay("TRANSITION",void 0,void 0,void 0,void 0,function(){a.Common.ApplicationBase.instance.emit(c.EVENT_SHOW_FEATURE_WIN_SUMMARY)}):(a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),a.Common.ApplicationBase.instance.emit(i.ON_PLAYER_PROMPT,g.getPhrase("")),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.EVENT_SHOW_FEATURE_WIN_SUMMARY)},(this._layout.getLayoutParams().nextSceneDelay||1)+1e3)),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(i.ON_RESULTS_DISPLAYED,b.FreeSpinsScene.lastResults)},this._layout.getLayoutParams().nextSceneDelay||1),a.Common.ApplicationBase.instance.emit(a.Common.Server.GAME_FEATURE_ENDED),this._data&&this._data.callback()},k.prototype.updateComponentData=function(){this._layout.getComponent("win_amount")&&this._layout.setComponentText("win_amount",g.getPhrase("feature_pays_x_caps",{win:e.format(h.current.getFeatureTotalWin())}))},k}(f);b.FeatureSummaryScene=k}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Lang,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.Scene,h=a.Core.Renderer.SceneManager,i=function(b){function g(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(g,b),g.prototype.onCreate=function(){var f=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),a.Common.ApplicationBase.instance.emit(c.ON_PLAYER_PROMPT,e.getPhrase("")),d.globalSounds.playCue("INTRO",0,!0),this.updateComponentData(),$("#button_settings").css("visibility","hidden"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_INFO_PAGE_CLOSED),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){f.onResize(),f.visible=!0},100)},
g.prototype.onContinue=function(){a.Common.ApplicationBase.instance.emit(a.Common.Server.GAME_FEATURE_STARTED),d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),$("#button_settings").css("visibility","visible"),a.Common.ApplicationBase.allAssetsLoaded&&h.showSceneAsOverlay("TRANSITION"),a.Core.Time.juggler.setTimeout(function(){a.Common.ApplicationBase.instance.emit(c.ON_RESULTS_DISPLAYED)},this._layout.getLayoutParams().nextSceneDelay||1)},g.prototype.updateComponentData=function(){this._layout.getComponent("awarded_spin_count")&&f.current.getFeatureAwardedSpins()&&this._layout.setComponentText("awarded_spin_count",f.current.getFeatureAwardedSpins().toString()),this._layout.getComponent("awarded_multiplier")&&f.current.getFeatureAwardedMultiplier()&&this._layout.setComponentText("awarded_multiplier",e.getPhrase("awarded_multiplier",{multiplier:f.current.getFeatureAwardedMultiplier()}))},g}(g);b.FeatureIntroScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Lang,f=a.Core.Renderer.Scene,g=a.Core.Environment,h=function(b){function f(a,c,d,e,f){var g=b.call(this,a,c,d,e)||this;return f&&(g.onFinish=f),g}return __extends(f,b),f.prototype.onCreate=function(){b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.ApplicationBase.instance.emit(c.ON_PLAYER_PROMPT,e.getPhrase("")),this.updateComponentData(),this.onResize(),this.visible=!0},f.prototype.onContinue=function(){},f.prototype.updateComponentData=function(){var b,c=this;$("#control_panel").css("visibility","hidden"),$("#button_settings").css("visibility","hidden"),$("#win_wrapper").css("visibility","hidden"),$("#button_audio_screen").css("visibility","hidden "),$("#button_auto_cp").css("visibility","hidden "),$("#button_home").css("visibility","hidden "),b=g.isMobile()&&g.isPortrait()?this._layout.getComponent("transitionMobile"):this._layout.getComponent("transition"),d.globalSounds.playCue("transition_sound"),b.visible=!0,this._assets.playAnimation(b.clip,!1,function(){b.visible=!1,a.Core.Renderer.SceneManager.closeOverlay(),$("#control_panel").css("visibility","visible"),$("#button_settings").css("visibility","visible"),$("#win_wrapper").css("visibility","visible"),$("#button_audio_screen").css("visibility","visible"),$("#button_auto_cp").css("visibility","visible"),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").css("visibility","visible "),$("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),d.globalSounds.stopCue("transition_sound"),c.onFinish&&c.onFinish()})},f}(f);b.FeatureTransitionScene=h}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Common.GameEvents,d=a.Core.SoundManager,e=a.Core.Lang,f=a.Common.Server.ResponseResult,g=a.Core.Renderer.Scene,h=a.Common.Server,i=function(b){function g(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(g,b),g.prototype.onCreate=function(){var g=this;b.prototype.onCreate.call(this),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_DISABLE,!0),this.on(a.Core.Events.ON_INTERACTION,this.onContinue),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),a.Common.ApplicationBase.instance.emit(c.ON_PLAYER_PROMPT,e.getPhrase("")),d.globalSounds.playCue("INTRO",0,!0),this.updateComponentData(),"BR"!=f.current.getGameConfig().getJurisdiction()&&($("#button_settings").css("visibility","hidden"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_INFO_PAGE_CLOSED)),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){g.onResize(),g.visible=!0},100)},g.prototype.onContinue=function(){a.Common.ApplicationBase.instance.emit(a.Common.Server.GAME_FEATURE_STARTED),d.globalSounds.playCue("GENERIC_CLICK"),this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),$("#button_settings").css("visibility","visible"),a.Common.ApplicationBase.instance.emit(h.FREE_ROUND_STARTED)},g.prototype.updateComponentData=function(){this._layout.getComponent("awarded_spin_count")&&f.current.getFreeRoundsLeft()&&this._layout.setComponentText("awarded_spin_count",f.current.getFreeRoundsLeft().toString())},g}(g);b.FreeRoundsIntroScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.SoundManager,d=a.Common.Currency,e=a.Core.Renderer.Scene,f=a.Core.Lang,g=a.Common.Server.ResponseResult,h=a.Common.GameEvents,i=a.Common.Server,j=function(b){function e(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(e,b),e.prototype.onCreate=function(){var d=this;b.prototype.onCreate.call(this),c.globalSounds.stopMusic(),a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!0),c.globalSounds.playCue("SUMMARY",0,!0),this._layout.triggerFX("create"),this.interactive=!0,this.interactiveChildren=!0,this.on(a.Core.Events.ON_INTERACTION,this.onContinue.bind(this)),$("#button_settings").css("visibility","hidden"),a.Common.ApplicationBase.instance.emit(a.Slots.SettingsPages.SettingsEvents.ON_INFO_PAGE_CLOSED),a.Core.Environment.launchVariables.homeEnabled&&($("#button_home").addClass("disabled"),$("#button_home").css("pointer-events","none")),this.updateComponentData(),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){d.onResize(),d.visible=!0},100)},e.prototype.onContinue=function(){c.globalSounds.playCue("GENERIC_CLICK"),c.globalSounds.stopCue("SUMMARY"),a.Core.Environment.playVibrate(),this.interactive=!1,this.interactiveChildren=!1,this.off(a.Core.Events.ON_INTERACTION,this.onContinue),a.Core.Renderer.SceneManager.closePopupScene(),$("#button_settings").css("visibility","visible"),a.Common.ApplicationBase.instance.emit(h.ON_OUTRO_CLOSE),a.Common.ApplicationBase.instance.emit(i.FREE_ROUND_ENDED)},e.prototype.updateComponentData=function(){this._layout.getComponent("win_amount")&&this._layout.setComponentText("win_amount",f.getPhrase("feature_pays_x_caps",{win:d.format(g.current.getFreeRoundsWin())}))},e}(e);b.FreeRoundsSummaryScene=j}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.winTickUp=0,f.isSkipped=!1,f}return __extends(c,b),c.prototype.onCreate=function(){var b=this;this._layout.triggerFX("create"),d.globalSounds.startMusic(this._layout.getLayoutParams().audio,0,!1,!1),this.visible=!0,this.updateComponentData(),this.isSkipped=!1,this._cancelSkip=a.Core.Utils.touchToSkip(function(){b.isSkipped=!0,b.onSkipped()}),this.onResize()},c.prototype.onSkipped=function(){var b=this;this._cancelSkip(),this.anim_win_loop.visible=!1;var c=this._layout.getComponent(this._sceneProfile.id.toLowerCase().trim()+"_out");c.visible=!0,this._data.celebrationEnd&&d.globalSounds.stopMusic(),this._data.OnComplete(),this._assets.playAnimation(c.clip,!0,function(){c.clip.visible=!1,b._tweenRollUp&&b._tweenRollUp.kill(),a.Core.Renderer.SceneManager.closeOverlay(),b.visible=!1,b._data.callback()})},c.prototype.updateComponentData=function(){var b=this,c=this._layout.getComponent("win_text");this.winTickUp=this._data.tickupStart||0;var d=this._layout.getComponent(this._sceneProfile.id.toLowerCase().trim()+"_in");this.anim_win_loop=this._layout.getComponent(this._sceneProfile.id.toLowerCase().trim()+"_loop"),d.visible=!0,this._assets.playAnimation(d.clip,!1,function(){d.visible=!1,b.isSkipped||(b.anim_win_loop.visible=!0,b._assets.playAnimation(b.anim_win_loop.clip,!0))});var f={win:this.winTickUp};c.visible=!0,this._tweenRollUp=TweenLite.to(f,this._layout.getLayoutParams().rollup_duration,{win:this._data.win,ease:Power1.easeIn,onUpdate:function(){c.setText(e.format(f.win,!0))},onComplete:function(){b._data.celebrationEnd&&b.onSkipped()}}),this._data.celebrationEnd||a.Core.Time.juggler.setTimeout(function(){b.onSkipped()},800*this._layout.getLayoutParams().rollup_duration)},c}(c);b.CelebrationScene=f}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Renderer.Scene,d=a.Core.SoundManager,e=a.Common.Currency,f=a.Core.Environment,g=a.Common.Server.ResponseResult,h=a.Core.Events,i=a.Core.Renderer.SceneManager,j=a.Common.Server,k=function(b){function c(a,c,d,e){var f=b.call(this,a,c,d,e)||this;return f.centerCard=!1,f.HistoryVisible=!1,f}return __extends(c,b),c.prototype.updateOnOrientationChange=function(){b.prototype.updateOnOrientationChange.call(this),f.isDesktop()||f.isLandscape()?(this._layout.getComponent("gamble_holder").position=new PIXI.Point(26,20),this._layout.getComponent("gamble_holder").scale=new PIXI.Point(.975,.975),"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase()?(this._layout.getComponent("collect").position=new PIXI.Point(1756.8000000000002,910.4399999999999),this._layout.getComponent("collect").scale=new PIXI.Point(1,1)):(this._layout.getComponent("collect_lang").position=new PIXI.Point(1756.8000000000002,910.4399999999999),this._layout.getComponent("collect_lang").scale=new PIXI.Point(1,1))):(this._layout.getComponent("gamble_holder").position=new PIXI.Point(-330.12,875),this._layout.getComponent("gamble_holder").scale=new PIXI.Point(1.26,1.26),"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase()?(this._layout.getComponent("collect").position=new PIXI.Point(1515.6000000000001,2217.24),this._layout.getComponent("collect").scale=new PIXI.Point(1.5,1.5)):(this._layout.getComponent("collect_lang").position=new PIXI.Point(1515.6000000000001,2217.24),this._layout.getComponent("collect_lang").scale=new PIXI.Point(1.5,1.5)))},c.prototype.onCreate=function(){var b=this;if(this._layout.triggerFX("create"),a.Common.ApplicationBase.instance.on(a.Common.GameEvents.ON_UPDATE_GAMBLE,this.ShowGamble,this),this.pickCounter=5,this.centerCard=!1,this.HistoryVisible=!1,"en"===f.launchVariables.language.toLowerCase()||"escl"===f.launchVariables.language.toLowerCase())this._layout.getComponent("collect").visible=!0,this._layout.getComponent("collect").interactive=!0;else{this.button=["collect_lang"];for(var c=0;c<=this.button.length-1;c++){var e=this._layout.getComponent(""+this.button[c]);e.getLabel().position=new PIXI.Point(239,76),"hu"===f.launchVariables.language.toLowerCase()||"it"===f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.5,e.getLabel().scale.y=.5,e.getLabel().x-=55,e.getLabel().y-=5):"ro"===f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.6,e.getLabel().scale.y=.6,e.getLabel().x-=40,e.getLabel().y-=5):"vi"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=10,e.getLabel().y-=5):"cs"===f.launchVariables.language||"fi"===f.launchVariables.language||"ru"===f.launchVariables.language||"sk"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=32,e.getLabel().y-=5):"da"===f.launchVariables.language||"ja"===f.launchVariables.language?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=55,e.getLabel().y-=5):"tr"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=75,e.getLabel().y-=5):"zhhans"==f.launchVariables.language.toLowerCase()||"zhhant"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=65,e.getLabel().y-=5):"no"==f.launchVariables.language.toLowerCase()||"sv"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=45,e.getLabel().y-=5):"de"==f.launchVariables.language.toLowerCase()||"nl"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x+=10,e.getLabel().y-=5):"fr"==f.launchVariables.language.toLowerCase()?(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=1,e.getLabel().y-=5):(e.getLabel().scale.x=.8,e.getLabel().scale.y=.8,e.getLabel().x-=25,e.getLabel().y-=5),e.visible=!0,e.interactive=!0}}a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.ON_UPDATE_GAMBLE),this.on(h.ON_INTERACTION,function(c,e){d.globalSounds.playCue("GENERIC_CLICK"),"head_button"==e&&(b.pickCounter=b.pickCounter-1,b.centerCard=!0,b.HistoryVisible=!1,d.globalSounds.playCue("GENERIC_CLICK"),b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"head"})},500)),"tail_button"==e?(b.pickCounter=b.pickCounter-1,b.centerCard=!0,b.HistoryVisible=!1,d.globalSounds.playCue("GENERIC_CLICK"),b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!1,b._layout.getComponent("gamble_head_text").visible=!1,b._layout.getComponent("tail_button").visible=!1,b._layout.getComponent("gamble_tail_text").visible=!1,a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"tail"})},500)):"collect"==e||"collect_lang"==e?($("#cp_win").text(""),a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_GAMBLE_BUTTON_REQUEST,{gamble:"collect"}),i.closeOverlay(),a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.GAMBLE_EXIT),a.Common.Server.isGamble=!1):"spin_N_collect"!=e&&"collect"!=e||$("#button_spin_collect").trigger("click")}),this.visible=!1,a.Core.Time.juggler.setTimeout(function(){b.onResize(),b.visible=!0},0),a.Core.Time.juggler.setTimeout(function(){"en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?b._layout.getComponent("collect").interactive=!0:b._layout.getComponent("collect_lang").interactive=!0},100)},c.prototype.ShowGamble=function(){var b=this;"de"==f.launchVariables.language.toLowerCase()||"el"==f.launchVariables.language.toLowerCase()||"fi"==f.launchVariables.language.toLowerCase()||"hu"==f.launchVariables.language.toLowerCase()||"it"==f.launchVariables.language.toLowerCase()||"ro"==f.launchVariables.language.toLowerCase()||"tr"==f.launchVariables.language.toLowerCase()||"vi"==f.launchVariables.language.toLowerCase()?(this._layout.getComponent("gamble_amount_win_text").scale=new PIXI.Point(.8,.8),this._layout.getComponent("gamble_amount_text").scale=new PIXI.Point(.8,.8),this._layout.getComponent("gamble").scale=new PIXI.Point(.8,.8)):(this._layout.getComponent("gamble_amount_win_text").scale=new PIXI.Point(1,1),this._layout.getComponent("gamble_amount_text").scale=new PIXI.Point(1,1),this._layout.getComponent("gamble").scale=new PIXI.Point(1,1));var c,d=g.current.getGambleCard();if("head"==d?(c="t_to_h","en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?this._layout.getComponent("collect").interactive=!1:this._layout.getComponent("collect_lang").interactive=!1):"tail"==d&&(c="h_to_t","en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?this._layout.getComponent("collect").interactive=!1:this._layout.getComponent("collect_lang").interactive=!1),this.centerCard){var h=this._layout.getComponent(c);h.visible=!0,this._assets.playAnimation(h.clip,!1,function(){var c=b._layout.getComponent("coin_back_smock");c.visible=!0,b._assets.playAnimation(c.clip,!1,function(){c.visible=!1}),b.HistoryVisible=!0,b._layout.setComponentText("gamble_amount_value",e.format(g.current.getGambleTotalWin())),b._layout.setComponentText("gamble_amount_win_value",e.format(g.current.getGambleToWin())),b._layout.setComponentText("gamble_attempt_value",b.pickCounter.toString()),g.current.getNextAction()===j.GAMBLE&&b.HistoryVisible&&a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!0,b._layout.getComponent("gamble_head_text").visible=!0,b._layout.getComponent("tail_button").visible=!0,b._layout.getComponent("gamble_tail_text").visible=!0,"en"==f.launchVariables.language.toLowerCase()||"escl"==f.launchVariables.language.toLowerCase()?b._layout.getComponent("collect").interactive=!0:b._layout.getComponent("collect_lang").interactive=!0,h.visible=!1},1e3),void 0!=g.current.getGamblePreviousCards()&&0!=g.current.getGamblePreviousCards().length&&b.ShowHistory()})}else this._layout.setComponentText("gamble_amount_value",e.format(g.current.getGambleTotalWin())),this._layout.setComponentText("gamble_amount_win_value",e.format(g.current.getGambleToWin())),this._layout.setComponentText("gamble_attempt_value",this.pickCounter.toString()),g.current.getNextAction()===j.GAMBLE&&a.Core.Time.juggler.setTimeout(function(){b._layout.getComponent("head_button").visible=!0,b._layout.getComponent("gamble_head_text").visible=!0,b._layout.getComponent("tail_button").visible=!0,b._layout.getComponent("gamble_tail_text").visible=!0},1e3),void 0!=g.current.getGamblePreviousCards()&&0!=g.current.getGamblePreviousCards().length&&this.ShowHistory()},c.prototype.ShowHistory=function(){for(var b=g.current.getGamblePreviousCards(),c=0;c<b.length;c++){this._layout.getComponent("position_"+(c+1)).texture=this._assets.getPIXITexture(b[c])}g.current.getAction()==j.BASE&&g.current.getNextAction()==j.BASE&&a.Core.Time.juggler.setTimeout(function(){i.closeOverlay(),a.Common.Server.isGambleExit=!1,a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.GAMBLE_EXIT),a.Common.Server.isGamble=!1},1500)},c.prototype.onDestroy=function(){b.prototype.onDestroy.call(this),a.Common.ApplicationBase.instance.off(a.Common.GameEvents.ON_UPDATE_GAMBLE)},c}(c);b.GambleScene=k}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.SoundManager,d=a.Core.Events,e=a.Core.Renderer.SceneManager,f=a.Common.Server,g=a.Common.Server.ResponseResult,h=a.Common.CommonSceneBase,i=function(b){function h(a,c,d,e){return b.call(this,a,c,d,e)||this}return __extends(h,b),h.prototype.onCreate=function(){var h=this;b.prototype.onCreate.call(this);var i=[];this._layout.getLayoutParams().features.forEach(function(b,c){var d=a.Slots.SettingsPages.BettingSetup.getTotalBetCash()*g.current.getGameConfig().getBuyoutCost()[b.toUpperCase()],e=a.Common.Currency.format(d);h._layout.setComponentText("bet_value_"+b.toLowerCase(),e);var f="pop_glow_"+c,j=h._layout.getComponent(f);if(j){var k=TweenMax.fromTo(j,.9,{alpha:0},{alpha:1,yoyo:!0,repeat:-1});i.push(k)}});var j=function(){i.forEach(function(a){return a.kill()})};this.on(d.ON_INTERACTION,function(b,d){if(c.globalSounds.playCue("GENERIC_CLICK"),"buy_bonus_close_btn"===d)h._layout.getComponent("buy_bonus_close_btn").interactive=!0,a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.HIDE_BUY_FEATURE_UI),j(),e.closeOverlay();else if(d.startsWith("buy_btn_")){var i=d.replace("buy_btn_",""),k=g.current.getGameConfig().getBuyoutCost()[i.toUpperCase()],l=a.Slots.SettingsPages.BettingSetup.getTotalBetCash(),m=l*k;$("#cp_win").text(""),g.current.getBalance()>=m?(a.Common.ApplicationBase.instance.emit(a.Common.GameEvents.UPDATE_BALACE,g.current.getBalance()-m),h._layout.getComponent(d).interactive=!0,a.Common.ApplicationBase.instance.emit(f.SEND_PlAY_REQUEST,{bet:a.Slots.SettingsPages.BettingSetup.currentBetLevel,featureToBuy:i.toUpperCase()}),j(),e.closeOverlay()):(e.closeOverlay(),a.Common.ApplicationBase.instance.emit(a.Slots.WinManager.HIDE_BUY_FEATURE_UI),a.Common.ApplicationBase.instance.emit(a.Common.Server.SEND_DEPOSIT_REQUEST),a.Common.ApplicationBase.instance.emit(a.Common.PlayerMonitoring.INSUFFICIENT_FUND,a.Core.Lang.getPhrase("err_insufficient_funds")))}}),this.onResize()},h.prototype.onResize=function(){b.prototype.onResize.call(this)},h}(h);b.BuyFeatureScene=i}(a.RendererScenes||(a.RendererScenes={}))}(DO||(DO={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),DO;!function(a){!function(b){var c=a.Core.Lang,d=a.Core.HTML,e=a.Core.Events,f=a.Core.Utils.Queue,g=a.Core.Environment,h=a.Core.HTML.PageManager,i=a.Core.AssetManager,j=a.Core.Renderer.SceneManager,k=a.Common.Server.ResponseAlert,l=a.Common.Server.ResponseResult,m=function(m){function n(a,b){var c=m.call(this)||this;if(c.initialLoadDone=!1,g.defaultSettings=a,g.gameConfig=b,!localStorage.getItem("cacheCleared")){localStorage.setItem("cacheCleared","true");for(var d=["cacheCleared"],e=Object.keys(localStorage),f=0,h=e;f<h.length;f++){var i=h[f];-1===d.indexOf(i)&&localStorage.removeItem(i)}}return c}return __extends(n,m),n.prototype.init=function(){var c=this;n.instance=this,n.instance.on(b.Server.HANDLE_ALERT_RESPONSE,this.onServerAlert,this);var d=new f;d.add(function(a){window.vex.registerPlugin(window.vexDialog),window.vex.defaultOptions.className="vex-theme-plain",$.getJSON("./package.json?v=1.0.0",function(b){n.version=b.version,a()})}),d.add(function(b){a.Core.init(function(){b()})}),d.add(function(a){c.onAppInit(),a()}),d.start()},n.prototype.onAppInit=function(){var f=this;a.Core.Events.coreEvents.on(e.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.on(e.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.on(e.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.on(e.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.on(e.ON_APP_EXIT,this.onAppExit),n.instance.on(b.Server.HANDLE_RESULT_RESPONSE,this.onServerResults,this),n.instance.on(b.GameEvents.ON_GET_GAME_RESULTS,this.onGetGameResults,this),n.instance.on(b.Server.HANDLE_INIT_RESPONSE,this.onServerInitResponse,this),n.instance.on(b.GameEvents.ON_GAME_READY,this.onGameReady,this),n.instance.on(b.GameEvents.ON_RESULTS_DISPLAYED,this.onGameResultsDisplayed,this),n.instance.once(b.Server.HANDLE_START_RESPONSE,this.startResponseHandler,this),e.coreEvents.on(h.EVENT_ON_PAGE_LOADED,function(a){"loader"==a.getId()&&($("#logo_holder").hide(),$("#loader").hide(),d.getPageManager("MAIN").showPage("loader"))});var i=new a.Core.Utils.Queue;i.add(function(a){b.Server.createServerConnection(g.gameConfig.server,a)}),i.add(function(a){$("body").append("<div id='game_wrapper'></div>"),g.setVariant([g.DEVICE_MOBILE,g.DEVICE_DESKTOP],g.launchVariables.variant),a()}),i.add(function(a){d.getPageManager("MAIN").loadPages(g.gameConfig.html_pages,function(a,b){},function(){a()}),window.WebFont.load({custom:{families:g.gameConfig.fonts}})}),i.add(function(a){f.initialLoadDone=!0,c.loadDictionary(g.launchVariables.language,a)}),i.add(function(b){a.Slots.SettingsPages.Settings.loadGameRules(b)}),i.add(function(b){a.Core.Renderer.SceneManager.init(g.gameConfig.scenes),b()}),i.add(function(a){n.instance.emit(b.Server.SEND_START_REQUEST,this),a()}),i.start()},n.prototype.startResponseHandler=function(){var c=this,d=!1,e=new a.Core.Utils.Queue,f=g.gameConfig.assets_manifests;(g.launchVariables.isReplay||l.current.isBrokenGameSate())&&g.gameConfig.post_load_assets_manifests&&(f=f.concat(g.gameConfig.post_load_assets_manifests)),n.instance.emit(b.GameEvents.ON_LOAD_PROGRESS,0);for(var h=100/f.length,j=0,k=0;k<f.length;k++)!function(a){var c=f[a];e.add(function(e){i.get(c).load(c,function(){d||j!=f.length-1?e():(d=!0,n.instance.emit(b.Server.SEND_LOAD_COMPLETED),e()),j++},function(c){var e=(a*h+h*c)/100;d||n.instance.emit(b.GameEvents.ON_LOAD_PROGRESS,e)})})}(k);e.add(function(a){g.launchVariables.isReplay||l.current.isBrokenGameSate()||!g.gameConfig.post_load_assets_manifests?n.allAssetsLoaded=!0:c.startBackgroundAssetsLoad(),n.instance.emit(b.Server.HANDLE_INIT_RESPONSE),n.instance.emit(b.Server.CONFIGURE_BET_DETAILS,l.current.getGameConfig()),a()}),e.start()},n.prototype.startBackgroundAssetsLoad=function(){for(var a=g.gameConfig.post_load_assets_manifests,c=0,d=0;d<a.length;d++){var e=a[d];i.get(e).load(e,function(){n.allAssetsLoaded||c!=a.length-1||(n.allAssetsLoaded=!0,n.instance.emit(b.Server.ALL_ASSETS_LOADED)),c++},function(a){})}},n.prototype.onServerInitResponse=function(d){a.Common.SceneProfile.init(d),b.Currency.currencyCode=l.current.getGameConfig().getCurrencyCode(),b.Currency.currencyDecimalPlaces=l.current.getGameConfig().getCurrencyDecimalPlaces(),b.Currency.localeId=l.current.getGameConfig().getLocaleId(),b.Currency.useGrouping=l.current.getGameConfig().isUseGrouping(),b.Currency.displayCurrency=l.current.getGameConfig().isDisplayCurrency(),b.PlayerMonitoring.init(),c.scanDOM();var e=l.current.getGameConfig().getBuyBonusRTP();if(e){var f=[{id:"#demoBuyFree",key:"FREE_SPINS"},{id:"#demoBuyHold",key:"HOLD_FREE_SPINS"},{id:"#demoBuyJackpot",key:"JACKPOT_HOLD_FREE_SPINS"},{id:"#demoBuyBonus",key:"BONUS"}];l.current.getGameConfig().isBuyoutAllowed()?f.forEach(function(a){var b=a.id,c=a.key,d=e[c];d?$(b).show().html(function(a,b){return b.replace("rtp",d+"%")}):$(b).hide()}):f.forEach(function(a){var b=a.id;return $(b).hide()})}else["#demoBuyFree","#demoBuyHold","#demoBuyJackpot","#demoBuyBonus"].forEach(function(a){return $(a).hide()});l.current.getGameConfig().getRTP()?($("#demo").show(),$("#demo").html(function(){return $(this).html().replace("rtp",l.current.getGameConfig().getRTP()+"%")})):$("#demo").hide();var g=l.current.getGameConfig(),h=g.getMaxWin(),i=l.current.getGameConfig().getJurisdiction();if("DE"===i){[{id:"#demo1",value:h,search:"hpbm"},{id:"#demo2",value:g.getMaxWinProbability(),search:"hpp"}].forEach(function(a){var b=a.id,c=a.value,d=a.search;$(b).html(function(){return $(this).html().replace(d,c)}).show()})}else"GR"===i||"BR"===i?($("#demo1").html(function(){return $(this).html().replace("hpbm",h)}).show(),$("#demo2").hide()):$("#demo1, #demo2").hide();this.changeGameScene(!0)},n.prototype.changeGameScene=function(c){void 0===c&&(c=!1);var e=j.getSceneData(c?l.current.getAction():l.current.getNextAction());e||(e=j.getSceneData(b.Server.BASE)),a.Core.Time.juggler.setTimeout(function(){j.showScene(e.id,{data:l.current},function(e,f){f&&l.current.getNextAction()!=b.Server.BASE&&a.Core.Time.juggler.setTimeout(function(){d.getPageManager("MAIN").showPage("main"),$(".loadingText").css("display","none"),$(".start_Load").css("display","none"),$("#logo_holder").hide(),$("#loader").hide(),$("#instant_loader").hide()},200),l.current.isBrokenGameSate()||n.instance.emit(b.GameEvents.ON_GAME_CHANGED),n.instance.emit(b.GameEvents.ON_GAME_READY),c&&(a.Core.Time.juggler.setTimeout(function(){$("#instant_loader").hide(),d.getPageManager("MAIN").showPage("main")},1e3),n.instance.emit(b.GameEvents.ON_GAME_INITIALIZED),l.current.isBrokenGameSate()?a.Core.Time.juggler.setTimeout(function(){$("#instant_loader").hide(),n.instance.emit(a.Common.PlayerMonitoring.EVENT_ALARM_BROKEN_MSG)},300):l.current.getNextAction()===b.Server.BASE&&(a.Common.ApplicationBase.getAppValue("splashScreen")&&g.defaultSettings.isSplashScreen&&!l.current.isFreeRoundsActive()&&!l.current.getFreeRounds()?j.showSceneAsOverlay(b.Server.SPLASH):(g.defaultSettings.isSplashScreen=!1,a.Common.ApplicationBase.instance.emit(a.Slots.ControlPanel.EVENT_NO_TOUCHES,!1))))})},500)},n.prototype.onGameReady=function(){l.current.isBrokenGameSate()?(l.current.getNextAction()==b.Server.RE_SPIN||l.current.getAction()==b.Server.FREE_SPIN_SELECTION&&l.current.getNextAction()==b.Server.FREE_SPINS)&&n.instance.emit(b.GameEvents.ON_CONTINUE_GAME):n.instance.emit(b.GameEvents.ON_CONTINUE_GAME)},n.prototype.onServerAlert=function(b){$("#instant_loader").hide(),b.isFatal&&this.initialLoadDone?(d.getPageManager("MAIN").showPage("error",b),a.Core.Events.coreEvents.emit(a.Core.SoundManager.EVENT_SET_MUTE,!0,!0)):window.vex.dialog.alert(b.getPlayerMessage())},n.prototype.onServerResults=function(){n.instance.emit(b.GameEvents.ON_RESULTS_READY,!1)},n.prototype.onGetGameResults=function(a){a.isReplay?(n.instance.emit(b.Server.SEND_PlAY_REQUEST,a),l.current.getAction()===b.Server.BASE&&l.current.getBuyoutFeature()&&""!=l.current.getBuyoutFeature()||n.instance.emit(b.Server.REQUEST_RESULTS,a)):a.isBroken?l.current.getAction()===b.Server.BASE&&l.current.getBuyoutFeature()&&""!=l.current.getBuyoutFeature()?n.instance.emit(b.Server.SEND_PlAY_REQUEST,a):(l.current.getAction()===b.Server.BASE||l.current.getNextAction()===b.Server.BASE||l.current.getAction()===b.Server.RE_SPIN&&(l.current.getNextAction()===b.Server.FREE_SPINS||l.current.getNextAction()===b.Server.BONUS)?n.instance.emit(b.Server.SEND_PlAY_REQUEST,a):(a.isBroken=void 0,n.instance.emit(b.Server.SEND_CONTINUE_REQUEST,a)),n.instance.emit(b.Server.REQUEST_RESULTS,a)):(l.current.getNextAction()===b.Server.BASE?n.instance.emit(b.Server.SEND_PlAY_REQUEST,a):n.instance.emit(b.Server.SEND_CONTINUE_REQUEST,a),l.current.getNextAction()!==b.Server.FREE_SPIN_SELECTION&&n.instance.emit(b.Server.REQUEST_RESULTS,a))},n.prototype.onGameResultsDisplayed=function(){n.instance.emit(b.GameEvents.ON_CONTINUE_GAME),
l.current.getAction()===l.current.getNextAction()||l.current.getAction()===b.Server.BASE&&l.current.getNextAction()===b.Server.GAMBLE||l.current.getAction()===b.Server.BASE&&l.current.getNextAction()===b.Server.RE_SPIN||l.current.getAction()===b.Server.GAMBLE&&l.current.getNextAction()===b.Server.BASE||l.current.getAction()===b.Server.RE_SPIN&&l.current.getNextAction()===b.Server.BASE||this.changeGameScene(!1),l.current.getAction().includes(b.Server.FREE_SPINS)&&l.current.getNextAction().includes(b.Server.FREE_SPINS)&&($("#bet_button_wrapper").addClass("disabled"),$("#bet_button_wrapper").css("pointer-events","none"),$("#Autoplay_button_wrapper").addClass("disabled"),$("#Autoplay_button_wrapper").css("pointer-events","none"),$(".button_bett").addClass("disabled"),$(".button_bett").css("pointer-events","none"),$("#button_auto_cp").addClass("disabled"),$("#button_auto_cp").css("pointer-events","none"))},n.prototype.onAppExit=function(){a.Core.Events.coreEvents.off(e.ON_APP_RESIZE,this.onAppResize),a.Core.Events.coreEvents.off(e.ON_APP_LOSE_FOCUS,this.onAppLoseFocus),a.Core.Events.coreEvents.off(e.ON_APP_GET_FOCUS,this.onAppGetFocus),a.Core.Events.coreEvents.off(e.ON_APP_EXCEPTION,this.onAppException),a.Core.Events.coreEvents.off(e.ON_APP_EXIT,this.onAppExit),d.getPageManager("MAIN").showPage("game_over"),d.getPageManager("MAIN").getPage("game_over").changeParent("body")},n.prototype.onAppException=function(a){var b=new k({lang:"err_server_generic",err:{msg:a},fatal:!0});d.getPageManager("MAIN").showPage("error",b)},n.prototype.onAppGetFocus=function(a,b){},n.prototype.onAppLoseFocus=function(a,b){},n.prototype.onAppResize=function(b,c){g.isDeviceMobile()&&($("#rotate_mask").remove(),$("body").append("<div id='rotate_mask' style='z-index:999999999; width:500%; height:500%;position: fixed; left:0; top:0;background-color: black'></div>"),a.Core.Time.juggler.setTimeout(function(){$("#rotate_mask").animate({opacity:0},250,function(){$("#rotate_mask").remove()})},250))},n.saveAppValue=function(a,b){var c=g.launchVariables.operatorCode+"."+g.launchVariables.gameCode+"."+a;localStorage.setItem(c,b.toString())},n.getValues=function(a){var b=g.launchVariables.operatorCode+"."+g.launchVariables.gameCode+"."+a;return localStorage.getItem(b)},n.getAppValue=function(a,b){var c=g.launchVariables.operatorCode+"."+g.launchVariables.gameCode+"."+a,d=localStorage.getItem(c);return!d&&b&&(n.saveAppValue(a,b),d=localStorage.getItem(c)),"true"==d?d=!0:"false"==d&&(d=!1),d},n.allAssetsLoaded=!1,n}(PIXI.utils.EventEmitter);b.ApplicationBase=m}(a.Common||(a.Common={}))}(DO||(DO={}));